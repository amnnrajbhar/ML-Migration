<section class="content-header">
  <h1 class="display-1">
    Item Code
    <small>Extension</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
    <li class="active">Item Code Extension</li>
  </ol>
</section>
<!-- Main content -->
<section class="content">
  <div class="box">
    <div class="box-header mt-3">
      <div class="col-xs-6">
        <h3 class="box-title">Item Code Extension</h3>
        <span class="label label-danger" *ngIf="errMsg.length>0">{{errMsg}}</span>
      </div>
      <div class="col-xs-6">
        <button type="button" class="btn btn-primary pull-right"
          (click)="onClickNewRequest(false,ItemCodeExtensionModel,false,'')"><i class="fa fa-plus"
            aria-hidden="true"></i> New Request</button>
      </div>
    </div>
    <div id="dateFilterPanel">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group form-group-sm">
              <label for="requestno"> Request No</label>
              <input [(ngModel)]="filterrequest" class="form-control" id="requestno" placeholder="Request No"
                name="requestno" ngControl="filterrequest" #requestnoEnt="ngModel">
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group form-group-sm">
              <label for="fltrMaterialCode">Material Code</label>
              <input [(ngModel)]="filterMaterialCode" class="form-control" id="MaterialCode" placeholder="Material Code"
                name="MaterialCode" ngControl="filterMaterialCode" #requestnoEnt="ngModel">
            </div>
          </div>

          <div class="col-sm-4">
            <div class="form-group form-group-sm">
              <label for="fltrstatus">Status</label>
              <select [(ngModel)]="filterstatus" class="form-control" id="fltrstatus" name="fltrstatus"
                ngControl="filterstatus" #fltrstatusEnt="ngModel" matTooltip="Select Status">
                <option [ngValue]="null" disabled>--Select an Option--</option>
                <option *ngFor="let status of statuslist" value={{status.name}}>{{status.name}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <label>From Date</label>
            <div class="form-group form-group-sm" [ngClass]="(fromDate.touched && !fromDate.valid)?'has-error':''">
              <div class="input-group date">
                <input [matTooltipPosition]="'below'" matTooltip="Click to change from date" [owlDateTime]="dt11"
                  [owlDateTimeTrigger]="dt11" [max]="today" name="fromDate" class="form-control" [(ngModel)]="from_date"
                  #fromDate="ngModel">
                  <span class="input-group-addon trigger"><i class="fas fa-calendar-alt"></i></span>
              </div>
              <owl-date-time [pickerType]="'calendar'" #dt11 style="width: 250px;"></owl-date-time>
              <span class="help-block" *ngIf="!fromDate.valid && fromDate.touched">Please enter valid From Date.</span>
            </div>
          </div>
          <div class="col-sm-4">
            <label>To Date</label>
            <div class="form-group form-group-sm" [ngClass]="(toDate.touched && !toDate.valid)?'has-error':''">
              <div class="input-group date">
                <input [min]="from_date" [max]="today" [matTooltipPosition]="'below'" matTooltip="Click to change to date"
                  [owlDateTime]="dt12" [owlDateTimeTrigger]="dt12" name="endDate" class="form-control"
                  [(ngModel)]="to_date" #toDate="ngModel">
                  <span class="input-group-addon trigger"><i class="fas fa-calendar-alt"></i></span>
              </div>
              <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;"></owl-date-time>
              <span class="help-block" *ngIf="!toDate.valid && toDate.touched">Please enter valid To Date.</span>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-sm-12 center-contents">
            <div class="form-group form-group-sm">
              <button class="btn btn-primary btn-sm mr-3" (click)="getlist()" [disabled]="(!toDate.valid && toDate.touched) || (!fromDate.valid && fromDate.touched) || isGoLoading">
                <i class="fa" [ngClass]="{'fa-spin fa-spinner': isGoLoading}"></i><span *ngIf="isGoLoading">&nbsp;</span>Go
              </button>
              <button class="btn btn-info btn-sm" (click)="clearFilter()">Clear</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /.box-header -->
    <div class="box-body table-responsive">
      <table class="table table-bordered table-bordered" id="data">
        <thead style="background-color: #0099cc;color:white;">
          <tr>
            <th>Request Number</th>
            <th>Type</th>
            <th>Material Code</th>
            <th>Description</th>
            <th>From Storage Location</th>
            <th>To Storage Location</th>
            <th>Status</th>
            <th>Last Approver</th>
            <th>Pending Approver</th>
            <th>Submit for Approval</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of ItemCodeExtensionFilter; let i = index">
            <td>{{item.requestNo}}</td>
            <td>{{item.type}}</td>
            <td>{{item.materialCode1}}</td>
            <td>{{item.materialShortName}}</td>
            <td>{{item.storageLocationId1}}</td>
            <td>{{item.extendedStorageLocation1}} </td>
            <td>{{item.approveType}}</td>
            <td>{{item.lastApprover}}</td>
            <td>{{item.pendingApprover}}</td>
            <td>
              <div *ngIf="item.createdBy==this.currentUser.employeeId">
              <button *ngIf="item.approveType =='Created' || item.approveType =='Reverted to initiator'" type="button"
                [matTooltipPosition]="'after'" matTooltip="Click to Submit" class="btn btn-primary btn-xs"
                (click)="onSubmitEntry(item)">
                <i class="fas fa-check"></i>
              </button>
              </div>
            </td>
            <td>
              <div class="center-contents row">
                <button *ngIf="item.createdBy == this.currentUser.employeeId && (item.approveType == 'Created' || item.approveType == 'Reverted to initiator')" type="button"
                  [matTooltipPosition]="'after'" matTooltip="Click to view details" class="btn btn-primary btn-xs mr-3"
                  (click)="onClickNewRequest(false,item,false,'')">
                  <i class="fas fa-edit"></i>
                </button>
                <button *ngIf="(item.approveType != 'Created' && item.approveType != 'Reverted to initiator') && item.pendingApprover==this.currentUser.fullName || 
                  item.approver1 ==userid || item.approver2 ==userid || item.approver3 ==userid ||  item.approver4 ==userid " type="button"
                  [matTooltipPosition]="'after'" matTooltip="Click to edit details" class="btn btn-primary btn-xs mr-3"
                  (click)="onClickNewRequest(true,item,false,'')">
                  <i class="fas fa-edit"></i>
                </button>
                <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to view details"
                  class="btn btn-info btn-xs" (click)="onClickNewRequest(true,item,false,'View')">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <table *ngIf="false">
                <tr>
                  <td *ngIf="item.approveType == 'Created' || item.approveType == 'Reverted to initiator'">
                    <button *ngIf="item.createdBy==this.currentUser.employeeId" type="button" 
                      [matTooltipPosition]="'after'" matTooltip="Click to view details" class="btn btn-primary btn-xs" 
                      (click)="onClickNewRequest(false,item,false,'')">
                      <i class="fas fa-edit"></i>
                    </button>
                  </td>
                  &nbsp;
                  <td *ngIf="item.approveType != 'Created' && item.approveType != 'Reverted to initiator'">
                    <button *ngIf="item.pendingApprover==this.currentUser.fullName || item.approver1 ==userid ||  item.approver2 ==userid || 
                      item.approver3 ==userid ||  item.approver4 ==userid " type="button"
                      [matTooltipPosition]="'after'" matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                      (click)="onClickNewRequest(true,item,false,'')">
                      <i class="fas fa-edit"></i>
                    </button>
                  </td>
                  <!-- <td>
                      <button
                        *ngIf="item.modifiedBy==null && item.approveType =='Created' && item.createdBy==this.currentUser.employeeId"
                        type="button" [matTooltipPosition]="'after'" matTooltip="Click to view details"
                        class="btn btn-primary btn-xs" (click)="onClickNewRequest(false,item,false,'')">
                        <i class="fas fa-edit"></i>
                      </button>
                    </td>
                    &nbsp;
                    <td *ngIf="item.approveType !='Created'">
                      <button *ngIf="item.pendingApprover==currentUser.fullName || item.approver1 ==userid ||  item.approver2 ==userid || 
                      item.approver3 ==userid ||  item.approver4 ==userid" type="button" [matTooltipPosition]="'after'"
                        matTooltip="Click to view details" class="btn btn-primary btn-xs"
                        (click)="onClickNewRequest(true,item,false,'')">
                        <i class="fas fa-edit"></i>
                      </button>
                    </td> -->
                  &nbsp;
                  <td>
                    <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to view details"
                      class="btn btn-info btn-xs" (click)="onClickNewRequest(true,item,false,'View')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>

                </tr>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="text-center">
      <!-- <div class="overlay text-center h3" *ngIf="isLoading">
        <i class="fa fa-spinner fa-pulse"></i>
      </div> -->
      <ul class="pagination" *ngIf="ItemCodeExtensionFilter.length>0">
        <li>
          <a (click)="gotoPage(pageNo)">
            Showing <b>{{((pageNo-1)*pageSize)+1}}</b> -
            <b>{{(pageNo*pageSize)>totalCount?totalCount:pageNo*pageSize}}</b> of <b>{{totalCount}}</b> records
          </a>
        </li>
        <li><a *ngIf="pageNo>1" (click)="gotoPage(1)">First</a></li>
        <li><a *ngIf="pageNo>1" (click)="gotoPage(pageNo-1)">Previous</a></li>
        <li><a *ngIf="pageNo>2" (click)="gotoPage(pageNo-1)">{{pageNo-2}}</a></li>
        <li><a *ngIf="pageNo>1" (click)="gotoPage(pageNo-1)">{{pageNo-1}}</a></li>
        <li class="active"><a (click)="gotoPage(pageNo)">{{pageNo}}</a></li>
        <li><a *ngIf="totalPages>pageNo" (click)="gotoPage(pageNo+1)">{{pageNo+1}}</a></li>
        <li><a *ngIf="totalPages>pageNo+1" (click)="gotoPage(pageNo+2)">{{pageNo+2}}</a></li>
        <li><a *ngIf="totalPages>pageNo" (click)="gotoPage(pageNo+1)">Next</a></li>
        <li><a *ngIf="totalPages>pageNo" (click)="gotoPage(totalPages)">Last</a></li>
        <li><a (click)="gotoPage(pageNo)">Page <b>{{pageNo}}</b> of <b>{{totalPages}}</b></a></li>
        <li><a>Page Size
            <select id="ddlPageSize" [(ngModel)]="pageSize" (change)="pageSizeChange()">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select></a>
        </li>
      </ul>
    </div>
    <!-- /.box-body -->
    <!-- <div class="overlay" *ngIf="isLoading">
      <i class="fa fa-spinner fa-pulse"></i>
    </div> -->
  </div>
</section>

<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-md  modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title" style="color: #0FB381; text-align: center;"><span class="text pull-center"
            *ngIf="errMsgPop1.length>0"><i class="fa fa-check"></i>{{errMsgPop1}}</span></h3>
      </div>
    </div>
  </div>
  <div class="overlay" *ngIf="isLoading">
    <i class="fa fa-spinner fa-pulse"></i>
  </div>
</div>
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" (click)="resetForm()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Item Code Extension Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #dataForm="ngForm" (keydown.enter)="$event.preventDefault()">
              <div class="row" *ngIf="!isEdit">
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="requestdate"> Request Date</label>
                    <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                      value="{{requestdate | date:'dd/MM/yyyy'}}" readonly>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="Type">Type<span style="color:red">*</span></label>
                    <div class="row">
                      <mat-radio-group aria-label="Select option?" id="type" name="type"
                        [(ngModel)]="ItemCodeExtensionModel.type" [disabled]="isEdit"
                        ngControl="ItemCodeExtensionModel.type" #typeEnt="ngModel" required>
                        <mat-radio-button value='Plant'>Plant</mat-radio-button>
                        &nbsp;&nbsp;&nbsp;
                        <mat-radio-button value='StorageLocation'>Storage Location</mat-radio-button>
                      </mat-radio-group>
                    </div>

                  </div>
                </div>

              </div>
              <hr class="m-3">
              <div class="box" *ngIf="isEdit">
                <div class="box-header" style="background-color: #b6cedf;height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Basic details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-4" *ngIf="isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{ItemCodeExtensionModel.requestDate | date:'dd/MM/yyyy HH:mm'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{requestdate | date:'dd/MM/yyyy HH:mm'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="Type">Type<span style="color:red">*</span></label>
                      <div class="row">
                        <mat-radio-group aria-label="Select option?" id="type" name="type"
                          [(ngModel)]="ItemCodeExtensionModel.type" [disabled]="isEdit"
                          ngControl="ItemCodeExtensionModel.type" #typeEnt="ngModel" required>
                          <mat-radio-button value='Plant'>Plant</mat-radio-button>
                          &nbsp;&nbsp;&nbsp;
                          <mat-radio-button value='StorageLocation'>Storage Location</mat-radio-button>
                        </mat-radio-group>
                      </div>

                    </div>
                  </div>                 

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="storagelocation">Storage Location</label>
                      <select [(ngModel)]="ItemCodeRequestModel.storageLocationId" class="form-control"
                        id="storagelocation" name="storagelocation" ngControl="ItemCodeRequestModel.storageLocationId"
                        #storagelocationEnt="ngModel" [disabled]="isEdit" matTooltip="Select Storage Location" disabled>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of storagelocationlist" value={{loc.storageLocationId}}>
                          {{loc.storageLocationId}}-{{loc.storageLocationName}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="UOM">UOM</label>
                      <select [(ngModel)]="ItemCodeRequestModel.unitOfMeasId" class="form-control" id="unitOfMeasId"
                        name="unitOfMeasId" ngControl="ItemCodeRequestModel.unitOfMeasId" #uomEnt="ngModel"
                        matTooltip="Select UOM" disabled>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let uom of uomMasterList" value={{uom.uom}}>{{uom.uom}}-{{uom.description}}
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeExists">SAP Code Exists</label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCodeExists" class="form-control"
                        placeholder="sapCodeNo" id="sapCodeExists" name="sapCodeExists"
                        ngControl="ItemCodeRequestModel.sapCodeExists" #sapCodeExistsEnt="ngModel" disabled type="text">
                      <!-- <div class="row">
                              <mat-radio-group aria-label="Select option?" id="sapCodeExists" name="sapCodeExists"
                                [(ngModel)]="ItemCodeRequestModel.sapCodeExists"  disabled
                                ngControl="ItemCodeRequestModel.sapCodeExists" #sapCodeExistsEnt="ngModel" >
                                <mat-radio-button value='Y'>Yes</mat-radio-button>
                                &nbsp;&nbsp;&nbsp;
                                <mat-radio-button value='N'>No</mat-radio-button>
                              </mat-radio-group>
                            </div> -->
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeNo">SAP Code No</label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCodeNo" class="form-control" placeholder="sapCodeNo"
                        (input)="ItemCodeRequestModel.sapCodeNo=$event.target.value.toUpperCase()" id="sapCodeNo"
                        name="sapCodeNo" ngControl="ItemCodeRequestModel.sapCodeNo" #sapCodeNoEnt="ngModel" disabled
                        matTooltip="Enter SAP Code No" type="text">
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
               
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf;height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title" *ngIf="ItemCodeExtensionModel.type!='StorageLocation'">Plant details</h3>
                    <h3 class="box-title" *ngIf="ItemCodeExtensionModel.type=='StorageLocation'">Storage Location
                      details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">

                  <div class="col-sm-4">
                    <div class="row">
                      <div class="form-group form-group-sm">
                        <label for="materialCode1"> Material Code<span style="color:red">*</span></label>
                        <input name="materialCode1" id="materialCode1" placeholder="Material Code" class="form-control"
                          [(ngModel)]="ItemCodeExtensionModel.materialCode1"
                          ngControl="ItemCodeExtensionModel.materialCode1"
                          (input)="ItemCodeExtensionModel.materialCode1=$event.target.value.toUpperCase()"
                          [disabled]="isEdit" required>
                      </div>
                      <div class="col-sm-1" *ngIf="!isEdit">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary btn-sm"
                          (click)="GetItemCodeData(ItemCodeExtensionModel.materialCode1)"
                          [disabled]="ItemCodeExtensionModel.materialCode1 == null"
                          matTooltip="click to Continue">Continue</button>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="mat_type">Material Type</label>
                      <select [(ngModel)]="ItemCodeExtensionModel.materialTypeId" class="form-control" id="mat_type"
                        name="mat_type" ngControl="ItemCodeExtensionModel.materialTypeId" #mat_typeEnt="ngModel"
                        matTooltip="select Material Type" disabled>
                        <option [ngValue]="undefined" disabled [selected]="true">--Select an Option--</option>
                        <option *ngFor="let mat_type of materialList" value={{mat_type.id}}>
                          {{mat_type.type}}-{{mat_type.description}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="MaterialGroup">Material Group</label>
                      <select [(ngModel)]="ItemCodeRequestModel.materialGroupId" class="form-control" id="mtrlgrp"
                        name="mtrlgrp" ngControl="ItemCodeRequestModel.materialGroupId" #mtrlgrpEnt="ngModel" disabled
                        matTooltip="Select MaterialGroup">
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of materialgroupList" value={{mat.materialGroupId}}>
                          {{mat.materialGroupId}}-{{mat.ltxt}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <!-- <div class="row"> -->
                    <div class="col-sm-6">
                      <div class="form-group form-group-sm">
                        <label for="shortnaame">Short Name</label>
                        <input [(ngModel)]="ItemCodeRequestModel.materialShortName" class="form-control" id="shortnaame"
                          placeholder="Material Name" name="shortnaame" ngControl="ItemCodeRequestModel.materialShortName"
                          (input)="ItemCodeRequestModel.materialShortName=$event.target.value.toUpperCase()"
                          #shortnaameEnt="ngModel" disabled>
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <div class="form-group form-group-sm">
                        <label for="longname">Long Name</label>
                        <input [(ngModel)]="ItemCodeRequestModel.materialLongName" class="form-control" id="longname"
                          placeholder="Material Name" name="longname" ngControl="ItemCodeRequestModel.materialLongName"
                          (input)="ItemCodeRequestModel.materialLongName=$event.target.value.toUpperCase()"
                          #longnameEnt="ngModel" disabled>
                      </div>
                    </div>
                  
                  <!-- </div> -->
  
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="FromPlant">Extend From Plant<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeExtensionModel.plant1" class="form-control" id="FromPlant"
                        name="FromPlant" ngControl="ItemCodeExtensionModel.plant1" #FromPlantEnt="ngModel"
                         matTooltip="Select To Plant" [disabled]="isEdit" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of ItemCodeRequestModelList1" value={{loc.locationId}}>{{loc.plantcode}}
                        </option>
                      </select>
                    </div>  
                  </div>
                  <div class="col-sm-4" *ngIf="ItemCodeExtensionModel.type=='Plant'">
                    <div class="form-group form-group-sm">
                      <label for="ToPlant">Extend To Plant<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeExtensionModel.extendedToPlant1" class="form-control" id="ToPlant"
                        name="ToPlant" ngControl="ItemCodeExtensionModel.extendedToPlant1" #ToPlantEnt="ngModel" 
                        (change)="getApproversList(ItemCodeExtensionModel)" matTooltip="Select To Plant" 
                        [disabled]="isEdit" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of locationList" value={{loc.id}}>{{loc.code}}-{{loc.name}}</option>
                      </select>
                     
                    </div>
                  </div>

                <!-- </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row"> -->
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="Fromstoragelocation">Extended From Storage Location<span
                          style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeExtensionModel.storageLocationId1" class="form-control"
                        id="Fromstoragelocation" name="Fromstoragelocation" 
                        ngControl="ItemCodeExtensionModel.storageLocationId1" #FromstoragelocationEnt="ngModel" 
                        [disabled]="isEdit" matTooltip="Select Storage Location" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of storagelocationlist1" value={{loc.storageLocationId}}>
                          {{loc.storageLocationId}}-{{loc.storageLocationName}}</option>
                      </select>
                    
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="Tostoragelocation">Extended To Storage Location<span
                          style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeExtensionModel.extendedStorageLocation1" class="form-control"
                        id="Tostoragelocation" name="Tostoragelocation" 
                        ngControl="ItemCodeExtensionModel.extendedStorageLocation1" #TostoragelocationEnt="ngModel" 
                        (change)="getApproversList(ItemCodeExtensionModel)" [disabled]="isEdit" 
                        matTooltip="Select Storage Location" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of storagelocationlist2" value={{loc.storageLocationId}}>
                          {{loc.storageLocationId}}-{{loc.storageLocationName}}</option>
                      </select>
                     
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="saccode">HSN Code<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeExtensionModel.hsnCode" class="form-control" placeholder="HSN Code"
                        [minlength]="6" id="hsncode" name="hsncode" ngControl="ItemCodeExtensionModel.hsnCode"
                        [readonly]="isEdit" matTooltip="Enter HSN code" #hsncodeEnt8="ngModel" type="text" required>
                      <span class="help-block" *ngIf="!hsncodeEnt8.valid && hsncodeEnt8.touched">Minimum length
                        Should be 6 characters/Digits</span>
                    </div>
                  </div>
                  <div class="col-sm-12">
                    <div class="form-group form-group-sm">
                      <label for="reason">Reason<span style="color:red">*</span></label>
                      <textarea [(ngModel)]="ItemCodeExtensionModel.reason" class="form-control" placeholder="Reason" 
                        id="reason" name="reason" [disabled]="isEdit" ngControl="ItemCodeExtensionModel.reason" 
                        matTooltip="Enter Reason" #reasonEnt="ngModel" type="text" required></textarea>
                     
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf="isEdit && !view">
                  <div class="col-sm-12">
                    <div class="form-group form-group-sm"
                      [ngClass]="(commentsEnt.touched && !commentsEnt.valid)?'has-error':''">
                      <label for="Customer">Comments<span style="color:red">*</span></label>
                      <textarea [(ngModel)]="comments" class="form-control" placeholder="comments" id="comments"
                        name="comments" ngControl="comments" [disabled]="View" matTooltip="Enter Comments" 
                        #commentsEnt="ngModel" type="text" required></textarea>
                      <span class="help-block" *ngIf="!commentsEnt.valid && commentsEnt.touched">Please Enter
                        comments.</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Attachments</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf="!isEdit">
                  <div class="col-sm-4">
                    <input #myInput type="file" accept=".doc,.pdf" id="file"
                      (change)="handleFileInput($event.target.files)" multiple>
                  </div>
                  <div class="col-sm-3">
                    <span class="text-red pull-left" *ngIf="errMsg1.length>0"><i
                        class="fa fa-warning"></i>{{errMsg1}}</span>
                  </div>
                  <div class="col-sm-4">
                    <span class="text-red pull-left"><i class="fa fa-warning"></i>
                      NOTE:Maximum Upto 2Mb Can Be Uploaded</span>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row mt-3" *ngFor="let attach of fileslist">
                  <div class="col-sm-4">
                    <label for="attachments">{{attach}}</label>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit && attach!= null">
                    <button title="Remove Files" (click)="removefile(attach);" class="btn btn-secondary btn-sm removeFileButton">
                      <i class="fa fa-trash"></i>
                    </button>
                  </div>
                </div>
                <div class="row mt-3" *ngFor="let attach of attachments">
                  <div class="col-sm-4">
                    <label for="attachments"></label><a (click)="downloadFile(ItemCodeExtensionModel.requestNo,attach);"
                      style="cursor: pointer;text-decoration: underline; color: #68a7d2;" [matTooltipPosition]="'below'"
                      matTooltip="Click to download the file">{{attach}}</a>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit && attach!= null">
                    <button title="Remove Files" (click)="deletefile(ItemCodeExtensionModel,attach);" class="btn btn-secondary btn-sm removeFileButton">
                      <i class="fa fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Approvers List</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf='!isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #0099cc; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th>Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of Approverslist; let i = index">
                            <td>{{user.priority}}</td>
                            <td>{{getloc(user)}}</td>
                            <td>{{user.approverId}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row" *ngIf='isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #0099cc; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th *ngIf="!isEdit">Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                            <th *ngIf="isEdit">Status</th>
                            <th *ngIf="isEdit">Date</th>
                            <th *ngIf="isEdit">Comments</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of transactionslist; let i = index">
                            <td>{{user.approvalPriority}}</td>
                            <td>{{user.doneBy}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                            <td>{{user.status}}</td>
                            <td>{{user.doneOn |date:'dd/MM/yyyy HH:mm'}}</td>
                            <td>{{user.comments}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>



            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <div *ngIf="!view" class="row pull-right">
          <div class="dropdown "> 
            <button type="button" class="btn btn-primary mr-3" (click)="oncloserequest('close')"
              matTooltip="Click to Close the Request" *ngIf="isEdit && !view && Closure"
              [disabled]="comments==''">Closure
            </button>
            <button type="button" class="btn btn-primary mr-3" (click)="onCreate()" matTooltip="Click to Create"
              [disabled]="!dataForm.valid"
              *ngIf="isEdit && !view && Creator && !Closure && ItemCodeExtensionModel.createdBy!=this.currentUser.employeeId">Create
            </button>
            <button type="button" class="btn btn-primary mr-3" (click)="onreview('InProcess')" matTooltip="Click to Submit"
              [disabled]="!dataForm.valid" *ngIf="isEdit && !view && Review && !Closure && !Creator">Submit
            </button>
            <button type="button" class="btn btn-danger mr-3" (click)="onreview('Rejected')" matTooltip="Click to Reject"
              *ngIf="isEdit && !view && Review && !Closure" [disabled]="comments==''">Reject
            </button>
            <a *ngIf="isEdit && Review" data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
                <button [disabled]="comments==''" type="button" class="btn btn-danger mr-3"
                  matTooltip="Click to Revert">Revert
                </button>
              </span>
            </a>
            <ul *ngIf="isEdit && Review" class="dropdown-menu">
              <li><a *ngIf="Aprlpriority >1" (click)="onRevertRequest('ReverttoLastApprover')">Previous Approver</a>
              </li>
              <li><a (click)="onRevertRequest('ReverttoInitiator')">Initiator</a></li>
            </ul>
          </div>
          <button type="button" class="btn btn-primary mr-3" (click)="onSaveEntry('Save')" matTooltip="Click to Save"
            [disabled]="!dataForm.valid " *ngIf="!isEdit && ItemCodeExtensionModel.approveType==null">Save
          </button>
          <button type="button" class="btn btn-primary mr-3" (click)="onSaveEntry('Submit')"
            matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid "
            *ngIf="!isEdit && ItemCodeExtensionModel.approveType==null ">Save & Submit
          </button>
          <button type="button" class="btn btn-primary mr-3" (click)="onSubmitEntry(ItemCodeExtensionModel)"
            matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid" *ngIf="!isEdit && ItemCodeExtensionModel.approveType=='Created'">Save & Submit
          </button>
          <button type="button" class="btn btn-info mr-3" (click)="resetForm()" *ngIf="!isEdit"
            matTooltip="Click to Clear">Clear
          </button>
          <button type="button" class="btn btn-default mr-3" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" (click)="resetForm()"
            matTooltip="Click to close modal">Close
          </button>
        </div>
        <div *ngIf="view" class="row pull-right mt-3">
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" (click)="resetForm()" 
            matTooltip="Click to close modal">Close
          </button>
        </div>      
        
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>