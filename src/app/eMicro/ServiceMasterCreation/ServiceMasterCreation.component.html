<section class="content-header">
  <h1 class="display-1">
    Service Master
    <small>Creation</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
    <li class="active">Service Master Creation</li>
  </ol>
</section>
<!-- Main content -->
<section class="content">
  <div class="box">
    <div class="box-header my-3">
      <div class="col-xs-6">
        <h3 class="box-title">Service Master Creation</h3>
        <span class="label label-danger" *ngIf="errMsg.length>0">{{errMsg}}</span>
      </div>
      <div class="col-xs-6">
        <button type="button" class="btn btn-primary pull-right" (click)="onClickNewRequest()"><i class="fa fa-plus"
            aria-hidden="true"></i> New Request</button>
      </div>
    </div>
    <div id="dateFilterPanel">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="requestno"> Request Number</label>
              <input [(ngModel)]="filterrequest" class="form-control" id="requestno" placeholder="Request Number"
                name="requestno" ngControl="filterrequest" #requestnoEnt="ngModel">
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="fltrlocation">Location</label>
              <select [(ngModel)]="filterlocation" class="form-control" id="fltrlocation" name="fltrlocation"
                ngControl="filterlocation" #fltrlocationEnt="ngModel" matTooltip="Select Location">
                <option [ngValue]="null" disabled>--Select an Option--</option>
                <option *ngFor="let loc of locationList" value={{loc.id}}>{{loc.code}}-{{loc.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="fltrstatus">Status</label>
              <select [(ngModel)]="filterstatus" class="form-control" id="fltrstatus" name="fltrstatus"
                ngControl="filterstatus" #fltrstatusEnt="ngModel" matTooltip="Select Status">
                <option [ngValue]="null" disabled>--Select an Option--</option>
                <option *ngFor="let status of statuslist" value={{status.name}}>{{status.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-sm-3">
            <label>From Date</label>
            <div class="form-group form-group-sm" [ngClass]="(fromDate.touched && !fromDate.valid)?'has-error':''">
              <div class="input-group date">
                <input [matTooltipPosition]="'below'" matTooltip="Click to change from date" [owlDateTime]="dt11"
                  [owlDateTimeTrigger]="dt11" [max]="today" name="fromDate" class="form-control" [(ngModel)]="from_date"
                  #fromDate="ngModel">
                <span class="input-group-addon trigger"><i class="fas fa-calendar-alt"></i></span>
              </div>
              <owl-date-time [pickerType]="'calendar'" #dt11 style="width: 250px;"></owl-date-time>
              <span class="help-block" *ngIf="!fromDate.valid && fromDate.touched">Please enter valid From
                Date.</span>
            </div>
          </div>
          <div class="col-sm-3">
            <label>To Date</label>
            <div class="form-group form-group-sm" [ngClass]="(toDate.touched && !toDate.valid)?'has-error':''">
              <div class="input-group date">
                <input [min]="from_date" [max]="today" [matTooltipPosition]="'below'" matTooltip="Click to change to date"
                  [owlDateTime]="dt12" [owlDateTimeTrigger]="dt12" name="endDate" class="form-control"
                  [(ngModel)]="to_date" #toDate="ngModel">
                <span class="input-group-addon trigger"><i class="fas fa-calendar-alt"></i></span>
              </div>
              <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;"></owl-date-time>
              <span class="help-block" *ngIf="!toDate.valid && toDate.touched">Please enter valid To
                Date.</span>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-sm-12 center-contents">
            <div class="form-group form-group-sm">
              <button class="btn btn-primary btn-sm mr-3" (click)="getAllEntries();"
                [disabled]="(!toDate.valid && toDate.touched) || (!fromDate.valid && fromDate.touched) || isLoading"
                matTooltip="click to go">
                <i class="fa" [ngClass]="{'fa-spin fa-spinner': isLoading}"></i><span *ngIf="isLoading">&nbsp;</span>Go
              </button>
              <button class="btn btn-info btn-sm" (click)="clearFilter();" matTooltip="click to reset">Clear</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-12 mt-3">
      <div class="row">
        <div class="col-xs-6">
          <label for="label">Click to Download template for Multiple Requests</label>
          <a class="button" title="Excel" href='../assets/dist/img/ServiceMasterTemplate.xlsx'
            download="ServiceMasterTemplate.xlsx"><br>
            <button> Download</button><br>
          </a>
        </div>
        <div class="col-xs-6">
          <label> Choose the File to upload:</label><br>
          <div class="row">
            <div class="col-sm-6">
              <input #myInput type="file" id="file" name="file" (change)="uploadfiles($event.target.files)" />

            </div>
            <div class="col-sm-3">
              <input type="button" class="btn btn-primary" (click)="upload()" value="Upload" />
            </div>
          </div>
        </div>
        <div class="col-sm-12 mt-3">
          <div class="form-group form-group-sm">
            <button type="button" class="btn btn-primary mr-3" (click)="bulkApprove('Create')"
              [disabled]="!checkedRequestList.length>0" matTooltip="Click to Submit">Approve</button>
            <button type="button" class="btn btn-primary" (click)="bulkApprove('Rejected')"
              [disabled]="!checkedRequestList.length>0" matTooltip="Click to Reject">Reject</button>
          </div>
        </div>
      </div>
    </div>
    <!-- /.box-header -->
    <div class="box-body table-responsive">
      <table id="userTable" class="table table-bordered table-striped">
        <thead style="background-color: #68a7d2;color:white;">
          <tr>
            <th></th>
            <th>Request No</th>
            <th>Requested By</th>
            <th>Requested Date</th>
            <th>Location</th>
            <th>Service Description</th>
            <th>Approve Status</th>
            <th>Last Approver</th>
            <th>Pending Approver</th>
            <th>Submit for Approval</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of ServiceMasterFilter; let i = index">
            <td>
              <input *ngIf="item.pendingApprover == currentUser.employeeId" type="checkbox" [id]="'chkusage'+item.id"
                [name]="item.id" [(ngModel)]="item.isSelected" (change)="isAllSelected()" #usageEnt="ngModel">
            </td>
            <td>{{item.requestNo}}</td>
            <td>{{item.requestedBy}}</td>
            <td>{{item.requestDate | date:'dd/MM/yyyy HH:mm'}}</td>
            <td>{{item.plantCode}}</td>
            <td>{{item.serviceDescription}}</td>
            <td>{{item.appSatus}}</td>
            <td>{{item.lastApprover}}</td>
            <td>{{item.pendingApprover}}</td>
            <td>
              <button
                *ngIf="item.appSatus =='Created' || item.appSatus =='Reverted to initiator' && item.createdBy==this.currentUser.employeeId"
                type="button" [matTooltipPosition]="'after'" matTooltip="Click to Submit" class="btn btn-primary btn-xs"
                (click)="onSubmitEntry(item)">
                <i class="fas fa-check"></i>
              </button>
            </td>
            <td>
              <table>
                <tr>
                  <td>
                    <button
                      *ngIf="item.appSatus =='Created' || item.appSatus =='Reverted to initiator' && item.createdBy==this.currentUser.employeeId"
                      type="button" [matTooltipPosition]="'after'" matTooltip="Click to edit details"
                      class="btn btn-primary btn-xs" (click)="onUserActions(false,item,false)">
                      <i class="fas fa-edit"></i>
                    </button>
                  </td>
                  &nbsp;
                  <td *ngIf="item.appSatus !='Created' && item.appSatus !='Reverted to initiator'">
                    <button *ngIf="item.pendingApprover==currentUser.fullName || item.approver1 ==userid ||  item.approver2 ==userid || 
                      item.approver3 ==userid ||  item.approver4 ==userid " type="button"
                      [matTooltipPosition]="'after'" matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                      (click)="onUserActions(true,item,false,'')">
                      <i class="fas fa-edit"></i>
                    </button>
                  </td>
                  &nbsp;
                  <!-- <td>
                    <button
                      *ngIf="item.modifiedBy==null && item.appSatus =='Created' || item.appSatus =='Reverted to initiator' && item.createdBy==this.currentUser.employeeId"
                      type="button" [matTooltipPosition]="'after'" matTooltip="Click to edit details"
                      class="btn btn-primary btn-xs" (click)="onUserActions(false,item,false,'')">
                      <i class="fas fa-edit"></i>
                    </button>
                  </td>
                  &nbsp; -->
                  <td>
                    <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to view details"
                      class="btn btn-primary btn-xs" (click)="onUserActions(true,item,false,'View')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>
                  &nbsp;
                  <td>
                    <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to Copy Data"
                      class="btn btn-primary btn-xs" (click)="onUserActions(false,item,false,'Copy')">
                      <i class="fa fa-copy"></i>
                    </button>
                  </td>
                  &nbsp;
                  <td>
                    <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to print"
                      class="btn btn-primary btn-xs" (click)="showprintmodel(item)">
                      <i class="fas fa-print"></i>
                    </button>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- /.box-body -->
    <!-- <div class="overlay" *ngIf="isLoading">
      <i class="fa fa-spinner fa-pulse"></i>
    </div> -->
  </div>
</section>

<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-md  modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title" style="color: #0FB381; text-align: center;"><span class="text pull-center"
            *ngIf="errMsgPop1.length>0"><i class="fa fa-check"></i>{{errMsgPop1}}</span></h3>
      </div>
    </div>
  </div>
  <div class="overlay" *ngIf="isLoading">
    <i class="fa fa-spinner fa-pulse"></i>
  </div>
</div>
<div class="modal fade" id="searchModal" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Service Master Code Search
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #searchForm="ngForm" (keydown.enter)="$event.preventDefault()">
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="serviceDescription">Service Description<span style="color:red">*</span></label>
                    <input [(ngModel)]="servicemastermodel.serviceDescription" class="form-control"
                      id="serviceDescription1"
                      (input)="servicemastermodel.serviceDescription=$event.target.value.toUpperCase()"
                      placeholder="Service Description" name="serviceDescription1"
                      ngControl="servicemastermodel.serviceDescription" #serviceDescriptionEnt="ngModel" required>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="serviceCatagory">Service Category</label>
                    <select [(ngModel)]="servicemastermodel.serviceCatagory" class="form-control" id="serviceCatagory1"
                      name="serviceCatagory1" ngControl="servicemastermodel.serviceCatagory"
                      #serviceCatagoryEnt="ngModel" [disabled]="isEdit" matTooltip="Select serviceCatagory">
                      <option [ngValue]="undefined" disabled>--Select an Option--</option>
                      <option *ngFor="let mat of serviceCategorylist" value={{mat.serCatCode}}>
                        {{mat.serCatCode}}-{{mat.serCatDesc}}</option>
                    </select>
                  </div>
                </div>
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="row">
                <div class="col-sm-4 pull-center">
                  <label>&nbsp;</label>
                  <div class="form-group form-group-sm">
                    <button *ngIf="continue" class="btn btn-primary btn-sm"
                      (click)="onUserActions(false,servicemastermodel,false,'');" matTooltip="Click to Continue"
                      [disabled]="!searchForm.valid" data-dismiss="modal">
                      Continue to Create</button>
                    &nbsp;&nbsp;
                    <button class="btn btn-primary btn-sm" [disabled]="!searchForm.valid" (click)="getSearchResult();"
                      matTooltip="Click to Search">search</button>
                  </div>
                </div>

              </div>


              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;

              <div class="row">
                <div class="col-sm-12">
                  <div class="table-responsive">
                    <table id="userTable" class="table table-striped">
                      <thead style="background-color: #68a7d2; color:white;">
                        <tr>
                          <th>Service Description</th>
                          <th>Detailed Service Description</th>
                          <th>Justification</th>
                          <th>SAP Code No</th>
                          <th>CREATED ON</th>
                          <th>REQUESTED ON</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of ServiceMastersearchlist; let i = index">
                          <td>{{item.serviceDescription}}</td>
                          <td>{{item.detailedDesc}}</td>
                          <td>{{item.justification}}</td>
                          <td>{{item.sapCodeNo}}</td>
                          <td>{{item.sapCreationDate | date :'dd/MM/yyyy'}}</td>
                          <td>{{item.requestDate | date :'dd/MM/yyyy'}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>


            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
          data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Service Master Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #dataForm="ngForm" (keydown.enter)="$event.preventDefault()">

              <div class="box">

                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">

                  <div class="col-sm-4" *ngIf="isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{servicemastermodel.requestDate | date:'dd/MM/yyyy'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{requestdate | date:'dd/MM/yyyy'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="((servicemastermodel.plantCode==null || servicemastermodel.plantCode=='' || servicemastermodel.plantCode==undefined) && !notFirst) ? 'has-error' : ''">
                      <label for="location">
                        Location <span style="color:red">*</span>
                      </label><br>
                      <ng-select (blur)="checkLocation();" bindLabel="name" required
                        name="location" bindValue="code" [multiple]="false" [virtualScroll]="true"
                        placeholder="Select Location" [(ngModel)]="servicemastermodel.plantCode" [disabled]="isEdit">
                        <ng-option *ngFor="let loc of locationList" value={{loc.code}}>{{loc.code}} - {{loc.name}}
                        </ng-option>
                      </ng-select>
                      <span class="help-block"
                        *ngIf="(servicemastermodel.plantCode==null || servicemastermodel.plantCode=='' || servicemastermodel.plantCode==undefined) && !notFirst">Please
                        Select Location
                      </span>
                    </div>
                  </div>
                  <!-- <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="location">Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="servicemastermodel.plantCode" class="form-control" id="location"
                        name="location" ngControl="servicemastermodel.plantCode" #locationEnt="ngModel"
                        (change)="getApproversList(servicemastermodel)"
                        [disabled]="isEdit" matTooltip="Select Location" required >
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of locationList" value={{loc.code}}>{{loc.code}}-{{loc.name}}</option>
                      </select>
                    </div>
                  </div> -->
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!saccodeEnt.valid && saccodeEnt.touched)?'has-error':''">
                      <label for="saccode">SAC Code<span style="color:red">*</span></label>
                      <input [(ngModel)]="servicemastermodel.sacCode" class="form-control" placeholder="SAC Code"
                        [minlength]="6" id="saccode" name="saccode" ngControl="servicemastermodel.sacCode"
                        [readonly]="isEdit" matTooltip="Enter sac code" #saccodeEnt="ngModel" type="text" required>
                      <span class="help-block" *ngIf="!saccodeEnt.valid && saccodeEnt.touched">Minimum length
                        should be 6 characters/digits</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="serviceDescription">Service Description<span style="color:red">*</span></label>
                      <input [(ngModel)]="servicemastermodel.serviceDescription" class="form-control"
                        (input)="servicemastermodel.serviceDescription=$event.target.value.toUpperCase()"
                        id="serviceDescription" placeholder="Service Description" name="serviceDescription"
                        [disabled]="isEdit" ngControl="servicemastermodel.serviceDescription"
                        #serviceDescriptionEnt="ngModel" required>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="detailedDesc">Detailed Service Description<span style="color:red">*</span></label>
                      <input [(ngModel)]="servicemastermodel.detailedDesc" class="form-control" id="detailedDesc"
                        (input)="servicemastermodel.detailedDesc=$event.target.value.toUpperCase()"
                        placeholder="Detailed description" name="detailedDesc"
                        ngControl="servicemastermodel.detailedDesc" #detailedDescEnt="ngModel" [disabled]="isEdit"
                        required>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group"
                      [ngClass]="((servicemastermodel.purchaseGroup==null || servicemastermodel.purchaseGroup=='' || servicemastermodel.purchaseGroup==undefined)  && !notFirst)?'has-error':''">
                      <label for="purchaseGroup">
                        Purchase Group <span style="color:red">*</span>
                      </label><br>
                      <ng-select [items]="purchasegrouplist" (blur)="checkPurchaseGroup()"
                        bindLabel="purchaseGroupDesc" required name="purchaseGroup" bindValue="purchaseGroupId"
                        [multiple]="false" [virtualScroll]="true" placeholder="Select Purchase Group"
                        [(ngModel)]="servicemastermodel.purchaseGroup" [disabled]="isEdit">
                        <ng-option *ngFor="let mat of purchasegrouplist" value={{mat.purchaseGroupId}}>
                          {{mat.purchaseGroupId}}-{{mat.purchaseGroupDesc}}
                        </ng-option>
                      </ng-select>
                      <span class="help-block"
                        *ngIf="(servicemastermodel.purchaseGroup==null || servicemastermodel.purchaseGroup=='' || servicemastermodel.purchaseGroup==undefined) && !notFirst">Please
                        Select Purchase Group</span>
                    </div>
                  </div>
                  <!-- <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="purchaseGroup">Purchase Group<span style="color:red">*</span></label>
                      <select [(ngModel)]="servicemastermodel.purchaseGroup" class="form-control" id="purchaseGroup"
                        name="purchaseGroup" ngControl="servicemastermodel.purchaseGroup" #purchaseGroupEnt="ngModel"
                        [disabled]="isEdit" matTooltip="Select purchaseGroup" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of purchasegrouplist" value={{mat.purchaseGroupId}}>
                          {{mat.purchaseGroupId}}-{{mat.purchaseGroupDesc}}</option>
                      </select>
                    </div>
                  </div> -->
                  <div class="col-sm-3">
                    <div class="form-group"
                      [ngClass]="((servicemastermodel.uom==null || servicemastermodel.uom=='' || servicemastermodel.uom==undefined)  && !notFirst)?'has-error':''">
                      <label for="UOM">
                        UOM <span style="color:red">*</span>
                      </label><br>
                      <ng-select [items]="uomMasterList" (blur)="checkUom();" bindLabel="description" required
                        name="uom" bindValue="uom" [multiple]="false" [virtualScroll]="true"
                        placeholder="Select UOM" [(ngModel)]="servicemastermodel.uom" [disabled]="isEdit">
                        <ng-option *ngFor="let uom of uomMasterList" value={{uom.uom}}>{{uom.uom}}-{{uom.description}}
                        </ng-option>
                      </ng-select>
                      <span class="help-block"
                        *ngIf="(servicemastermodel.uom==null || servicemastermodel.uom=='' || servicemastermodel.uom==undefined) && !notFirst">Please
                        Select UOM</span>
                    </div>
                  </div>
                  <!-- <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="UOM">UOM<span style="color:red">*</span></label>
                      <select [(ngModel)]="servicemastermodel.uom" class="form-control" id="uom" name="uom"
                        ngControl="servicemastermodel.uom" #uomEnt="ngModel" [disabled]="isEdit"
                        matTooltip="Select UOM" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let uom of uomMasterList" value={{uom.uom}}>{{uom.uom}}-{{uom.description}}</option>
                      </select>
                    </div>
                  </div> -->
                  <div class="col-sm-3">
                    <div class="form-group"
                      [ngClass]="((servicemastermodel.serviceCatagory==null || servicemastermodel.serviceCatagory=='' || servicemastermodel.serviceCatagory==undefined)  && !notFirst)?'has-error':''">
                      <label for="serviceCatagory">
                        Service Catagory <span style="color:red">*</span>
                      </label><br>
                      <ng-select [items]="serviceCategorylist" (blur)="checkServiceCategory();" bindLabel="serCatDesc"
                        required name="serviceCatagory" bindValue="serCatCode" [multiple]="false" [virtualScroll]="true"
                        placeholder="Select Service Category" [(ngModel)]="servicemastermodel.serviceCatagory" [disabled]="isEdit">
                        <ng-option *ngFor="let mat of serviceCategorylist" value={{mat.serCatCode}}>
                          {{mat.serCatCode}}-{{mat.serCatDesc}}
                        </ng-option>
                      </ng-select>
                      <span class="help-block"
                        *ngIf="(servicemastermodel.serviceCatagory==null || servicemastermodel.serviceCatagory=='' || servicemastermodel.serviceCatagory==undefined) && !notFirst">Please
                        Select Serive Category</span>
                    </div>
                  </div>
                  <!-- <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="serviceCatagory">Service Category<span style="color:red">*</span></label>
                      <select [(ngModel)]="servicemastermodel.serviceCatagory" class="form-control" id="serviceCatagory"
                        name="serviceCatagory" ngControl="servicemastermodel.serviceCatagory" #serviceCatagoryEnt="ngModel"
                        [disabled]="isEdit" matTooltip="Select serviceCatagory" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of serviceCategorylist" value={{mat.serCatCode}}>
                          {{mat.serCatCode}}-{{mat.serCatDesc}}</option>
                      </select>
                    </div>
                  </div> -->
                  <div class="col-sm-3">
                    <div class="form-group"
                      [ngClass]="((servicemastermodel.serviceGroup==null || servicemastermodel.serviceGroup=='' || servicemastermodel.serviceGroup==undefined)  && !notFirst)?'has-error':''">
                      <label for="serviceGroup">
                        Service Group <span style="color:red">*</span>
                      </label><br>
                      <ng-select [items]="servicegrouplist" (blur)="checkServiceGroup();" bindLabel="stxt" required
                        name="serviceGroup" bindValue="groupId" [multiple]="false" [virtualScroll]="true"
                        placeholder="Select Service Group" [(ngModel)]="servicemastermodel.serviceGroup" [disabled]="isEdit">
                        <ng-option *ngFor="let item of servicegrouplist"
                          value={{item.groupId}}>{{item.groupId}}-{{item.stxt}}
                        </ng-option>
                      </ng-select>
                      <span class="help-block"
                        *ngIf="(servicemastermodel.serviceGroup==null || servicemastermodel.serviceGroup=='' || servicemastermodel.serviceGroup==undefined) && !notFirst">Please
                        Select Serive Group</span>
                    </div>
                  </div>
                  <!-- <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="serviceGroup">Service Group<span style="color:red">*</span></label>
                      <select [(ngModel)]="servicemastermodel.serviceGroup" class="form-control" id="serviceGroup" name="serviceGroup"
                        ngControl="servicemastermodel.serviceGroup" #serviceGroupEnt="ngModel" [disabled]="isEdit"
                        matTooltip="Select serviceGroup" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let item of servicegrouplist" value={{item.groupId}}>{{item.groupId}}-{{item.stxt}}</option>
                      </select>
                    </div>
                  </div> -->
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="machineName">Equipment/machine Name</label>
                      <input [(ngModel)]="servicemastermodel.machineName" class="form-control" id="machineName"
                        placeholder="Equipment/machine Name" name="machineName" [disabled]="isEdit"
                        ngControl="servicemastermodel.machineName" #machineNameEnt="ngModel">
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="appValue">Approximate Value</label>
                      <input [(ngModel)]="servicemastermodel.appValue" class="form-control" id="appValue"
                        placeholder="Approximate Value" name="appValue" ngControl="servicemastermodel.appValue"
                        #appValueEnt="ngModel" [disabled]="isEdit">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group"
                      [ngClass]="((servicemastermodel.valuationClass==null || servicemastermodel.valuationClass=='' || servicemastermodel.valuationClass==undefined)  && !notFirst)?'has-error':''">
                      <label for="valuationClass">
                        Valuation Class <span style="color:red">*</span>
                      </label><br>
                      <ng-select [items]="ValuationClasslist" (blur)="checkValuationClass();" bindLabel="valuationDesc"
                        required name="valuationClass" bindValue="valuationId" [multiple]="false" [virtualScroll]="true"
                        placeholder="Select Valuation Class" [(ngModel)]="servicemastermodel.valuationClass" [disabled]="isEdit">
                        <ng-option *ngFor="let mat of ValuationClasslist"
                          value={{mat.valuationId}}>{{mat.valuationId}}-{{mat.valuationDesc}}
                        </ng-option>
                      </ng-select>
                      <span class="help-block"
                        *ngIf="(servicemastermodel.valuationClass==null || servicemastermodel.valuationClass=='' || servicemastermodel.valuationClass==undefined) && !notFirst">Please
                        Select Valuation Class</span>
                    </div>
                  </div>
                  <!-- <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="valuationClass">Valuation Class<span style="color:red">*</span></label>
                      <select [(ngModel)]="servicemastermodel.valuationClass" class="form-control" id="valuationClass"
                        name="valuationClass" ngControl="servicemastermodel.valuationClass"
                        #valuationClassEnt="ngModel" [disabled]="isEdit" matTooltip="Select valuationClass" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of ValuationClasslist" value={{mat.valuationId}}>{{mat.valuationId}}-{{mat.valuationDesc}}
                        </option>
                      </select>
                    </div>
                  </div> -->
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-12">
                    <div class="form-group form-group-sm">
                      <label for="justification">Justification<span style="color:red">*</span></label>
                      <textarea [(ngModel)]="servicemastermodel.justification" class="form-control"
                        placeholder="justification" id="justification" name="justification"
                        ngControl="servicemastermodel.justification" [disabled]="isEdit"
                        matTooltip="Enter justification" #justificationEnt="ngModel" type="text" required></textarea>

                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf=" isEdit && !view ">
                  <div class="col-sm-12">
                    <div class="form-group form-group-sm">
                      <label for="Customer">Comments<span style="color:red">*</span></label>
                      <textarea [(ngModel)]="comments" class="form-control" placeholder="comments" id="comments"
                        name="comments" ngControl="comments" [disabled]=view matTooltip="Enter Comments"
                        #commentsEnt="ngModel" type="text" required></textarea>
                    </div>
                  </div>
                </div>
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Attachments</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf="!isEdit">
                  <div class="col-sm-4">
                    <input #myInput type="file" accept=".doc,.pdf" id="file"
                      (change)="handleFileInput($event.target.files)" multiple>
                  </div>
                  <div class="col-sm-3">
                    <span class="text-red pull-left" *ngIf="errMsg1.length>0"><i
                        class="fa fa-warning"></i>{{errMsg1}}</span>
                  </div>
                  <div class="col-sm-4">
                    <span class="text-red pull-left"><i class="fa fa-warning"></i>
                      NOTE:Maximum Upto 2Mb Can Be Uploaded</span>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngFor="let attach of fileslist">
                  <div class="col-sm-4">
                    <label for="attachments">{{attach}}</label>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit && attach!= null">
                    <button title="Remove Files" (click)="removefile(attach);" matTooltip="Click to delete"
                      class="btn btn-secondary btn-sm">
                      <i class="fa fa-trash"></i></button>
                  </div>

                </div>
                <div class="row" *ngFor="let attach of attachments">
                  <div class="col-sm-4">
                    <label for="attachments"></label><a (click)="downloadFile(servicemastermodel.requestNo,attach);"
                      style="cursor: pointer;text-decoration: underline; color: #68a7d2;" [matTooltipPosition]="'below'"
                      matTooltip="Click to download the file">{{attach}}</a>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit && attach!= null">
                    <button title="Remove Files" (click)="deletefile(servicemastermodel,attach);"
                      matTooltip="Click to delete" class="btn btn-secondary btn-sm">
                      <i class="fa fa-trash"></i></button>
                  </div>

                </div>

              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <!-- <div class="box" *ngIf="isEdit">
                  <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                    <div class="col-xs-6">
                    <h3 class="box-title">Attachments</h3>
                    </div>
                  </div>
                
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp; -->

              <div class="box" *ngIf="Creator && isEdit">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material Code Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeExists">SAP Code Exists<span style="color:red">*</span></label>
                      <div class="row">
                        <mat-radio-group aria-label="Select option?" id="sapCodeExists" name="sapCodeExists"
                          [(ngModel)]="servicemastermodel.sapCodeExists"
                          [disabled]="servicemastermodel.createdBy==this.currentUser.employeeId || view"
                          ngControl="servicemastermodel.sapCodeExists" #sapCodeExistsEnt="ngModel" required>
                          <mat-radio-button value='Y'>Yes</mat-radio-button>
                          &nbsp;&nbsp;&nbsp;
                          <mat-radio-button value='N'>No</mat-radio-button>
                        </mat-radio-group>
                      </div>

                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeNo">SAP Code No<span style="color:red"
                          *ngIf="servicemastermodel.sapCodeExists!=1">*</span></label>
                      <input [(ngModel)]="servicemastermodel.sapCodeNo" class="form-control" placeholder="sapCodeNo"
                        id="sapCodeNo" name="sapCodeNo" ngControl="servicemastermodel.sapCodeNo"
                        (input)="servicemastermodel.sapCodeNo=$event.target.value.toUpperCase()" #sapCodeNoEnt="ngModel"
                        required [readonly]="servicemastermodel.createdBy==this.currentUser.employeeId || view"
                        matTooltip="Enter SAP Code No" type="text">
                      <span class="help-block" *ngIf="!sapCodeNoEnt.valid && sapCodeNoEnt.touched">Please Enter
                        sap Code</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreationDate">Code Creation Date</label>
                      <input name="sapCreationDate" id="sapCreationDate" placeholder="sapCreationDate Date"
                        class="form-control" value="{{servicemastermodel.sapCreationDate | date:'dd/MM/yyyy  HH:mm'}}"
                        disabled>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreatedBy">Code Created By</label>
                      <input [(ngModel)]="servicemastermodel.sapCreatedBy" class="form-control"
                        placeholder="sapCreatedBy" id="sapCreatedBy" name="sapCreatedBy"
                        ngControl="servicemastermodel.sapCreatedBy" matTooltip="Enter sapCreatedBy"
                        #sapCreatedByEnt="ngModel" type="text" disabled>
                    </div>
                  </div>
                </div>
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Approvers List</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf='!isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th>Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of Approverslist; let i = index">
                            <td>{{user.priority}}</td>
                            <td>{{getloc(user)}}</td>
                            <td>{{user.approverId}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row" *ngIf='isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th *ngIf="!isEdit">Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                            <th *ngIf="isEdit">Status</th>
                            <th *ngIf="isEdit">Date</th>
                            <th *ngIf="isEdit">Comments</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of transactionsHistory; let i = index">
                            <td>{{user.approvalPriority}}</td>
                            <td>{{user.doneBy}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                            <td>{{user.status}}</td>
                            <td>{{user.doneOn |date:'dd/MM/yyyy HH:mm'}}</td>
                            <td>{{user.comments}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>



            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <div *ngIf="!view" class="row pull-right">
          <div class="dropdown ">
            <button type="button" class="btn btn-primary" (click)="oncloserequest('close')"
              matTooltip="Click to Close the Request" *ngIf="isEdit && Closure"
              [disabled]="comments==''">Closure</button>
            <button type="button" class="btn btn-primary" (click)="onCreate()" matTooltip="Click to Create"
              [disabled]="!dataForm.valid"
              *ngIf="isEdit && Creator && !Closure && servicemastermodel.createdBy!=this.currentUser.employeeId">Create</button>
            <button type="button" class="btn btn-primary" (click)="onreview('InProcess')" matTooltip="Click to Submit"
              [disabled]="!dataForm.valid" *ngIf="isEdit && Review && !Closure && !Creator">Submit</button>
            <button type="button" class="btn btn-primary" (click)="onreview('Rejected')" matTooltip="Click to Reject"
              *ngIf="isEdit && Review && !Closure" [disabled]="comments==''">Reject</button>
            &nbsp;

            <a *ngIf="isEdit && Review" data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
                <button [disabled]="comments==''" type="button" class="btn btn-primary"
                  matTooltip="Click to Revert">Revert</button>
              </span>
            </a>
            <ul *ngIf="isEdit && Review" class="dropdown-menu">
              <li><a *ngIf="Aprlpriority >1" (click)="onRevertRequest('ReverttoLastApprover')">Previous Approver</a>
              </li>
              <li><a (click)="onRevertRequest('ReverttoInitiator')">Initiator</a></li>
            </ul>
          </div>
          &nbsp;
          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Save')" matTooltip="Click to Save"
            [disabled]="!dataForm.valid" *ngIf="!isEdit && servicemastermodel.appSatus==null">Save</button>
          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Submit')"
            matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid"
            *ngIf="!isEdit && servicemastermodel.appSatus==null">Save & Submit</button>
          <button type="button" class="btn btn-primary" (click)="onSubmitEntry(servicemastermodel)"
            matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid" *ngIf="!isEdit && servicemastermodel.appSatus=='Created' || servicemastermodel.appSatus =='Reverted to initiator'
       ">Save & Submit</button>
          <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button>
          <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
            matTooltip="Click to Clear">Clear</button>
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
        <div *ngIf="view" class="row pull-right">
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>

<div class="modal fade" id="printModal" role="dialog" aria-labelledby="printModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Service Master Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="container">
          <div class="row">
            <table class="table table-bordered table-striped" style="align-self: auto;; ">
              <tr>
                <td>
                  <div><img src="../../assets/dist/img/micrologo.png"></div>
                </td>
                <td colspan="2" style="align-items: center;">
                  <h3 class="pull-center">Service Master Request Form</h3>
                  <h3 class="pull-center">{{locationName}}</h3>
                </td>
              </tr>
            </table>
            <!-- <div class="col-sm-12">
              <div class="pull-left"><img src="../../assets/dist/img/micrologo.png"></div>
              <div class="col-sm-2">
                <label >&nbsp;</label><br>
                <label >&nbsp;</label><br>                
              </div> 
              <div class="col-sm-6">
                <label >&nbsp;</label><br>              \
                <h3 >Service Master Request Form</h3>
                <h3>{{locationName}}</h3>
              </div>         
            </div> -->
          </div>
          <hr>
          <div class="row" id="print-section">
            <div class="col-sm-12">
              <form #dataForm1="ngForm" (keydown.enter)="$event.preventDefault()">
                <table class="table table-bordered table-striped" style="align-self: auto;; ">
                  <tr>
                    <td style="width: 35%;">
                      <label><strong>Request Date:</strong></label>{{servicemastermodel.requestDate |
                      date:'dd/MM/yyyy'}}
                    </td>
                    <td style="width: 30%;">
                      <label><strong>Location</strong>:</label> {{servicemastermodel.plantCode}}
                    </td>
                    <td style="width: 35%;">
                      <label><strong>SAC Code</strong>: </label>{{servicemastermodel.sacCode}}
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label><strong>Request No</strong>:</label>{{servicemastermodel.requestNo}}
                    </td>
                    <td colspan="2">
                      <label><strong>Service Description</strong>:</label>{{servicemastermodel.serviceDescription}}
                    </td>
                  </tr>
                  <tr>
                    <td colspan="3">
                      <label><strong>Detailed Service Description</strong>:</label>{{servicemastermodel.detailedDesc}}
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label><strong>Purchase Group</strong>:</label>{{purchaseGroup}}
                    </td>
                    <td>
                      <label><strong>UOM</strong>: </label>{{Uom}}
                    </td>
                    <td>
                      <label><strong>Service Category</strong>:</label> {{servicemastermodel.serviceCatagory}}
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label><strong>Service Group</strong>:</label> {{servicemastermodel.serviceGroup}}
                    </td>
                    <td>
                      <label><strong>Equipment/machine Name</strong>:</label>{{servicemastermodel.machineName}}
                    </td>
                    <td>
                      <label><strong>Approximate Value</strong>:</label> {{servicemastermodel.appValue}}
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label><strong>Valuation Class</strong>: </label>{{valuationClass}}
                    </td>
                    <td colspan="2">
                      <label><strong>Justification</strong>:</label>{{servicemastermodel.justification}}
                    </td>
                  </tr>
                </table>
                <table class="table table-bordered table-striped" style="align-self: auto;; ">
                  <tr>
                    <td colspan="2">
                      <label style="align-items: center;text-align: center;"><strong>Material Code
                          Details</strong></label>
                    </td>
                  </tr>
                  <tr>
                    <td style="width: 50%;">
                      <label><strong>SAP Code Exists</strong>:</label>{{servicemastermodel.sapCodeExists==true
                      ?'Yes':'No'}}
                    </td>
                    <td style="width: 50%;">
                      <label><strong>SAP Code No</strong>:</label>{{servicemastermodel.sapCodeNo}}
                    </td>
                  </tr>
                  <tr>
                    <td style="width: 50%;">
                      <label><strong>CodeCreation Date</strong> :</label>{{servicemastermodel.sapCreationDate |
                      date:'dd/MM/yyyy HH:mm'}}
                    </td>
                    <td style="width: 50%;">
                      <label><strong>Code Created By</strong> :</label>{{servicemastermodel.sapCreatedBy}}
                    </td>
                  </tr>
                </table>
                <table class="table table-bordered table-striped" style="align-self: auto;; ">
                  <tr style="align-items: center;">
                    <td style="align-items: center;">
                      <label style="align-items: center;"><strong>Attachments</strong></label>
                    </td>
                  </tr>
                  <tr>
                    <td style="width: 100%;">
                      <label>{{servicemastermodel.attachment}}</label>
                    </td>
                  </tr>
                </table>
                <table class="table table-bordered table-striped" style="align-self: auto;; ">
                  <tr style="align-items: center;">
                    <td colspan="3" style="align-items: center;">
                      <label style="align-items: center;"><strong>Approvers List</strong></label>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="3">
                      <div class="table">
                        <table id="approversTable" class="table table-striped">
                          <thead>
                            <tr>
                              <th>Priority</th>
                              <th>Employee ID</th>
                              <th>ApproverName</th>
                              <th>Role</th>
                              <th>Department</th>
                              <th>Status</th>
                              <th>Date</th>
                              <th>Comments</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let user of transactionsHistory; let i = index">
                              <td>{{user.approvalPriority}}</td>
                              <td>{{user.doneBy}}</td>
                              <td>{{user.approverName}}</td>
                              <td>{{user.role}}</td>
                              <td>{{user.department}}</td>
                              <td>{{user.status}}</td>
                              <td>{{user.doneOn |date:'dd/MM/yyyy HH:mm'}}</td>
                              <td>{{user.comments}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </td>
                  </tr>
                </table>
              </form>
            </div>
            <div class="overlay" *ngIf="isLoadingPop">
              <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">

        <button type="button" class="btn btn-primary" (click)="downloadPdf(servicemastermodel)"
          [disabled]="isLoadingPop" matTooltip="Click to Print">Print</button>
        <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
          data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>

      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>

<div class="modal fade" id="printReasonModal" role="dialog" aria-labelledby="printReasonModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Service Master Request Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #ReasonForm="ngForm" (keydown.enter)="$event.preventDefault()">
              <div class="row">

                <div class="col-sm-12">
                  <div class="form-group form-group-sm">
                    <label for="preason">Reason for printing <span style="color: red;">*</span> </label>
                    <input [(ngModel)]="printReason" class="form-control" id="preason" placeholder="Reason for printing"
                      required name="preason" ngControl="printReason" #preasonEnt="ngModel">
                  </div>
                </div>


              </div>

            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <button class="btn btn-primary btn-sm" (click)="onUserActions(true,printModel,true,'View')"
          matTooltip="Click to Continue" [disabled]="!ReasonForm.valid" data-dismiss="modal">
          Print</button>
        <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
          data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>