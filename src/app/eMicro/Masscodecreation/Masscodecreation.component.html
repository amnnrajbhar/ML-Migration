<section class="content-header">
  <h1 class="display-1">
    Mass Code Creation
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
    <li class="active">Mass Code Creation</li>
  </ol>
</section>
<!-- Main content -->
<section class="content">
  <div class="box">
    <div class="box-header">
      <div class="col-xs-6">
        <h3 class="box-title">Mass Code Creation</h3>
        <span class="label label-danger" *ngIf="errMsg.length>0">{{errMsg}}</span>
      </div>
      <!-- <div class="col-xs-6">
        <button type="button" class="btn btn-primary pull-right" (click)="onClickNewRequest()"><i class="fa fa-plus"
            aria-hidden="true"></i> New Request</button>
      </div> -->
    </div>
    <div id="dateFilterPanel">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="fltrmat_type">Material Type</label>
              <select [(ngModel)]="filtermaterialtype" class="form-control" id="fltrmat_type" name="fltrmat_type"
                ngControl="filtermaterialtype" #fltrmat_typeEnt="ngModel" matTooltip="select Material Type">
                <option [ngValue]="null" disabled [selected]="true">--Select an Option--</option>
                <option *ngFor="let mat_type of materialList" [ngValue]="mat_type.id">
                  {{mat_type.type}}-{{mat_type.description}}
                </option>
              </select>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="fltrby">Filter By</label>
              <select [(ngModel)]="filterBy" class="form-control" id="fltrby" name="fltrby" ngControl="filterBy"
                #fltrbyEnt="ngModel" matTooltip="Select Location">
                <option [ngValue]="null" disabled>--Select an Option--</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="40">40</option>
                <option value="50">50</option>
                <option value="60">60</option>
              </select>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="fltrlocation">Location</label>
              <select [(ngModel)]="filterlocation" class="form-control" id="fltrlocation" name="fltrlocation"
                ngControl="filterlocation" #fltrlocationEnt="ngModel" matTooltip="Select Location">
                <option [ngValue]="null" disabled>--Select an Option--</option>
                <option *ngFor="let loc of locationList" value={{loc.code}}>{{loc.code}}-{{loc.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group form-group-sm">
              <label for="fltrMtrlGrp">Material Group</label>
              <select [(ngModel)]="filtermaterialgroup" class="form-control" id="fltrMtrlGrp" name="fltrMtrlGrp"
                ngControl="filtermaterialgroup" #fltrMtrlGrpEnt="ngModel" matTooltip="Select Status">
                <option [ngValue]="null" disabled>--Select an Option--</option>
                <option *ngFor="let mat of materialgroupList" value={{mat.materialGroupId}}>
                  {{mat.materialGroupId}}-{{mat.ltxt}}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div class="row ml-3">
          <div class="col-sm-4">
            <label>From Date</label>
            <!-- <input type="date" class="form-control" placeholder="From Date"  [(ngModel)]="ItemCodeRequestModel.from_date"/> -->
            <div class="form-group form-group-sm" [ngClass]="(fromDate.touched && !fromDate.valid)?'has-error':''">
              <input [matTooltipPosition]="'below'" matTooltip="Click to change from date" [owlDateTime]="dt11"
                [owlDateTimeTrigger]="dt11" name="fromDate" class="form-control" [(ngModel)]="from_date"
                #fromDate="ngModel">
              <owl-date-time [pickerType]="'calendar'" #dt11 style="width: 250px;"></owl-date-time>
              <span class="help-block" *ngIf="!fromDate.valid && fromDate.touched">Please enter valid From
                Date.</span>
            </div>
          </div>
          <div class="col-sm-4">
            <label>To Date</label>
            <div class="form-group form-group-sm" [ngClass]="(toDate.touched && !toDate.valid)?'has-error':''">
              <!-- <input type="date" [disabled]="from_date==null||from_date==''" class="form-control" placeholder="To Date"  [(ngModel)]="ItemCodeRequestModel.to_date"> -->
              <input [min]="from_date" [max]="today" [matTooltipPosition]="'below'" matTooltip="Click to change to date"
                [owlDateTime]="dt12" [owlDateTimeTrigger]="dt12" name="endDate" class="form-control"
                [(ngModel)]="to_date" #toDate="ngModel">
              <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;"></owl-date-time>
              <span class="help-block" *ngIf="!toDate.valid && toDate.touched">Please enter valid To
                Date.</span>
            </div>
          </div>
          <div class="col-sm-2">
            <label>&nbsp;</label>
            <div class="form-group form-group-sm">
              <button class="btn btn-primary btn-sm" (click)="getAllEntries();"
                [disabled]="(!toDate.valid && toDate.touched) || (!fromDate.valid && fromDate.touched)"
                matTooltip="click to go">Go</button>
              &nbsp;&nbsp;
              <button class="btn btn-primary btn-sm" (click)="clearFilter();" matTooltip="click to reset">Clear</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    &nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;

    <div class="col-sm-12">
      <div class="col-sm-9">
        &nbsp;&nbsp;&nbsp;
      </div>
      <div class="col-sm-3">
        <button class="btn btn-primary pull-right" (click)="CraeteInSAP()" matTooltip="click to export to Excel"
          [disabled]="ItemCodeRequestFilter.length==0 && output==false"> Create In SAP</button>
        &nbsp;
      </div>
    </div>
    <!-- /.box-header -->
    <div class="box-body table-responsive" *ngIf="output==false">
      <table id="userTable" class="table table-bordered table-striped">
        <thead style="background-color: #68a7d2;color:white;">
          <tr>
            <th>Request No</th>
            <th>Request Date</th>
            <th>Material Type</th>
            <th>Material Name</th>
            <th>Plant</th>
            <th>Status</th>
            <th>Last Approver</th>
            <th>Pending Approver</th>
            <th>
              <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name" (change)="checkUncheckAll()">
              &nbsp;&nbsp;&nbsp;
              <label for="selectall">Select All</label>
            </th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of ItemCodeRequestFilter; let i = index">
            <td>{{item.requestNo}}</td>
            <td>{{item.requestDate | date:'dd/MM/yyyy h:mm a'}}</td>
            <td>{{materialtype(item.materialTypeId)}}</td>
            <td>{{item.materialShortName}}</td>
            <td>{{location(item.locationId)}}</td>
            <td>{{item.approveType}} </td>
            <td>{{item.lastApprover}}</td>
            <td>{{item.pendingApprover}}</td>
            <td>
              <input type="checkbox" [id]="'chkusage'+item.id" [name]="'send'+item.id" [(ngModel)]="item.isSelected"
                (change)="isAllSelected()" #usageEnt="ngModel">
            </td>
            <td>
              <table>
                <tr>
                  <td>
                    <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to Edit details"
                      class="btn btn-primary btn-xs" (click)="onUserActions(true,item,'')">
                      <i class="fas fa-edit"></i>
                    </button>
                  </td>
                  &nbsp;
                  <td>
                    <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to View details"
                      class="btn btn-primary btn-xs" (click)="onUserActions(true,item,'View')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </td>

                </tr>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="box-body table-responsive" *ngIf="output==true">
      <table id="userTable" class="table table-bordered table-striped">
        <thead style="background-color: #68a7d2;color:white;">
          <tr>
            <th>Request No</th>
            <th>SAP Code</th>
            <th>Date</th>
            <th>Type</th>
            <th class="col-sm-4">Message</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of ReqOutput; let i = index">
            <td>{{item.reqno}}</td>
            <td>{{item.matnr}}</td>
            <td>{{item.erdat  | date:'dd/MM/yyyy'}}</td>
            <td>{{item.type}}</td>
            <td>{{item.message}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- /.box-body -->
    <div class="overlay" *ngIf="isLoading">
      <i class="fa fa-spinner fa-pulse"></i>
    </div>
  </div>
</section>


<div class="modal fade" id="LCNGXPModal" role="dialog" aria-labelledby="LCNGXPModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl ">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Material Code Request Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #LCNGXPForm="ngForm">
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group form-group-sm"
                    [ngClass]="(!mat_typeEnt.valid && mat_typeEnt.touched)?'has-error':''">
                    <label for="mat_type">Material Type<span style="color:red">*</span></label>
                    <select [(ngModel)]="ItemCodeRequestModel.materialTypeId" class="form-control" id="mat_type"
                      name="mat_type" ngControl="ItemCodeRequestModel.materialTypeId" #mat_typeEnt="ngModel"
                      matTooltip="select Material Type" disabled required>
                      <option [ngValue]="undefined" disabled [selected]="true">--Select an Option--</option>
                      <option *ngFor="let mat_type of materialList" value={{mat_type.id}}>
                        {{mat_type.type}}-{{mat_type.description}}
                      </option>
                    </select>
                    <span class="help-block" *ngIf="!mat_typeEnt.valid && mat_typeEnt.touched">Please select Material
                      Type.</span>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="emailid">EmailId(For which the Confirmation will be sent)</label>
                    <input name="emailid" type="text" class="form-control" [(ngModel)]="emailid" disabled>
                  </div>
                </div>

              </div>
              <hr class="m-3">
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf;height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">

                  <div class="col-sm-4" *ngIf="isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{ItemCodeRequestModel.requestDate |date:'dd/MM/yyyy h:mm a'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{requestdate |date:'dd/MM/yyyy h:mm a'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!locationEnt.valid && locationEnt.touched)?'has-error':''">
                      <label for="location">Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.locationId" class="form-control" id="location"
                        name="location" ngControl="ItemCodeRequestModel.locationId" #locationEnt="ngModel"
                         matTooltip="Select Location"
                        (change)="getApproversList(ItemCodeRequestModel)" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of locationList" value={{loc.id}}>{{loc.code}}-{{loc.name}}</option>
                      </select>
                      <span class="help-block" *ngIf="!locationEnt.valid && locationEnt.touched">Please select
                        location</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!storagelocationEnt.valid && storagelocationEnt.touched)?'has-error':''">
                      <label for="storagelocation">Storage Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.storageLocationId" class="form-control"
                        id="storagelocation" name="storagelocation" ngControl="ItemCodeRequestModel.storageLocationId"
                        #storagelocationEnt="ngModel"  matTooltip="Select Storage Location"
                        (change)="getApproversList(ItemCodeRequestModel)" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of storagelocationlist1" value={{loc.storageLocationId}}>
                          {{loc.storageLocationId}}-{{loc.storageLocationName}}</option>
                      </select>
                      <span class="help-block" *ngIf="!storagelocationEnt.valid && storagelocationEnt.touched">Please
                        select storagelocation</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="shortnaame">Short Name<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.materialShortName" class="form-control" id="shortnaame"
                        (input)="ItemCodeRequestModel.materialShortName=$event.target.value.toUpperCase()"
                        placeholder="Material Name" name="shortnaame" ngControl="ItemCodeRequestModel.materialShortName"
                        #shortnaameEnt="ngModel"  required>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="longname">Long Name<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.materialLongName" class="form-control" id="longname"
                        placeholder="Material Name" name="longname" ngControl="ItemCodeRequestModel.materialLongName"
                        (input)="ItemCodeRequestModel.materialLongName=$event.target.value.toUpperCase()"
                        #longnameEnt="ngModel"  required>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!mtrlgrpEnt.valid && mtrlgrpEnt.touched)?'has-error':''">
                      <label for="MaterialGroup">Material Group<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.materialGroupId" class="form-control" id="mtrlgrp"
                        name="mtrlgrp" ngControl="ItemCodeRequestModel.materialGroupId" #mtrlgrpEnt="ngModel"
                         matTooltip="Select MaterialGroup" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of materialgroupList" value={{mat.materialGroupId}}>
                          {{mat.materialGroupId}}-{{mat.ltxt}}
                        </option>
                      </select>
                      <span class="help-block" *ngIf="!mtrlgrpEnt.valid && mtrlgrpEnt.touched">Please select Material
                        Group</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm" [ngClass]="(!uomEnt.valid && uomEnt.touched)?'has-error':''">
                      <label for="UOM">UOM<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.unitOfMeasId" class="form-control" id="uom" name="uom"
                        ngControl="ItemCodeRequestModel.unitOfMeasId" #uomEnt="ngModel" 
                        matTooltip="Select UOM" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let uom of uomMasterList" value={{uom.uom}}>{{uom.uom}}-{{uom.description}}
                      </select>
                      <span class="help-block" *ngIf="!uomEnt.valid && uomEnt.touched">Please select UOM</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="purchaseGroupId">Purchase Group Id<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.purchaseGroupId" class="form-control"
                        id="purchaseGroupId" name="purchaseGroupId" ngControl="ItemCodeRequestModel.purchaseGroupId"
                        #purchaseGroupIdEnt="ngModel" matTooltip="Select purchaseGroupId"  required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of purchasegrouplist" value={{mat.purchaseGroupId}}>
                          {{mat.purchaseGroupId}}-{{mat.purchaseGroupDesc}}</option>
                      </select>
                    </div>
                  </div>

                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!hsncodeEnt6.valid && hsncodeEnt6.touched)?'has-error':''">
                      <label for="saccode">HSN Code<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.hsnCode" class="form-control" placeholder="HSN Code"
                        [minlength]="6" id="hsncode" name="hsncode" ngControl="ItemCodeRequestModel.hsnCode"
                         matTooltip="Enter HSN code" #hsncodeEnt6="ngModel" type="text" required>
                      <span class="help-block" *ngIf="!hsncodeEnt6.valid && hsncodeEnt6.touched">Minimum length
                        Should be 6 characters/Digits</span>
                    </div>
                  </div>


                  <!-- <div class="col-sm-3">
                    <div class="form-group form-group-sm" 
                    [ngClass]="(!hsnCodeEnt.valid && hsnCodeEnt.touched)?'has-error':''">
                      <label for="hsnCode">HSN Code<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.hsnCode" class="form-control" placeholder="HSN Code"
                       [minlength]="6" id="hsnCode" name="hsnCode" ngControl="ItemCodeRequestModel.hsnCode" matTooltip="Enter hsnCode"
                        #hsnCodeEnt="ngModel" type="text"  required >
                        <span class="help-block" *ngIf="!hsnCodeEnt.valid && hsnCodeEnt.touched">Minimum Length of 
                          HSN Code Should be 6.</span>

                    </div>
                  </div> -->
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;


              </div>

              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Other Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!isAssetEnt.valid && isAssetEnt.touched)?'has-error':''">
                      <label for="isAsset">Is Asset<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.isAsset" class="form-control" id="isAsset"
                        name="isAsset" ngControl="ItemCodeRequestModel.isAsset" #isAssetEnt="ngModel"
                         matTooltip="Select isAsset" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option [ngValue]="'1'">Yes</option>
                        <option [ngValue]="'0'"> No</option>
                      </select>
                      <span class="help-block" *ngIf="!isAssetEnt.valid && isAssetEnt.touched">Please select
                        isAsset</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!utilizingDeptEnt.valid && utilizingDeptEnt.touched)?'has-error':''">
                      <label for="utilizingDept">Utilizing Dept.<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.utilizingDept" class="form-control" id="utilizingDept"
                        name="utilizingDept" ngControl="ItemCodeRequestModel.utilizingDept" #utilizingDeptEnt="ngModel"
                         matTooltip="Select utilizingDept" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of departmentList" value={{mat.id}}>{{mat.name}}</option>
                      </select>
                      <span class="help-block" *ngIf="!utilizingDeptEnt.valid && utilizingDeptEnt.touched">Please
                        select utilizingDept</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!valuationClassEnt.valid && valuationClassEnt.touched)?'has-error':''">
                      <label for="valuationClass">Valuation Class<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.valuationClass" class="form-control" id="valuationClass"
                        name="valuationClass" ngControl="ItemCodeRequestModel.valuationClass"
                        #valuationClassEnt="ngModel"  matTooltip="Select valuationClass" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of ValuationClasslist1" value="{{mat.valuationId}}">
                          {{mat.valuationId}}-{{mat.valuationDesc}}
                        </option>
                      </select>
                      <span class="help-block" *ngIf="!valuationClassEnt.valid && valuationClassEnt.touched">Please
                        select
                        valuationClass</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(approximateValueEnt.touched && !approximateValueEnt.valid)?'has-error':''">
                      <label for="approximateValue">Approximate Value<span style="color:red">*</span>
                      </label>
                      <input [(ngModel)]="ItemCodeRequestModel.approximateValue" class="form-control"
                        placeholder="approximateValue" id="approximateValue" matTooltip="Enter approximateValue"
                        name="approximateValue"  ngControl="ItemCodeRequestModel.approximateValue"
                        #approximateValueEnt="ngModel" type="text" required>
                      <span class="help-block" *ngIf="!approximateValueEnt.valid && approximateValueEnt.touched">Please
                        Enter approximateValue</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm"
                      [ngClass]="(detailedJustificationEnt.touched && !detailedJustificationEnt.valid)?'has-error':''">
                      <label for="detailedJustification">Justification<span style="color:red">*</span>
                      </label>
                      <textarea [(ngModel)]="ItemCodeRequestModel.detailedJustification" class="form-control"
                        placeholder="detailedJustification" id="detailedJustification"
                        matTooltip="Enter detailedJustification" name="detailedJustification" 
                        ngControl="ItemCodeRequestModel.detailedJustification" #detailedJustificationEnt="ngModel"
                        type="text" required></textarea>
                      <span class="help-block"
                        *ngIf="!detailedJustificationEnt.valid && detailedJustificationEnt.touched">Please
                        Enter detailedJustification</span>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm"
                      [ngClass]="(detailedSpecificationEnt.touched && !detailedSpecificationEnt.valid)?'has-error':''">
                      <label for="detailedSpecification">Specification<span style="color:red">*</span>
                      </label>
                      <textarea [(ngModel)]="ItemCodeRequestModel.detailedSpecification" class="form-control"
                        placeholder="detailedSpecification" id="detailedSpecification" 
                        matTooltip="Enter detailedSpecification" name="detailedSpecification"
                        ngControl="ItemCodeRequestModel.detailedSpecification" #detailedSpecificationEnt="ngModel"
                        type="text" required></textarea>
                      <span class="help-block"
                        *ngIf="!detailedSpecificationEnt.valid && detailedSpecificationEnt.touched">Please
                        Enter detailedSpecification</span>
                    </div>
                  </div>

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
               

              </div>

              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box" *ngIf="Creator && isEdit">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material Code Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeExists">SAP Code Exists</label>
                      <div class="row">
                        <mat-radio-group aria-label="Select option?" id="sapCodeExists" name="sapCodeExists"
                          [(ngModel)]="ItemCodeRequestModel.sapCodeExists"
                          [disabled]="ItemCodeRequestModel.createdBy==this.currentUser.employeeId || view"
                          ngControl="ItemCodeRequestModel.sapCodeExists" #sapCodeExistsEnt="ngModel">
                          <mat-radio-button value='1'>Yes</mat-radio-button>
                          &nbsp;&nbsp;&nbsp;
                          <mat-radio-button value='0'>No</mat-radio-button>
                        </mat-radio-group>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeNo">SAP Code No<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCodeNo" class="form-control" placeholder="sapCodeNo"
                        id="sapCodeNo" name="sapCodeNo" ngControl="ItemCodeRequestModel.sapCodeNo"
                        #sapCodeNoEnt="ngModel" required [disabled]="view"
                        [readonly]="ItemCodeRequestModel.createdBy==this.currentUser.employeeId"
                        matTooltip="Enter SAP Code No" type="text">
                      <span class="help-block" *ngIf="!sapCodeNoEnt.valid && sapCodeNoEnt.touched">Please Enter
                        sap Code</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreationDate">Code Creation Date</label>
                      <input name="sapCreationDate" id="sapCreationDate" placeholder="sapCreationDate Date"
                        class="form-control" value="{{ItemCodeRequestModel.sapCreationDate |date:'dd/MM/yyyy h:mm a'}}"
                        disabled>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreatedBy">Code Created By</label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCreatedBy" class="form-control"
                        placeholder="sapCreatedBy" id="sapCreatedBy" name="sapCreatedBy"
                        ngControl="ItemCodeRequestModel.sapCreatedBy" matTooltip="Enter sapCreatedBy"
                        #sapCreatedByEnt="ngModel" type="text" disabled>
                    </div>
                  </div>
                </div>
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Approvers List</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf='!isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th>Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of Approverslist; let i = index">
                            <td>{{user.priority}}</td>
                            <td>{{getloc(user)}}</td>
                            <td>{{user.approverId}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row" *ngIf='isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th *ngIf="!isEdit">Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                            <th *ngIf="isEdit">Status</th>
                            <th *ngIf="isEdit">Date</th>
                            <th *ngIf="isEdit">Comments</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of transactionslist; let i = index">
                            <td>{{user.approvalPriority}}</td>
                            <td>{{user.doneBy}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                            <td>{{user.status}}</td>
                            <td>{{user.doneOn |date:'dd/MM/yyyy h:mm a'}}</td>
                            <td>{{user.comments}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>


            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <div *ngIf="!view" class="row pull-right">
          <!-- <button type="button" class="btn btn-primary" (click)="oncloserequest('complete')"
            matTooltip="Click to Complete the Request" *ngIf="Review && ItemCodeRequestModel.sapCodeExists=='1'"
            [disabled]="comments==null">Completed</button> -->
          <button type="button" class="btn btn-primary" (click)="oncloserequest('close')"
            matTooltip="Click to Close the Request" *ngIf="isEdit && Closure"
            [disabled]="comments==null">Closure</button>
          <button type="button" class="btn btn-primary" (click)="onCreate()" matTooltip="Click to Create"
            [disabled]="!LCNGXPForm.valid" *ngIf="Creator && !Closure">Create</button>
          <button type="button" class="btn btn-primary" (click)="onreview('InProcess')" matTooltip="Click to Submit"
            [disabled]="!LCNGXPForm.valid"
            *ngIf=" Review && ItemCodeRequestModel.sapCodeExists!='1' && !Closure && !Creator">Submit</button>
          <button type="button" class="btn btn-primary" (click)="onreview('Rejected')" matTooltip="Click to Reject"
            *ngIf="Review && !Closure" [disabled]="comments==null">Reject</button>
          &nbsp;
          <div *ngIf="Review" class="dropdown "> <a data-toggle="dropdown" class="dropdown-toggle"
              href="#"><span>
                <button [disabled]="comments==null" type="button" class="btn btn-primary"
                  matTooltip="Click to Revert">Revert</button>
              </span>
            </a>
            <ul class="dropdown-menu">
              <li><a *ngIf="Aprlpriority >1" (click)="onRevertRequest('ReverttoLastApprover')">Previous Approver</a>
              </li>
              <li><a (click)="onRevertRequest('ReverttoInitiator')">Initiator</a></li>
            </ul>
          </div>
          &nbsp;
          <!-- <div *ngIf="isEdit" class="dropdown profile-element"> <a data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
            <button type="button" class="btn btn-primary" matTooltip="Click to Submit">Save</button>
          </span>
          </a>
          <ul class="dropdown-menu animated fadeInRight m-t-xs">
            <li><a (click)="onRevertRequest(ReverttoLastApprover)">Previous Approver</a></li>
            <li><a (click)="onRevertRequest(ReverttoInitiator)">Initiator</a></li>          
          </ul>
        </div> -->


          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Save')" matTooltip="Click to Save"
            [disabled]="!LCNGXPForm.valid"
            *ngIf="!isEdit && ItemCodeRequestModel.modifiedBy==null && ItemCodeRequestModel.approveType==null ">Save</button>
          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Submit')"
            matTooltip="Click to Save & Submit" [disabled]="!LCNGXPForm.valid "
            *ngIf="!isEdit && ItemCodeRequestModel.modifiedBy==null && ItemCodeRequestModel.approveType==null ">Save &
            Submit</button>
          <button type="button" class="btn btn-primary" (click)="onSubmitEntry(ItemCodeRequestModel)"
            matTooltip="Click to Save & Submit" >Save & Submit</button>
          <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button>
          <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
            matTooltip="Click to Clear">Clear</button>
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
        <div *ngIf="view" class="row pull-right">
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>

<div class="modal fade" id="OSENGXPModal" role="dialog" aria-labelledby="OSENGXPModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl ">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Material Code Request Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #OSENGXPForm="ngForm">
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group form-group-sm"
                    [ngClass]="(!mat_typeEnt.valid && mat_typeEnt.touched)?'has-error':''">
                    <label for="mat_type">Material Type<span style="color:red">*</span></label>
                    <select [(ngModel)]="ItemCodeRequestModel.materialTypeId" class="form-control" id="mat_type"
                      name="mat_type" ngControl="ItemCodeRequestModel.materialTypeId" #mat_typeEnt="ngModel"
                      matTooltip="select Material Type" disabled required>
                      <option [ngValue]="undefined" disabled [selected]="true">--Select an Option--</option>
                      <option *ngFor="let mat_type of materialList" value={{mat_type.id}}>
                        {{mat_type.type}}-{{mat_type.description}}
                      </option>
                    </select>
                    <span class="help-block" *ngIf="!mat_typeEnt.valid && mat_typeEnt.touched">Please select Material
                      Type.</span>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="emailid">EmailId(For which the Confirmation will be sent)</label>
                    <input name="emailid" type="text" class="form-control" [(ngModel)]="emailid" disabled>
                  </div>
                </div>

              </div>
              <hr class="m-3">
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf;height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">

                  <div class="col-sm-4" *ngIf="isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{ItemCodeRequestModel.requestDate |date:'dd/MM/yyyy h:mm a'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{requestdate |date:'dd/MM/yyyy h:mm a'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!locationEnt.valid && locationEnt.touched)?'has-error':''">
                      <label for="location">Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.locationId" class="form-control" id="location"
                        name="location" ngControl="ItemCodeRequestModel.locationId" #locationEnt="ngModel"
                         matTooltip="Select Location"
                        (change)="getApproversList(ItemCodeRequestModel)" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of locationList" value={{loc.id}}>{{loc.code}}-{{loc.name}}</option>
                      </select>
                      <span class="help-block" *ngIf="!locationEnt.valid && locationEnt.touched">Please select
                        location</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!storagelocationEnt.valid && storagelocationEnt.touched)?'has-error':''">
                      <label for="storagelocation">Storage Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.storageLocationId" class="form-control"
                        id="storagelocation" name="storagelocation" ngControl="ItemCodeRequestModel.storageLocationId"
                        #storagelocationEnt="ngModel"  matTooltip="Select Storage Location"
                        (change)="getApproversList(ItemCodeRequestModel)" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of storagelocationlist1" value={{loc.storageLocationId}}>
                          {{loc.storageLocationId}}-{{loc.storageLocationName}}</option>
                      </select>
                      <span class="help-block" *ngIf="!storagelocationEnt.valid && storagelocationEnt.touched">Please
                        select storagelocation</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="shortnaame">Short Name<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.materialShortName" class="form-control" id="shortnaame"
                        placeholder="Material Name" name="shortnaame" ngControl="ItemCodeRequestModel.materialShortName"
                        (input)="ItemCodeRequestModel.materialShortName=$event.target.value.toUpperCase()"
                        #shortnaameEnt="ngModel"  required>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="longname">Long Name<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.materialLongName" class="form-control" id="longname"
                        placeholder="Material Name" name="longname" ngControl="ItemCodeRequestModel.materialLongName"
                        (input)="ItemCodeRequestModel.materialLongName=$event.target.value.toUpperCase()"
                        #longnameEnt="ngModel"  required>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!mtrlgrpEnt.valid && mtrlgrpEnt.touched)?'has-error':''">
                      <label for="MaterialGroup">Material Group<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.materialGroupId" class="form-control" id="mtrlgrp"
                        name="mtrlgrp" ngControl="ItemCodeRequestModel.materialGroupId" #mtrlgrpEnt="ngModel"
                         matTooltip="Select MaterialGroup" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of materialgroupList" value={{mat.materialGroupId}}>
                          {{mat.materialGroupId}}-{{mat.ltxt}}
                        </option>
                      </select>
                      <span class="help-block" *ngIf="!mtrlgrpEnt.valid && mtrlgrpEnt.touched">Please select Material
                        Group</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm" [ngClass]="(!uomEnt.valid && uomEnt.touched)?'has-error':''">
                      <label for="UOM">UOM<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.unitOfMeasId" class="form-control" id="uom" name="uom"
                        ngControl="ItemCodeRequestModel.unitOfMeasId" #uomEnt="ngModel" 
                        matTooltip="Select UOM" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let uom of uomMasterList" value={{uom.uom}}>{{uom.uom}}-{{uom.description}}
                      </select>
                      <span class="help-block" *ngIf="!uomEnt.valid && uomEnt.touched">Please select UOM</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="purchaseGroupId">Purchase Group Id<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.purchaseGroupId" class="form-control"
                        id="purchaseGroupId" name="purchaseGroupId" ngControl="ItemCodeRequestModel.purchaseGroupId"
                        #purchaseGroupIdEnt="ngModel" matTooltip="Select purchaseGroupId"  required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of purchasegrouplist" value={{mat.purchaseGroupId}}>
                          {{mat.purchaseGroupId}}-{{mat.purchaseGroupDesc}}</option>
                      </select>
                    </div>
                  </div>

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;


              </div>

              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Other Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="isNewEquipment">Is It a New Equipment/Machine</label>
                      <select [(ngModel)]="ItemCodeRequestModel.isNewEquipment" class="form-control" id="isNewEquipment"
                        name="isNewEquipment" ngControl="ItemCodeRequestModel.isNewEquipment"
                        #isNewEquipmentEnt="ngModel"  matTooltip="Select isNewEquipment">
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(equipIntendedEnt.touched && !equipIntendedEnt.valid)?'has-error':''">
                      <label for="equipIntended">Equip. intended for</label>
                      <input [(ngModel)]="ItemCodeRequestModel.equipIntended" class="form-control"
                        placeholder="equipIntended" id="equipIntended" matTooltip="Enter equipIntended"
                        name="equipIntended"  ngControl="ItemCodeRequestModel.equipIntended"
                        #equipIntendedEnt="ngModel" type="text">
                      <span class="help-block" *ngIf="!equipIntendedEnt.valid && equipIntendedEnt.touched">Please
                        Enter equipIntended</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(equipmentNameEnt.touched && !equipmentNameEnt.valid)?'has-error':''">
                      <label for="equipmentName">Equipment Name</label>
                      <input [(ngModel)]="ItemCodeRequestModel.equipmentName" class="form-control"
                        placeholder="equipmentName" id="equipmentName" 
                        matTooltip="Enter equipmentName" name="equipmentName"
                        ngControl="ItemCodeRequestModel.equipmentName" #equipmentNameEnt="ngModel" type="text">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(equipmentMakeEnt.touched && !equipmentMakeEnt.valid)?'has-error':''">
                      <label for="equipmentMake">Equipment Make</label>
                      <input [(ngModel)]="ItemCodeRequestModel.equipmentMake" class="form-control"
                        placeholder="equipmentMake" id="equipmentMake" 
                        matTooltip="Enter equipmentMake" name="equipmentMake"
                        ngControl="ItemCodeRequestModel.equipmentMake" #equipmentMakeEnt="ngModel" type="text">
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="isSpare">Is Spare</label>
                      <select [(ngModel)]="ItemCodeRequestModel.isSpare" class="form-control" id="isSpare"
                        name="isSpare" ngControl="ItemCodeRequestModel.isSpare" #isSpareEnt="ngModel"
                         matTooltip="Select isSpare">
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="componentMake">Component Make</label>
                      <input [(ngModel)]="ItemCodeRequestModel.componentMake" class="form-control"
                        placeholder="componentMake" id="componentMake" 
                        matTooltip="Enter componentMake" name="componentMake"
                        ngControl="ItemCodeRequestModel.componentMake" #componentMakeEnt="ngModel" type="text">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="oemPartNo">OEM Part No</label>
                      <input [(ngModel)]="ItemCodeRequestModel.oemPartNo" class="form-control" placeholder="oemPartNo"
                        id="oemPartNo" matTooltip="Enter oemPartNo" name="oemPartNo"
                        ngControl="ItemCodeRequestModel.oemPartNo" #oemPartNoEnt="ngModel" type="text"
                        >
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="dimension">Add Size/Dimensions</label>
                      <input [(ngModel)]="ItemCodeRequestModel.dimension" class="form-control" placeholder="dimension"
                        id="dimension" matTooltip="Enter dimension" name="dimension"
                        ngControl="ItemCodeRequestModel.dimension" #dimensionEnt="ngModel" type="text"
                        >
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="packSize">Pack Size</label>
                      <input [(ngModel)]="ItemCodeRequestModel.packSize" class="form-control" placeholder="packSize"
                        id="packSize" matTooltip="Enter packSize" name="packSize" 
                        ngControl="ItemCodeRequestModel.packSize" #packSizeEnt="ngModel" type="text">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="moc">MOC</label>
                      <input [(ngModel)]="ItemCodeRequestModel.moc" class="form-control" placeholder="moc" id="moc"
                        matTooltip="Enter moc" name="moc" ngControl="ItemCodeRequestModel.moc" #mocEnt="ngModel"
                        type="text" >
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="rating">Rating</label>
                      <input [(ngModel)]="ItemCodeRequestModel.rating" class="form-control" placeholder="rating"
                        id="rating" matTooltip="Enter rating" name="rating" ngControl="ItemCodeRequestModel.rating"
                        #ratingEnt="ngModel" type="text" >
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="range">Range</label>
                      <input [(ngModel)]="ItemCodeRequestModel.range" class="form-control" placeholder="range"
                        id="range" matTooltip="Enter range" name="range" ngControl="ItemCodeRequestModel.range"
                        #rangeEnt="ngModel" type="text" >
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="isNewFurniture">Is It New Furniture/Doors/Windows</label>
                      <select [(ngModel)]="ItemCodeRequestModel.isNewFurniture" class="form-control" id="isNewFurniture"
                        name="isNewFurniture" ngControl="ItemCodeRequestModel.isNewFurniture"
                        #isNewFurnitureEnt="ngModel"  matTooltip="Select isNewFurniture">
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                        <option value="N/A">N/A</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="isNewFacility">Is It a New Facility/Expansion Area</label>
                      <select [(ngModel)]="ItemCodeRequestModel.isNewFacility" class="form-control" id="isNewFacility"
                        name="isNewFacility" ngControl="ItemCodeRequestModel.isNewFacility" #isNewFacilityEnt="ngModel"
                         matTooltip="Select isNewFacility">
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                        <option value="N/A">N/A</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="isSpareRequired">Is Spare Required for New Equipment</label>
                      <select [(ngModel)]="ItemCodeRequestModel.isSpareRequired" class="form-control"
                        id="isSpareRequired" name="isSpareRequired" ngControl="ItemCodeRequestModel.isSpareRequired"
                        #isSpareRequiredEnt="ngModel"  matTooltip="Select isSpareRequired">
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                        <option value="N/A">N/A</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="prNumber">PR Number</label>
                      <input [(ngModel)]="ItemCodeRequestModel.prNumber" class="form-control" placeholder="prNumber"
                        id="prNumber" matTooltip="Enter prNumber" name="prNumber" 
                        ngControl="ItemCodeRequestModel.prNumber" #prNumberEnt="ngModel" type="text">
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="poNumber">PO Number</label>
                      <input [(ngModel)]="ItemCodeRequestModel.poNumber" class="form-control" placeholder="poNumber"
                        id="poNumber" matTooltip="Enter poNumber" name="poNumber" 
                        ngControl="ItemCodeRequestModel.poNumber" #poNumberEnt="ngModel" type="text">
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!utilizingDeptEnt.valid && utilizingDeptEnt.touched)?'has-error':''">
                      <label for="utilizingDept">Utilizing Dept.<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.utilizingDept" class="form-control" id="utilizingDept"
                        name="utilizingDept" ngControl="ItemCodeRequestModel.utilizingDept" #utilizingDeptEnt="ngModel"
                         matTooltip="Select utilizingDept" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of departmentList" value={{mat.id}}>{{mat.name}}</option>
                      </select>
                      <span class="help-block" *ngIf="!utilizingDeptEnt.valid && utilizingDeptEnt.touched">Please
                        select utilizingDept</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!valuationClassEnt.valid && valuationClassEnt.touched)?'has-error':''">
                      <label for="valuationClass">Valuation Class<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.valuationClass" class="form-control" id="valuationClass"
                        name="valuationClass" ngControl="ItemCodeRequestModel.valuationClass"
                        #valuationClassEnt="ngModel"  matTooltip="Select valuationClass" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of ValuationClasslist1" value="{{mat.valuationId}}">
                          {{mat.valuationId}}-{{mat.valuationDesc}}
                        </option>
                      </select>
                      <span class="help-block" *ngIf="!valuationClassEnt.valid && valuationClassEnt.touched">Please
                        select
                        valuationClass</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(approximateValueEnt.touched && !approximateValueEnt.valid)?'has-error':''">
                      <label for="approximateValue">Approximate Value<span style="color:red">*</span>
                      </label>
                      <input [(ngModel)]="ItemCodeRequestModel.approximateValue" class="form-control"
                        placeholder="approximateValue" id="approximateValue" matTooltip="Enter approximateValue"
                        name="approximateValue" ngControl="ItemCodeRequestModel.approximateValue"
                        #approximateValueEnt="ngModel" type="text"  required>
                      <span class="help-block" *ngIf="!approximateValueEnt.valid && approximateValueEnt.touched">Please
                        Enter approximateValue</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!hsncodeEnt7.valid && hsncodeEnt7.touched)?'has-error':''">
                      <label for="saccode">HSN Code<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.hsnCode" class="form-control" placeholder="HSN Code"
                        [minlength]="6" id="hsncode" name="hsncode" ngControl="ItemCodeRequestModel.hsnCode"
                         matTooltip="Enter HSN code" #hsncodeEnt7="ngModel" type="text" required>
                      <span class="help-block" *ngIf="!hsncodeEnt7.valid && hsncodeEnt7.touched">Minimum length
                        Should be 6 characters/Digits</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(detailedJustificationEnt.touched && !detailedJustificationEnt.valid)?'has-error':''">
                      <label for="detailedJustification">Justification<span style="color:red">*</span>
                      </label>
                      <textarea [(ngModel)]="ItemCodeRequestModel.detailedJustification" class="form-control"
                        placeholder="detailedJustification" id="detailedJustification"
                        matTooltip="Enter detailedJustification" name="detailedJustification" 
                        ngControl="ItemCodeRequestModel.detailedJustification" #detailedJustificationEnt="ngModel"
                        type="text" required></textarea>
                      <span class="help-block"
                        *ngIf="!detailedJustificationEnt.valid && detailedJustificationEnt.touched">Please
                        Enter detailedJustification</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(detailedSpecificationEnt.touched && !detailedSpecificationEnt.valid)?'has-error':''">
                      <label for="detailedSpecification">Specification<span style="color:red">*</span>
                      </label>
                      <textarea [(ngModel)]="ItemCodeRequestModel.detailedSpecification" class="form-control"
                        placeholder="detailedSpecification" id="detailedSpecification"
                        matTooltip="Enter detailedSpecification" name="detailedSpecification" 
                        ngControl="ItemCodeRequestModel.detailedSpecification" #detailedSpecificationEnt="ngModel"
                        type="text" required></textarea>
                      <span class="help-block"
                        *ngIf="!detailedSpecificationEnt.valid && detailedSpecificationEnt.touched">Please
                        Enter detailedSpecification</span>
                    </div>
                  </div>

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
              

              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box" *ngIf="Creator && isEdit">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material Code Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeExists">SAP Code Exists</label>
                      <div class="row">
                        <mat-radio-group aria-label="Select option?" id="sapCodeExists" name="sapCodeExists"
                          [(ngModel)]="ItemCodeRequestModel.sapCodeExists"
                          [disabled]="ItemCodeRequestModel.createdBy==this.currentUser.employeeId || view"
                          ngControl="ItemCodeRequestModel.sapCodeExists" #sapCodeExistsEnt="ngModel">
                          <mat-radio-button value='1'>Yes</mat-radio-button>
                          &nbsp;&nbsp;&nbsp;
                          <mat-radio-button value='0'>No</mat-radio-button>
                        </mat-radio-group>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeNo">SAP Code No<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCodeNo" class="form-control" placeholder="sapCodeNo"
                        id="sapCodeNo" name="sapCodeNo" ngControl="ItemCodeRequestModel.sapCodeNo"
                        #sapCodeNoEnt="ngModel" required [disabled]="view"
                        [readonly]="ItemCodeRequestModel.createdBy==this.currentUser.employeeId"
                        matTooltip="Enter SAP Code No" type="text">
                      <span class="help-block" *ngIf="!sapCodeNoEnt.valid && sapCodeNoEnt.touched">Please Enter
                        sap Code</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreationDate">Code Creation Date</label>
                      <input name="sapCreationDate" id="sapCreationDate" placeholder="sapCreationDate Date"
                        class="form-control" value="{{ItemCodeRequestModel.sapCreationDate |date:'dd/MM/yyyy h:mm a'}}"
                        disabled>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreatedBy">Code Created By</label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCreatedBy" class="form-control"
                        placeholder="sapCreatedBy" id="sapCreatedBy" name="sapCreatedBy"
                        ngControl="ItemCodeRequestModel.sapCreatedBy" matTooltip="Enter sapCreatedBy"
                        #sapCreatedByEnt="ngModel" type="text" disabled>
                    </div>
                  </div>
                </div>
              </div>

              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Approvers List</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf='!isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th>Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of Approverslist; let i = index">
                            <td>{{user.priority}}</td>
                            <td>{{getloc(user)}}</td>
                            <td>{{user.approverId}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row" *ngIf='isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th *ngIf="!isEdit">Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                            <th *ngIf="isEdit">Status</th>
                            <th *ngIf="isEdit">Date</th>
                            <th *ngIf="isEdit">Comments</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of transactionslist; let i = index">
                            <td>{{user.approvalPriority}}</td>
                            <td>{{user.doneBy}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                            <td>{{user.status}}</td>
                            <td>{{user.doneOn |date:'dd/MM/yyyy h:mm a'}}</td>
                            <td>{{user.comments}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>


            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <div *ngIf="!view" class="row pull-right">
          <!-- <button type="button" class="btn btn-primary" (click)="oncloserequest('complete')"
            matTooltip="Click to Complete the Request" *ngIf="Review && ItemCodeRequestModel.sapCodeExists=='1'"
            [disabled]="comments==null">Completed</button> -->
          <button type="button" class="btn btn-primary" (click)="oncloserequest('close')"
            matTooltip="Click to Close the Request" *ngIf="isEdit && Closure"
            [disabled]="comments==null">Closure</button>
          <button type="button" class="btn btn-primary" (click)="onCreate()" matTooltip="Click to Create"
            [disabled]="!OSENGXPForm.valid" *ngIf=" Creator && !Closure ">Create</button>
          <button type="button" class="btn btn-primary" (click)="onreview('InProcess')" matTooltip="Click to Submit"
            [disabled]="!OSENGXPForm.valid" *ngIf="Review  && !Closure && !Creator">Submit</button>
          <button type="button" class="btn btn-primary" (click)="onreview('Rejected')" matTooltip="Click to Reject"
            *ngIf=" Review && !Closure" [disabled]="comments==null">Reject</button>
          &nbsp;
          <div *ngIf=" Review" class="dropdown "> <a data-toggle="dropdown" class="dropdown-toggle"
              href="#"><span>
                <button [disabled]="comments==null" type="button" class="btn btn-primary"
                  matTooltip="Click to Revert">Revert</button>
              </span>
            </a>
            <ul class="dropdown-menu">
              <li><a *ngIf="Aprlpriority >1" (click)="onRevertRequest('ReverttoLastApprover')">Previous Approver</a>
              </li>
              <li><a (click)="onRevertRequest('ReverttoInitiator')">Initiator</a></li>
            </ul>
          </div>
          &nbsp;
          <!-- <div *ngIf="isEdit" class="dropdown profile-element"> <a data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
            <button type="button" class="btn btn-primary" matTooltip="Click to Submit">Save</button>
          </span>
          </a>
          <ul class="dropdown-menu animated fadeInRight m-t-xs">
            <li><a (click)="onRevertRequest(ReverttoLastApprover)">Previous Approver</a></li>
            <li><a (click)="onRevertRequest(ReverttoInitiator)">Initiator</a></li>          
          </ul>
        </div> -->


          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Save')" matTooltip="Click to Save"
            [disabled]="!OSENGXPForm.valid"
            *ngIf="!isEdit && ItemCodeRequestModel.modifiedBy==null && ItemCodeRequestModel.approveType==null ">Save</button>
          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Submit')"
            matTooltip="Click to Save & Submit" [disabled]="!OSENGXPForm.valid "
            *ngIf="!isEdit && ItemCodeRequestModel.modifiedBy==null&& ItemCodeRequestModel.approveType==null  ">Save &
            Submit</button>
          <button type="button" class="btn btn-primary" (click)="onSubmitEntry(ItemCodeRequestModel)"
            matTooltip="Click to Save & Submit" >Save & Submit</button>
          <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button>
          <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
            matTooltip="Click to Clear">Clear</button>
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
        <div *ngIf="view" class="row pull-right">
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>

<div class="modal fade" id="PPCNGXPModal" role="dialog" aria-labelledby="PPCNGXPModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">

  <div class="modal-dialog modal-xl ">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Material Code Request Form
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="row">
          <div class="col-sm-12">
            <form #PPCNGXPForm="ngForm">
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group form-group-sm"
                    [ngClass]="(!mat_typeEnt.valid && mat_typeEnt.touched)?'has-error':''">
                    <label for="mat_type">Material Type<span style="color:red">*</span></label>
                    <select [(ngModel)]="ItemCodeRequestModel.materialTypeId" class="form-control" id="mat_type"
                      name="mat_type" ngControl="ItemCodeRequestModel.materialTypeId" #mat_typeEnt="ngModel"
                      matTooltip="select Material Type" disabled required>
                      <option [ngValue]="undefined" disabled [selected]="true">--Select an Option--</option>
                      <option *ngFor="let mat_type of materialList" value={{mat_type.id}}>
                        {{mat_type.type}}-{{mat_type.description}}
                      </option>
                    </select>
                    <span class="help-block" *ngIf="!mat_typeEnt.valid && mat_typeEnt.touched">Please select Material
                      Type.</span>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group form-group-sm">
                    <label for="emailid">EmailId(For which the Confirmation will be sent)</label>
                    <input name="emailid" type="text" class="form-control" [(ngModel)]="emailid" disabled>
                  </div>
                </div>

              </div>
              <hr class="m-3">
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf;height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">

                  <div class="col-sm-4" *ngIf="isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{ItemCodeRequestModel.requestDate |date:'dd/MM/yyyy h:mm a'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4" *ngIf="!isEdit">
                    <div class="form-group form-group-sm">
                      <label for="requestdate"> Request Date</label>
                      <input name="requestdate" id="requestdate" placeholder="Request Date" class="form-control"
                        value="{{requestdate |date:'dd/MM/yyyy h:mm a'}}" readonly>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!locationEnt.valid && locationEnt.touched)?'has-error':''">
                      <label for="location">Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.locationId" class="form-control" id="location"
                        name="location" ngControl="ItemCodeRequestModel.locationId" #locationEnt="ngModel"
                         matTooltip="Select Location"
                        (change)="getApproversList(ItemCodeRequestModel)" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of locationList" value={{loc.id}}>{{loc.code}}-{{loc.name}}</option>
                      </select>
                      <span class="help-block" *ngIf="!locationEnt.valid && locationEnt.touched">Please select
                        location</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!storagelocationEnt.valid && storagelocationEnt.touched)?'has-error':''">
                      <label for="storagelocation">Storage Location<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.storageLocationId" class="form-control"
                        id="storagelocation" name="storagelocation" ngControl="ItemCodeRequestModel.storageLocationId"
                        #storagelocationEnt="ngModel"  matTooltip="Select Storage Location"
                        (change)="getApproversList(ItemCodeRequestModel)" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let loc of storagelocationlist1" value={{loc.storageLocationId}}>
                          {{loc.storageLocationId}}-{{loc.storageLocationName}}</option>
                      </select>
                      <span class="help-block" *ngIf="!storagelocationEnt.valid && storagelocationEnt.touched">Please
                        select storagelocation</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="shortnaame">Short Name<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.materialShortName" class="form-control" id="shortnaame"
                        placeholder="Material Name" name="shortnaame" ngControl="ItemCodeRequestModel.materialShortName"
                        (input)="ItemCodeRequestModel.materialShortName=$event.target.value.toUpperCase()"
                        #shortnaameEnt="ngModel"  required>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group form-group-sm">
                      <label for="longname">Long Name<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.materialLongName" class="form-control" id="longname"
                        placeholder="Material Name" name="longname" ngControl="ItemCodeRequestModel.materialLongName"
                        (input)="ItemCodeRequestModel.materialLongName=$event.target.value.toUpperCase()"
                        #longnameEnt="ngModel"  required>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!mtrlgrpEnt.valid && mtrlgrpEnt.touched)?'has-error':''">
                      <label for="MaterialGroup">Material Group<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.materialGroupId" class="form-control" id="mtrlgrp"
                        name="mtrlgrp" ngControl="ItemCodeRequestModel.materialGroupId" #mtrlgrpEnt="ngModel"
                         matTooltip="Select MaterialGroup" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of materialgroupList" value={{mat.materialGroupId}}>
                          {{mat.materialGroupId}}-{{mat.ltxt}}
                        </option>
                      </select>
                      <span class="help-block" *ngIf="!mtrlgrpEnt.valid && mtrlgrpEnt.touched">Please select Material
                        Group</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm" [ngClass]="(!uomEnt.valid && uomEnt.touched)?'has-error':''">
                      <label for="UOM">UOM<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.unitOfMeasId" class="form-control" id="uom" name="uom"
                        ngControl="ItemCodeRequestModel.unitOfMeasId" #uomEnt="ngModel" 
                        matTooltip="Select UOM" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let uom of uomMasterList" value={{uom.uom}}>{{uom.uom}}-{{uom.description}}
                      </select>
                      <span class="help-block" *ngIf="!uomEnt.valid && uomEnt.touched">Please select UOM</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                      <label for="purchaseGroupId">Purchase Group Id<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.purchaseGroupId" class="form-control"
                        id="purchaseGroupId" name="purchaseGroupId" ngControl="ItemCodeRequestModel.purchaseGroupId"
                        #purchaseGroupIdEnt="ngModel" matTooltip="Select purchaseGroupId"  required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of purchasegrouplist" value={{mat.purchaseGroupId}}>
                          {{mat.purchaseGroupId}}-{{mat.purchaseGroupDesc}}</option>
                      </select>
                    </div>
                  </div>

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(brandIdEnt.touched && !brandIdEnt.valid)?'has-error':''">
                      <label for="brandId">Brand <span *ngIf="ItemCodeRequestModel.isDmfMaterial!='0'"
                          style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.brandId" class="form-control" placeholder="Brand"
                        id="brandId" matTooltip="Enter brandId" name="brandId" ngControl="ItemCodeRequestModel.brandId"
                        (input)="ItemCodeRequestModel.brandId=$event.target.value.toUpperCase()" #brandIdEnt="ngModel"
                        type="text"  required>
                      <span class="help-block" *ngIf="!brandIdEnt.valid && brandIdEnt.touched">Please
                        Enter brandId</span>
                    </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group form-group-sm"
                      [ngClass]="(divisionIdEnt.touched && !divisionIdEnt.valid)?'has-error':''">
                      <label for=" divisionId">Division<span style="color:red">*</span>
                      </label>
                      <select [(ngModel)]="ItemCodeRequestModel.divisionId" class="form-control" id=" divisionId"
                        name=" divisionId" ngControl="ItemCodeRequestModel.divisionId" #divisionIdEnt="ngModel"
                         matTooltip="Select UOM" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let uom of  Divisionlist" value={{uom.divCode}}>{{uom.divCode}}-{{uom.divDesc}}
                        </option>
                      </select>
                    </div>
                  </div>

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;

              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Other Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!isAssetEnt.valid && isAssetEnt.touched)?'has-error':''">
                      <label for="isAsset">Is Asset<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.isAsset" class="form-control" id="isAsset"
                        name="isAsset" ngControl="ItemCodeRequestModel.isAsset" #isAssetEnt="ngModel"
                         matTooltip="Select isAsset" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option [ngValue]="'1'">Yes</option>
                        <option [ngValue]="'0'"> No</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!purposeIdEnt.valid && purposeIdEnt.touched)?'has-error':''">
                      <label for="purposeId">Purpose<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.purposeId" class="form-control" id="purposeId"
                        name="purposeId" ngControl="ItemCodeRequestModel.purposeId" #purposeIdEnt="ngModel"
                         matTooltip="Select purposeId" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option value="0">Gifts & Compliments</option>
                        <option value="1">Propaganda & Promotional (KUDLU DEPOT)</option>
                        <option value="2">Production Launch Exp</option>
                        <option value="3">Sales Promotional(SAS) </option>
                        <option value="4">Visual Ads, Literature</option>
                        <option value="5">Conference,National & Regional</option>
                        <option value="6">Incentive to Field Staff</option>
                        <option value="7">Incentive to Stockist/Chemist</option>
                        <option value="8">Travelling Lodging & Boarding Exp</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!valuationClassEnt.valid && valuationClassEnt.touched)?'has-error':''">
                      <label for="valuationClass">Valuation Class<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.valuationClass" class="form-control" id="valuationClass"
                        name="valuationClass" ngControl="ItemCodeRequestModel.valuationClass"
                        #valuationClassEnt="ngModel"  matTooltip="Select valuationClass" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option *ngFor="let mat of ValuationClasslist1" value="{{mat.valuationId}}">
                          {{mat.valuationId}}-{{mat.valuationDesc}}
                        </option>
                      </select>
                      <span class="help-block" *ngIf="!valuationClassEnt.valid && valuationClassEnt.touched">Please
                        select
                        valuationClass</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(approximateValueEnt.touched && !approximateValueEnt.valid)?'has-error':''">
                      <label for="approximateValue">Approximate Value<span style="color:red">*</span>
                      </label>
                      <input [(ngModel)]="ItemCodeRequestModel.approximateValue" class="form-control"
                        placeholder="approximateValue" id="approximateValue" required
                        matTooltip="Enter approximateValue" name="approximateValue"
                        ngControl="ItemCodeRequestModel.approximateValue" #approximateValueEnt="ngModel" type="text"
                        >
                      <span class="help-block" *ngIf="!approximateValueEnt.valid && approximateValueEnt.touched">Please
                        Enter approximateValue</span>
                    </div>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!hsncodeEnt8.valid && hsncodeEnt8.touched)?'has-error':''">
                      <label for="saccode">HSN Code<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.hsnCode" class="form-control" placeholder="HSN Code"
                        [minlength]="6" id="hsncode" name="hsncode" ngControl="ItemCodeRequestModel.hsnCode"
                         matTooltip="Enter HSN code" #hsncodeEnt8="ngModel" type="text" required>
                      <span class="help-block" *ngIf="!hsncodeEnt8.valid && hsncodeEnt8.touched">Minimum length
                        Should be 6 characters/Digits</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(!isSasFormAvailableEnt.valid && isSasFormAvailableEnt.touched)?'has-error':''">
                      <label for="isSasFormAvailable">Is SAAS Form Available<span style="color:red">*</span></label>
                      <select [(ngModel)]="ItemCodeRequestModel.isSasFormAvailable" class="form-control"
                        id="isSasFormAvailable" name="isSasFormAvailable"
                        ngControl="ItemCodeRequestModel.isSasFormAvailable" #isSasFormAvailableEnt="ngModel"
                         matTooltip="Select isSasFormAvailable" required>
                        <option [ngValue]="undefined" disabled>--Select an Option--</option>
                        <option [ngValue]="'1'">Yes</option>
                        <option [ngValue]="'0'"> No</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(detailedJustificationEnt.touched && !detailedJustificationEnt.valid)?'has-error':''">
                      <label for="detailedJustification">Justification<span style="color:red">*</span>
                      </label>
                      <textarea [(ngModel)]="ItemCodeRequestModel.detailedJustification" class="form-control"
                        placeholder="detailedJustification" id="detailedJustification"
                        matTooltip="Enter detailedJustification" name="detailedJustification"
                        ngControl="ItemCodeRequestModel.detailedJustification" #detailedJustificationEnt="ngModel"
                        type="text"  required></textarea>
                      <span class="help-block"
                        *ngIf="!detailedJustificationEnt.valid && detailedJustificationEnt.touched">Please
                        Enter detailedJustification</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm"
                      [ngClass]="(detailedSpecificationEnt.touched && !detailedSpecificationEnt.valid)?'has-error':''">
                      <label for="detailedSpecification">Specification<span style="color:red">*</span>
                      </label>
                      <textarea [(ngModel)]="ItemCodeRequestModel.detailedSpecification" class="form-control"
                        placeholder="detailedSpecification" id="detailedSpecification"
                        matTooltip="Enter detailedSpecification" name="detailedSpecification"
                        ngControl="ItemCodeRequestModel.detailedSpecification" #detailedSpecificationEnt="ngModel"
                        type="text"  required></textarea>
                      <span class="help-block"
                        *ngIf="!detailedSpecificationEnt.valid && detailedSpecificationEnt.touched">Please
                        Enter detailedSpecification</span>
                    </div>
                  </div>

                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
               
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box" *ngIf="Creator">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Material Code Details</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeExists">SAP Code Exists</label>
                      <div class="row">
                        <mat-radio-group aria-label="Select option?" id="sapCodeExists" name="sapCodeExists"
                          [(ngModel)]="ItemCodeRequestModel.sapCodeExists"
                          [disabled]="ItemCodeRequestModel.createdBy==this.currentUser.employeeId || view"
                          ngControl="ItemCodeRequestModel.sapCodeExists" #sapCodeExistsEnt="ngModel">
                          <mat-radio-button value='1'>Yes</mat-radio-button>
                          &nbsp;&nbsp;&nbsp;
                          <mat-radio-button value='0'>No</mat-radio-button>
                        </mat-radio-group>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCodeNo">SAP Code No<span style="color:red">*</span></label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCodeNo" class="form-control" placeholder="sapCodeNo"
                        id="sapCodeNo" name="sapCodeNo" ngControl="ItemCodeRequestModel.sapCodeNo"
                        #sapCodeNoEnt="ngModel" required [disabled]="view"
                        [readonly]="ItemCodeRequestModel.createdBy==this.currentUser.employeeId"
                        matTooltip="Enter SAP Code No" type="text">
                      <span class="help-block" *ngIf="!sapCodeNoEnt.valid && sapCodeNoEnt.touched">Please Enter
                        sap Code</span>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreationDate">Code Creation Date</label>
                      <input name="sapCreationDate" id="sapCreationDate" placeholder="sapCreationDate Date"
                        class="form-control" value="{{ItemCodeRequestModel.sapCreationDate |date:'dd/MM/yyyy h:mm a'}}"
                        disabled>
                    </div>
                  </div>
                  <div class="col-sm-3">
                    <div class="form-group form-group-sm">
                      <label for="sapCreatedBy">Code Created By</label>
                      <input [(ngModel)]="ItemCodeRequestModel.sapCreatedBy" class="form-control"
                        placeholder="sapCreatedBy" id="sapCreatedBy" name="sapCreatedBy"
                        ngControl="ItemCodeRequestModel.sapCreatedBy" matTooltip="Enter sapCreatedBy"
                        #sapCreatedByEnt="ngModel" type="text" disabled>
                    </div>
                  </div>
                </div>
              </div>
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              <div class="box">
                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                  <div class="col-xs-6">
                    <h3 class="box-title">Approvers List</h3>
                  </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf='!isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th>Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of Approverslist; let i = index">
                            <td>{{user.priority}}</td>
                            <td>{{getloc(user)}}</td>
                            <td>{{user.approverId}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="row" *ngIf='isEdit'>
                  <div class="col-sm-12">
                    <div class="table">
                      <table id="approversTable" class="table table-striped">
                        <thead style="background-color: #68a7d2; color:white;">
                          <tr>
                            <th>Priority</th>
                            <th *ngIf="!isEdit">Location</th>
                            <th>Employee ID</th>
                            <th>ApproverName</th>
                            <th>Role</th>
                            <th>Department</th>
                            <th *ngIf="isEdit">Status</th>
                            <th *ngIf="isEdit">Date</th>
                            <th *ngIf="isEdit">Comments</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let user of transactionslist; let i = index">
                            <td>{{user.approvalPriority}}</td>
                            <td>{{user.doneBy}}</td>
                            <td>{{user.approverName}}</td>
                            <td>{{user.role}}</td>
                            <td>{{user.department}}</td>
                            <td>{{user.status}}</td>
                            <td>{{user.doneOn |date:'dd/MM/yyyy h:mm a'}}</td>
                            <td>{{user.comments}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="overlay" *ngIf="isLoadingPop">
            <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i class="fa fa-warning"></i>{{errMsgPop}}</span>
        <div *ngIf="!view" class="row pull-right">
          <!-- <button type="button" class="btn btn-primary" (click)="oncloserequest('complete')"
            matTooltip="Click to Complete the Request" *ngIf="Review && ItemCodeRequestModel.sapCodeExists=='1'"
            [disabled]="comments==null">Completed</button> -->
          <button type="button" class="btn btn-primary" (click)="oncloserequest('close')"
            matTooltip="Click to Close the Request" *ngIf="isEdit && Closure"
            [disabled]="comments==null">Closure</button>
          <button type="button" class="btn btn-primary" (click)="onCreate()" matTooltip="Click to Create"
            [disabled]="!PPCNGXPForm.valid" *ngIf="Creator && !Closure">Create</button>
          <button type="button" class="btn btn-primary" (click)="onreview('InProcess')" matTooltip="Click to Submit"
            [disabled]="!PPCNGXPForm.valid"
            *ngIf="Review && ItemCodeRequestModel.sapCodeExists!='1' && !Closure && !Creator">Submit</button>
          <button type="button" class="btn btn-primary" (click)="onreview('Rejected')" matTooltip="Click to Reject"
            *ngIf="Review && !Closure" [disabled]="comments==null">Reject</button>
          &nbsp;
          <div *ngIf="Review" class="dropdown "> <a data-toggle="dropdown" class="dropdown-toggle"
              href="#"><span>
                <button [disabled]="comments==null" type="button" class="btn btn-primary"
                  matTooltip="Click to Revert">Revert</button>
              </span>
            </a>
            <ul class="dropdown-menu">
              <li><a *ngIf="Aprlpriority >1" (click)="onRevertRequest('ReverttoLastApprover')">Previous Approver</a>
              </li>
              <li><a (click)="onRevertRequest('ReverttoInitiator')">Initiator</a></li>
            </ul>
          </div>
          &nbsp;
          <!-- <div *ngIf="isEdit" class="dropdown profile-element"> <a data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
            <button type="button" class="btn btn-primary" matTooltip="Click to Submit">Save</button>
          </span>
          </a>
          <ul class="dropdown-menu animated fadeInRight m-t-xs">
            <li><a (click)="onRevertRequest(ReverttoLastApprover)">Previous Approver</a></li>
            <li><a (click)="onRevertRequest(ReverttoInitiator)">Initiator</a></li>          
          </ul>
        </div> -->


          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Save')" matTooltip="Click to Save"
            [disabled]="!PPCNGXPForm.valid"
            *ngIf="!isEdit && ItemCodeRequestModel.modifiedBy==null && ItemCodeRequestModel.approveType==null ">Save</button>
          <button type="button" class="btn btn-primary" (click)="onSaveEntry('Submit')"
            matTooltip="Click to Save & Submit" [disabled]="!PPCNGXPForm.valid "
            *ngIf="!isEdit && ItemCodeRequestModel.modifiedBy==null && ItemCodeRequestModel.approveType==null ">Save &
            Submit</button>
          <button type="button" class="btn btn-primary" (click)="onSubmitEntry(ItemCodeRequestModel)"
            matTooltip="Click to Save & Submit" >Save & Submit</button>
          <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button>
          <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
            matTooltip="Click to Clear">Clear</button>
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
        <div *ngIf="view" class="row pull-right">
          <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
            data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
        </div>
      </div>

      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
</div>