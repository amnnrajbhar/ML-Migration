<section class="content-header">
  <h1 class="display-1">
    Bank details
  </h1>

</section>
<section class="content">
  <div class="overlay text-center h3" *ngIf="isLoading">
    <i class="fa fa-spinner fa-pulse"></i>
  </div>

  <form #bankDetailsForm="ngForm">
    <div class="form-horizontal">

      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label for="accountType" class="col-md-4">Account Type <span style="color:red">*</span></label>
            <div class="col-md-8">
              <select class="form-control" id="accountTypeId" [(ngModel)]="details.accountTypeId"
                ngControl="details.accountTypeId" name="accountTypeId" [disabled]="!editAllowed || showSalaryAccountDetails"
                #accountTypeEnt="ngModel" required>
                <option [ngValue]="null" disabled [selected]="true"> Select account type </option>
                <option *ngFor="let pl of accountTypeList" [ngValue]="pl.id">{{pl.account}}</option>
              </select>
              <span class="help-block" *ngIf="(accountTypeEnt.touched || submitted) && !accountTypeEnt.valid">
                Please select account type</span>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="accountNo" class="col-md-4">Account No <span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="accountNo" [disabled]="!editAllowed || showSalaryAccountDetails"
                [(ngModel)]="details.accountNo" ngControl="details.accountNo" name="accountNo" maxlength="30"
                #accountNoEnt="ngModel" required (keypress)="keyPressAllowOnlyNumber($event)"/>
                <span class="help-block" *ngIf="(accountNoEnt.touched || submitted) && !accountNoEnt.valid">
                  Please enter account no</span>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="accountNo" class="col-md-4">Confirm Account No <span style="color:red">*</span></label>
            <div class="col-md-8"><input type="password" class="form-control" id="accountNo" [disabled]="!editAllowed || showSalaryAccountDetails"
                [(ngModel)]="details.confirmAccountNo" ngControl="details.confirmAccountNo" name="confirmAccountNo" maxlength="30"
                #confirmAccountNoEnt="ngModel" required (keypress)="keyPressAllowOnlyNumber($event)"/>
                <span class="help-block" *ngIf="confirmAccountNoEnt.touched && !confirmAccountNoEnt.valid">
                  Please re-enter account no for confirmation</span>
                  <span class="help-block" *ngIf="(confirmAccountNoEnt.touched || submitted) && details.confirmAccountNo != details.accountNo">
                    Account No does not match, re-enter the account no</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label for="bankName" class="col-md-4">Bank Name <span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="bankName" [disabled]="!editAllowed || showSalaryAccountDetails"
                [(ngModel)]="details.bankName" ngControl="details.bankName" name="bankName" maxlength="30"
                #bankNameEnt="ngModel" required/>
                <span class="help-block" *ngIf="(bankNameEnt.touched || submitted) && !bankNameEnt.valid">
                  Please enter bank name</span>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="branchName" class="col-md-4">Branch Name <span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="branchName" [disabled]="!editAllowed || showSalaryAccountDetails"
                [(ngModel)]="details.branchName" ngControl="details.branchName" name="branchName" maxlength="100"
                #branchNameEnt="ngModel" required/>
                <span class="help-block" *ngIf="(branchNameEnt.touched || submitted) && !branchNameEnt.valid">
                  Please enter branch name</span>
            </div>
          </div>
        </div>        
        <div class="col-md-4">
          <div class="form-group">
            <label for="ifscCode" class="col-md-4">IFSC Code<span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="ifscCode" [disabled]="!editAllowed || showSalaryAccountDetails"
                [(ngModel)]="details.ifscCode" ngControl="details.ifscCode" name="ifscCode" maxlength="15"
                #ifscCodeEnt="ngModel" required/>
                <span class="help-block" *ngIf="(ifscCodeEnt.touched || submitted) && !ifscCodeEnt.valid">
                  Please enter ifsc code</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="showSalaryAccountDetails">
        <div class="col-xs-12">
          <h2>Salary Credit Account Details</h2>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="currency" class="col-md-4">Currency <span style="color:red">*</span></label>
            <div class="col-md-8">
              <select class="form-control" id="currencyId" [(ngModel)]="details.currencyId"
                ngControl="details.currencyId" name="currencyId" [disabled]="!editAllowed"
                #currencyEnt="ngModel" required>
                <option [ngValue]="null" disabled [selected]="true"> Select currency </option>
                <option *ngFor="let pl of currencyList" [ngValue]="pl.id">{{pl.waers}} - {{pl.isocd}}</option>
              </select>
              <span class="help-block" *ngIf="(currencyEnt.touched || submitted) && !currencyEnt.valid">
                Please select currency</span>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="salaryCreditAccountNo" class="col-md-4">Account No <span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="salaryCreditAccountNo" [disabled]="!editAllowed"
                [(ngModel)]="details.salaryCreditAccountNo" ngControl="details.salaryCreditAccountNo" name="salaryCreditAccountNo" 
                #salaryCreditAccountNoEnt="ngModel" required (keypress)="keyPressAllowOnlyNumber($event)" maxlength="30"/>
                <span class="help-block" *ngIf="(salaryCreditAccountNoEnt.touched || submitted) && !salaryCreditAccountNoEnt.valid">
                  Please enter account no</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="showSalaryAccountDetails">
        <div class="col-md-4">
          <div class="form-group">
            <label for="salaryCreditBank" class="col-md-4">Bank Name <span style="color:red">*</span></label>
            <div class="col-md-8"> 
              <select class="form-control" id="salaryCreditBankId" [(ngModel)]="details.salaryCreditBankId"
              ngControl="details.salaryCreditBankId" name="salaryCreditBankId" [disabled]="!editAllowed"
              #salaryCreditBankEnt="ngModel" required>
              <option [ngValue]="null" disabled [selected]="true"> Select salary credit bank </option>
              <option *ngFor="let pl of banksList" [ngValue]="pl.id">{{pl.name}} {{pl.street}} {{pl.city}}</option>
              </select>
              <span class="help-block" *ngIf="(salaryCreditBankEnt.touched || submitted) && !salaryCreditBankEnt.valid">
              Please select salary credit bank</span>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="salaryCreditBranch" class="col-md-4">Branch Name <span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="salaryCreditBranch" [disabled]="!editAllowed"
                [(ngModel)]="details.salaryCreditBranch" ngControl="details.salaryCreditBranch" name="salaryCreditBranch" 
                #salaryCreditBranchNameEnt="ngModel" required maxlength="100"/>
                <span class="help-block" *ngIf="(salaryCreditBranchNameEnt.touched || submitted) && !salaryCreditBranchNameEnt.valid">
                  Please enter branch name</span>
            </div>
          </div>
        </div>        
        <div class="col-md-4">
          <div class="form-group">
            <label for="salaryCreditIFSCCode" class="col-md-4">IFSC Code<span style="color:red">*</span></label>
            <div class="col-md-8"><input type="text" class="form-control" id="salaryCreditIFSCCode" [disabled]="!editAllowed"
                [(ngModel)]="details.salaryCreditIFSCCode" ngControl="details.salaryCreditIFSCCode" name="salaryCreditIFSCCode" 
                #salaryCreditIfscCodeEnt="ngModel" required maxlength="15"/>
                <span class="help-block" *ngIf="(salaryCreditIfscCodeEnt.touched || submitted) && !salaryCreditIfscCodeEnt.valid">
                  Please enter ifsc code</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>  
</section>