<section class="content-header">
    <h1 class="display-1">
        Gate Entry
        <small></small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
        <li class="active">Gate Entry </li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <div class="box">
        <div class="box-header">
            <div class="col-xs-6">
                <h3 class="box-title">Gate Entry With PO</h3>
                <span class="label label-danger" *ngIf="errMsg.length>0">{{errMsg}}</span>
            </div>
            <div class="col-xs-6">
                <button type="button" class="btn btn-primary pull-right" *ngIf="currentUser.fkProfileId==1002"  matTooltip="Click to Gate Entry"
                    (click)="onGateEntryActions(false,gateEntryMModel,false)"><i class="fa fa-plus"
                        aria-hidden="true"></i> Gate Entry</button>
            </div>
        </div>
        <div id="dateFilterPanel">
            <div class="row ml-3">
                <div class="col-sm-3">
                    <label>GI No</label>
                    <div class="form-group form-group-sm">
                        <input matTooltip="enter GI NO" name="GINUM" class="form-control" [(ngModel)]="fltrGINO"
                            placeholder="GI NO">
                    </div>
                </div>
                <div class="col-sm-3">
                    <label>Invoice No</label>
                    <div class="form-group form-group-sm">
                        <input matTooltip="Enter Invoice No" name="INVNUM" class="form-control" [(ngModel)]="fltrInvoice"
                            placeholder="Invoice No">
                    </div>
                </div>
                <div class="col-sm-3">
                    <label>Po No</label>
                    <div class="form-group form-group-sm">
                        <input matTooltip="Enter Po No" name="ponum" class="form-control" [(ngModel)]="fltrPo"
                            placeholder="PO No">
                    </div>
                </div>
                <div class="col-sm-3">                   
                        <label for="plant">Plant</label>
                        <select                                           
                            [(ngModel)]="plant" class="form-control"
                            id="plant" name="plant"  matTooltip="Select Plant"
                            ngControl="plant"  >
                            <option [ngValue]="undefined" disabled>--Select an Option--</option>
                            <option *ngFor="let gate of plantList" [ngValue]="gate.code">
                                {{gate.code}}-{{gate.name}}</option>
                        </select>                      
                   
                </div>
                <div class="col-sm-3">
                    <label>Supplier Code/Name</label>
                    <div class="form-group form-group-sm">
                        <input matTooltip="Enter Supplier Code/Name" name="Supplier" class="form-control" [(ngModel)]="fltrSupplier"
                            placeholder="Supplier">
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group form-group-sm">
                        <label for="DeliveryMode">Delivery Mode</label>
                        <ng-multiselect-dropdown id="fltdeliverymode" name="fltdeliverymode" #fltrdelrymodeEnt="ngModel"
                            [placeholder]="'select Delivery Mode(multiple)'" [data]="deliveryModeList"
                            [(ngModel)]="selectedModes" [settings]="dropdownSettings" (onDeSelect)="onItemDeSelect($event)"
                            (onDeSelectAll)="onDeSelectAll($event)" (onSelectAll)="onSelectAll($event)" matTooltip="Select Delivery Mode">
                        </ng-multiselect-dropdown>
                    </div>
                </div>
            </div>
            <div class="row ml-3" *ngIf="currentUser.fkProfileId!=1002">
                <div class="col-sm-2">
                    <div class="checkbox">
                        <label><input type="checkbox" id="chkdelete" name="delete" [(ngModel)]="delete" matTooltip="click to check Cancelled"><b>Cancelled
                                GI</b></label>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="checkbox">
                        <label><input type="checkbox" id="chkack" name="ack" [(ngModel)]="acknowledge" matTooltip="click to check GI Pending"><b>GI
                                Pending</b></label>
                    </div>
                </div>
            </div>
            <div class="row ml-3">
                <div class="col-sm-4">
                    <label>From Date</label>
                    <!-- <input type="date" class="form-control" placeholder="From Date"  [(ngModel)]="from_date"/> -->
                    <div class="form-group form-group-sm"
                        [ngClass]="(fromDate.touched && !fromDate.valid)?'has-error':''">
                        <input [matTooltipPosition]="'below'" matTooltip="Click to change from date"
                            [owlDateTime]="dt11" [owlDateTimeTrigger]="dt11" name="fromDate" class="form-control"
                            [(ngModel)]="from_date" #fromDate="ngModel">
                        <owl-date-time [pickerType]="'calendar'" #dt11 style="width: 250px;"></owl-date-time>
                        <span class="help-block" *ngIf="!fromDate.valid && fromDate.touched">Please enter valid From
                            Date.</span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <label>To Date</label>
                    <div class="form-group form-group-sm" [ngClass]="(toDate.touched && !toDate.valid)?'has-error':''">
                        <!-- <input type="date" [disabled]="from_date==null||from_date==''" class="form-control" placeholder="To Date"  [(ngModel)]="to_date"> -->
                        <input [min]="from_date" [max]="today" [matTooltipPosition]="'below'"
                            matTooltip="Click to change to date" [owlDateTime]="dt12" [owlDateTimeTrigger]="dt12"
                            name="endDate" class="form-control" [(ngModel)]="to_date" #toDate="ngModel">
                        <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;"></owl-date-time>
                        <span class="help-block" *ngIf="!toDate.valid && toDate.touched">Please enter valid To
                            Date.</span>
                    </div>
                </div>
                <div class="col-sm-2">
                    <label>&nbsp;</label>
                    <div class="form-group form-group-sm">
                        <button class="btn btn-primary btn-sm" (click)="getAllGateEntries('filter');"
                            [disabled]="(!toDate.valid && toDate.touched) || (!fromDate.valid && fromDate.touched)" matTooltip="click to go">Go</button>
                        &nbsp;&nbsp;
                        <button class="btn btn-primary btn-sm" (click)="clearFilter();" matTooltip="click to reset">Clear</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body table-responsive">
            <table id="userTable" class="table  table-striped" cellspacing="0">
                <thead style="background-color: #0099cc; color:white;">
                    <tr>
                        <th>SNo</th>
                        <th>GI No</th>
                        <th>Gate No</th>
                        <th>PO Number</th>
                        <th>Invoice No</th>
                        <th>Invoice Date</th>
                        <th>Financial Year</th>
                        <th>Delivery Mode</th>
                        <th>In Date</th>
                        <th>In Time</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let ge of gateEntryMList; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{ge.gI_NO}}</td>
                        <td>{{ge.gI_GATENO}}</td>
                        <td>{{ge.ponumber}}</td>
                        <td>{{ge.doC_NO}}</td>
                        <td>{{ge.doC_DATE | date:'dd/MM/yyyy'}}</td>
                        <td>{{ge.fiN_YEAR}}</td>
                        <td>{{ge.deliverymode}}</td>
                        <td>{{ge.gI_DATE | date:'dd/MM/yyyy'}}</td>
                        <td>{{ge.iN_TIME | date:'HH:mm'}}</td>
                        <td>
                            <table>
                                <tr>
                                    <td class="pr-2" *ngIf="currentUser.fkProfileId!=1002"><button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to Cancel entry" class="btn btn-primary btn-xs"
                                            (click)="onGateEntryActions(true,ge,false)" [disabled]="!ge.isActive">
                                            <i class="fa fa-trash"></i>
                                        </button></td>
                                    <td><button type="button" class="btn btn-primary btn-xs" [matTooltipPosition]="'after'" matTooltip="Click to Print"
                                            (click)="onGateEntryActions(true,ge,true)"><i class="fa fa-print" aria-hidden="true"></i></button>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </tbody>

            </table>
        </div>
        <div class="overlay" *ngIf="isLoading">
            <i class="fa fa-spinner fa-pulse"></i>
        </div>
    </div>
</section>
<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md  modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                    (click)="getAllGateEntries('save')">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title" style="color: #0FB381; text-align: center;"><span class="text pull-center"
                        *ngIf="errMsgModalPop.length>0"><i class="fa fa-check"></i>{{errMsgModalPop}}</span></h3>
            </div>
        </div>
    </div>
    <div class="overlay" *ngIf="isLoading">
        <i class="fa fa-plus fa-spin"></i>
    </div>
</div>
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Gate Entry - With PO @{{locationName}}
                    <div class="float-right">
                        Entry Date and Time - {{entryDateTime | date:'dd/MM/yyyy HH:mm'}}
                    </div>
                </h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;">
                <div class="row">
                    <div class="col-sm-12">
                        <form #userForm="ngForm" (keydown.enter)="$event.preventDefault()">
                            <div class="row">
                                <div class="col-sm-2">
                                    <div class="form-group form-group-sm">
                                        <label for="fiscalyr">Financial Year</label>
                                        <input type="text" class="form-control" id="usrLName" placeholder="Financial Year" [(ngModel)]="fiscalYear"
                                            ngControl="fiscalYear" name="fiscalyr" readonly />

                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(!gatenumber.valid && gatenumber.touched)?'has-error':''">
                                        <label for="gatenumber"><i class="fa fa-times-circle-o"
                                                *ngIf="!gatenumber.valid && gatenumber.touched"></i>Gate
                                            No<span style="color:red">*</span></label>
                                        <select [(ngModel)]="selGateLocation" class="form-control" id="locationGate"
                                            name="locationGate" ngControl="selGateLocation" #gatenumber="ngModel"
                                            [disabled]="isEdit"  matTooltip="Select Gate No" required>
                                            <option [ngValue]="null" disabled [selected]="true">--Select an Option--
                                            </option>
                                            <option *ngFor="let gate of locationGateList" [ngValue]="gate">
                                                {{gate.gateNo}}</option>
                                        </select>
                                        <span class="help-block" *ngIf="!gatenumber.valid && gatenumber.touched">Please
                                            select Gate
                                            Number.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="!isEdit">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(!plantEnt.valid && plantEnt.touched)?'has-error':''">
                                        <label for="plant">Plant<span style="color:red">*</span></label>
                                        <select                                           
                                            [(ngModel)]="plant" class="form-control"
                                            id="plant" name="plant"  matTooltip="Select Plant"
                                            ngControl="plant" #plantEnt="ngModel"
                                            [disabled]="isEdit" required>
                                            <option [ngValue]="undefined" disabled>--Select an Option--</option>
                                            <option *ngFor="let gate of plantList" [ngValue]="gate.code">
                                                {{gate.code}}-{{gate.name}}</option>
                                        </select>
                                        <span class="help-block"
                                            *ngIf="!plantEnt.valid && plantEnt.touched">Please select delivery
                                            mode</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="isEdit">
                                    <div class="form-group form-group-sm">
                                        <label for="gI_No">GI #</label>
                                        <input type="text" class="form-control" id="giNO" [ngModel]="gateEntryMModel.gI_NO" name="GI_No"
                                            #giNoEnt="ngModel" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="!isEdit">
                                    <div class="form-group form-group-sm">
                                        <label for="pO_No">PO#<span style="color:red">*</span></label>
                                        <input type="text" class="form-control" id="pono" placeholder="PO #"
                                            [(ngModel)]="gePOInputsModel.purchaseorder" name="pO_No"  matTooltip="Enter PO Number"
                                            (change)="gePOInputsModel.purchaseorder=gePOInputsModel.purchaseorder.trim()"
                                            ngControl="gePOInputsModel.purchaseorder" #poidEnt="ngModel" (keydown.enter)="getPOInfoFromBAPI(gePOInputsModel)">
                                    </div>
                                </div>
                                <div class="col-1" style="margin-top: 2.3rem;" *ngIf="!isEdit">
                                    <button class="btn btn-primary btn-sm" matTooltip="Click to add PO"
                                        (click)="getPOInfoFromBAPI(gePOInputsModel);">Add PO</button>
                                </div>
                                <div class="col-1 mt-5">
                                    <div class="overlay" *ngIf="isLoadingBAPI">
                                        <i class="fa fa-spinner fa-pulse"></i>
                                    </div>
                                </div>
                            </div>
                            <hr class="m-3">
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm">
                                        <label for="inwardTime">Inward Time</label>
                                        <!-- <input [(ngModel)]="iN_TIME | date:'hh:MM:ss'" class="form-control"  id="inwardTime" readonly placeholder="Inward Time"
                      name="inwardTime" #inwardTimeEnt="ngModel"> -->
                                        <input name="inwardTime" class="form-control" value="{{iN_TIME | date:'dd/MM/yyyy, HH:mm'}}" readonly>
                                        <!-- <owl-date-time #dt1></owl-date-time> -->
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(persoN_NAMEEnt.touched && !persoN_NAMEEnt.valid)?'has-error':''">
                                        <label for="persoN_NAMEEnt">Received By<span style="color:red">*</span>
                                        </label>
                                        <input [(ngModel)]="gateEntryMModel.persoN_NAME" class="form-control"
                                            placeholder="Received By" id="persoN_NAME"  matTooltip="Enter person name"
                                            (keyup)="getpersonResponsible($event)"
                                            name="persoN_NAME" ngControl="gateEntryMModel.persoN_NAME" #persoN_NAMEEnt="ngModel"
                                            type="text" required [readonly]="isEdit">
                                        <span class="help-block"
                                            *ngIf="!persoN_NAMEEnt.valid && persoN_NAMEEnt.touched">Please Enter Person
                                            Name.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(docnumberEnt.touched && !docnumberEnt.valid)?'has-error':''">
                                        <label for="docnumberEnt">Invoice Number<span style="color:red">*</span>
                                        </label>
                                        <input [(ngModel)]="gateEntryMModel.doC_NO" class="form-control"
                                            placeholder="Invoice No" id="docnumber"  matTooltip="Enter Invoice No"
                                            (change)="gateEntryMModel.doC_NO=gateEntryMModel.doC_NO.trim()"
                                            name="docnumber" ngControl="gateEntryMModel.doC_No" #docnumberEnt="ngModel"
                                            type="text" required [readonly]="isEdit">
                                        <span class="help-block"
                                            *ngIf="!docnumberEnt.valid && docnumberEnt.touched">Please Enter Invoice
                                            Number.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(invoiceDate.touched && !invoiceDate.valid)?'has-error':''">
                                        <label for="invoiceDate">Invoice Date<span style="color:red">*</span>
                                        </label>
                                        <input [max]="maxDate" [owlDateTime]="dt3" #invoiceDate="ngModel" required matTooltip="Enter Invoice Date"
                                            [owlDateTimeTrigger]="dt3" name="docdate" class="form-control"
                                            [(ngModel)]="gateEntryMModel.doC_DATE" [readonly]="isEdit" placeholder="Invoice Date">
                                        <owl-date-time [pickerType]="'calendar'" #dt3>
                                        </owl-date-time>
                                        <span class="help-block"
                                            *ngIf="!invoiceDate.valid && invoiceDate.touched">Please Enter Invoice
                                            Date.</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm">
                                        <label for="supcode"> Supplier Code</label>
                                        <input [(ngModel)]="gateEntryHeaderModel.vendor" class="form-control"
                                            id="supcode" placeholder="Supplier Code" name="supcode"
                                            ngControl="gateEntryHeaderModel.vendor" #supcodEnte="ngModel" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm">
                                        <label for="supname"> Supplier Name</label>
                                        <input [(ngModel)]="gateEntryHeaderModel.venD_NAME" class="form-control"
                                            id="project" placeholder="Supplier Name" name="supname"
                                            ngControl="gateEntryHeaderModel.venD_NAME" #supnameEnt="ngModel" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm">
                                        <label for="supplace"> Supplier Place</label>
                                        <input [(ngModel)]="gateEntryHeaderModel.orT01" class="form-control"
                                            placeholder="Supplier Place" id="supplace" name="supplace"
                                            ngControl="gateEntryHeaderModel.orT01" #supplaceEnt="ngModel" readonly>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm">
                                        <label for="supcountry"> Supplier Country</label>
                                        <input [(ngModel)]="gateEntryHeaderModel.landx" class="form-control"
                                            id="supCountry" placeholder="Supplier Country" name="supCountry"
                                            ngControl="gateEntryHeaderModel.landx" #supCountryEnt="ngModel" readonly
                                            required>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                               
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(!deliverymode.valid && deliverymode.touched)?'has-error':''">
                                        <label for="DeliveryMode">Delivery Mode<span style="color:red">*</span></label>
                                        <select
                                            ng-init="gateEntryMModel.deliverymode = gateEntryMModel.deliverymode || 'none'"
                                            [(ngModel)]="gateEntryMModel.deliverymode" class="form-control"
                                            id="deliverymode" name="deliverymode"  matTooltip="Select delivery mode"
                                            ngControl="gateEntryMModel.deliverymode" #deliverymode="ngModel"
                                            [disabled]="isEdit" required>
                                            <option [ngValue]="undefined" disabled>--Select an Option--</option>
                                            <option>In Person</option>
                                            <option>Courier</option>
                                            <option>Vehicle</option>
                                        </select>
                                        <span class="help-block"
                                            *ngIf="!deliverymode.valid && deliverymode.touched">Please select delivery
                                            mode</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Courier'">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(courierName.touched && !courierName.valid)?'has-error':''">
                                        <label for="courierName">Courier Name<span style="color:red">*</span>
                                        </label>
                                        <input [(ngModel)]="gateEntryMModel.courier_Name" class="form-control"
                                            placeholder="Courier Name" id="courierName" name="courierName" matTooltip="Enter Courier Name"
                                            ngControl="gateEntryMModel.courier_Name" #courierName="ngModel" type="text"
                                            required [readonly]="isEdit">
                                        <span class="help-block"
                                            *ngIf="!courierName.valid && courierName.touched">Please Enter Courier
                                            Name.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Courier'">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(courierNum.touched && !courierNum.valid)?'has-error':''">
                                        <label for="courierNum">Docket No<span style="color:red">*</span>
                                        </label>
                                        <input [(ngModel)]="gateEntryMModel.courier_Num" class="form-control"
                                            placeholder="Docket #" id="courierNum" matTooltip="Enter Docket No"
                                            (change)="gateEntryMModel.courier_Num=gateEntryMModel.courier_Num.trim()"
                                            name="courierNum" ngControl="gateEntryMModel.courier_Num"
                                            #courierNum="ngModel" type="text" required [readonly]="isEdit">
                                        <span class="help-block" *ngIf="!courierNum.valid && courierNum.touched">Please
                                            Enter Docket
                                            Number.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Courier'">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(courierDate.touched && !courierDate.valid)?'has-error':''">
                                        <label for="courierDate">Docket Date<span style="color:red">*</span>
                                        </label>
                                        <input [max]="maxDate" [owlDateTime]="dt4" #courierDate="ngModel" required [readonly]="isEdit"
                                            [owlDateTimeTrigger]="dt4" name="courierDate" class="form-control" matTooltip="Enter Docket Date"
                                            [(ngModel)]="gateEntryMModel.courier_Date" placeholder="Docket Date">
                                        <owl-date-time [pickerType]="'calendar'" #dt4></owl-date-time>
                                        <span class="help-block"
                                            *ngIf="!courierDate.valid && courierDate.touched">Please Enter Docket
                                            Date.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='In Person'">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(deliveryperson.touched && !deliveryperson.valid)?'has-error':''">
                                        <label for="deliveryperson">Delivery Person Name<span style="color:red">*</span>
                                        </label>
                                        <input [(ngModel)]="gateEntryMModel.deliveryperson" class="form-control"
                                            required id="deliveryperson" placeholder="Delivery Person" matTooltip="Enter delivery person"
                                            name="deliveryperson" ngControl="gateEntryMModel.deliveryperson"
                                            #deliveryperson="ngModel" [readonly]="isEdit">
                                        <span class="help-block"
                                            *ngIf="!deliveryperson.valid && deliveryperson.touched">Please Enter
                                            Delivery Person
                                            Name.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Vehicle'">
                                    <div class="form-group form-group-sm"
                                        [ngClass]="(vehicleNoEnt.touched && !vehicleNoEnt.valid)?'has-error':''">
                                        <label for="vehicleNoEnt">Vehicle No<span style="color:red">*</span>
                                        </label>
                                        <input [(ngModel)]="gateEntryMModel.vehicleno" class="form-control" required
                                            id="vehicleNo" placeholder="Vehicle #" name="vehicleNo" matTooltip="Enter vehicle No"
                                            ngControl="gateEntryMModel.vehicleno" #vehicleNoEnt="ngModel" [readonly]="isEdit">
                                        <span class="help-block"
                                            *ngIf="!vehicleNoEnt.valid && vehicleNoEnt.touched">Please Enter Vehicle
                                            No.</span>
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Vehicle'">
                                    <div class="form-group form-group-sm">
                                        <label for="transporterNameEnt">Transporter Name </label>
                                        <input [(ngModel)]="gateEntryMModel.transporterName" class="form-control" 
                                            id="transporterName" placeholder="Transporter Name" name="transporterName" matTooltip="Enter Transporter Name"
                                            ngControl="gateEntryMModel.transporterName" #transporterNameEnt="ngModel"
                                            [readonly]="isEdit">
                                       </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Vehicle'">
                                    <div class="form-group form-group-sm">
                                        <label for="lrNoEnt">LR No</label>
                                        <input [(ngModel)]="gateEntryMModel.lrNo" class="form-control" 
                                            id="lrNo" placeholder="LR No" name="lrNo" matTooltip="Enter LR No"
                                            ngControl="gateEntryMModel.lrNo" #lrNoEnt="ngModel"
                                            [readonly]="isEdit">                                      
                                    </div>
                                </div>
                                <div class="col-sm-3" *ngIf="gateEntryMModel.deliverymode=='Vehicle'">
                                    <div class="form-group form-group-sm">
                                        <label for="driverNameEnt">Driver Name</label>
                                        <input [(ngModel)]="gateEntryMModel.driverName" class="form-control" 
                                            id="driverName" placeholder="Driver Name" name="driverName" matTooltip="Enter Driver Name"
                                            ngControl="gateEntryMModel.driverName" #driverNameEnt="ngModel"
                                            [readonly]="isEdit">                                     
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm">
                                        <label for="remarks">Remarks</label>
                                        <textarea [(ngModel)]="gateEntryMModel.remarks" class="form-control" maxlength="2000"
                                            id="remarks" placeholder="Remarks" name="remarks" matTooltip="Enter remarks"
                                            ngControl="gateEntryMModel.remarks" #remarksEnt="ngModel" [readonly]="isEdit"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="form-group form-group-sm" *ngIf="isEdit"
                                        [ngClass]="(reasonEnt.touched && !reasonEnt.valid)?'has-error':''">
                                        <label for="reason">Reason for Cancel<span style="color:red">*</span></label>
                                        <input [(ngModel)]="reason" class="form-control" id="reason" matTooltip="Enter reason for Cancellation"
                                            placeholder="Reason for Cancellation" name="reason" ngControl="reason"
                                            #reasonEnt="ngModel" maxlength="50" required>
                                        <span class="help-block" *ngIf="!reasonEnt.valid && reasonEnt.touched">Please
                                            Enter
                                            Reason.</span>
                                        <span style="color:red">Reason can allow most 50 characters only</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="table-responsive">
                                        <table id="personTable" class="table table-bordered" cellspacing="0"
                                            style="margin-bottom: 0px;">
                                            <thead>
                                                <tr>
                                                    <th>Sl.No</th>
                                                    <th>PO No.</th>
                                                    <th>PO Date</th>
                                                    <th>Material Code</th>
                                                    <th>Material Description</th>
                                                    <th>UOM</th>
                                                    <th>PO Qty</th>
                                                    <th>Qty Received</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let matrl of gateEntryMaterial; let rec=index">
                                                    <td>
                                                        {{rec+1}}
                                                    </td>
                                                    <td>
                                                        {{matrl.pO_NUMBER}}
                                                    </td>
                                                    <td>
                                                        {{matrl.pO_DATE | date:'dd/MM/yyyy'}}
                                                    </td>
                                                    <td>
                                                        {{matrl.puR_MAT}}
                                                    </td>
                                                    <td>
                                                        {{matrl.shorT_TEXT}}
                                                    </td>
                                                    <td>
                                                        {{matrl.unit}}
                                                    </td>
                                                    <td>
                                                        {{matrl.disP_QUAN}}
                                                    </td>
                                                    <td style="width:10%">
                                                        <div class="form-group form-group-sm"
                                                            [ngClass]="(balance.valid)?'has-error':''">
                                                            <input class="form-control" type="number" matTooltip="Enter received Quantity" [name]="'qtY_RCVD'+rec"
                                                                [(ngModel)]="matrl.qtY_RCVD" placeholder="Qty" (change)="validateQTY($event,matrl)" #balance [readonly]="isEdit"/>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <button type="button" class="btn btn-primary" (click)="onSaveEntry()" matTooltip="Click to Submit Details"
                    [disabled]="isLoadingPop ||!userForm.valid">{{isEdit==true?'Cancel Entry':'Save'}}</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;" matTooltip="Click to close modal"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>
            </div>
        </div>
    </div>
</div>
<!--Print Modal-->

<div class="modal fade" id="printModal" role="dialog" aria-labelledby="printModalLabel" aria-hidden="true"
  data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #68a7d2;color:white;">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">Gate Entry - With PO @{{locationName}}
        </h3>
      </div>
      <div class="modal-body box-primary" style="box-shadow: none;">
        <div class="container" id="print-section">
          <div class="row">
            <div class="col-sm-12">
              <div class="row">
                <div class="col-sm-12">
                  <div class="pull-left"><img src="../../assets/dist/img/micrologo.png"></div>
                  <div class="col-sm-7">
                    <h3 class="print-h1">Gate Entry - With PO</h3>
                  </div>
                  <div class="pull-right">
                    <ngx-barcode bc-value="{{gateEntryMModel.gI_NO}}" [bc-display-value]="true" [bc-element-type]="elementtype"
                      [bc-height]="80">
                    </ngx-barcode>
                  </div>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-12">
                  <div class="row">
                    <div class="col-sm-4">
                      <strong>Financial Year: </strong> {{gateEntryMModel.fiN_YEAR}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Invoice Number: </strong> {{gateEntryMModel.doC_NO}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Invoice Date: </strong>
                      {{gateEntryMModel.doC_DATE | date:'dd/MM/yyyy'}}
                    </div>
                    <div class="col-sm-4">
                        <strong>Plant: </strong> {{locationName}}
                      </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-4">
                      <strong>Supplier Code: </strong> {{gateEntryHeaderModel.vendor}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Supplier Name: </strong> {{gateEntryHeaderModel.venD_NAME}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Supplier Place: </strong> {{gateEntryHeaderModel.orT01}}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-4">
                      <strong>Supplier Country: </strong> {{gateEntryHeaderModel.landx}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Delivery Mode: </strong> {{gateEntryMModel.deliverymode}}
                    </div>
                    <div class="col-sm-4" *ngIf="gateEntryMModel.deliverymode=='Vehicle'">
                      <strong>Vehicle No: </strong> {{gateEntryMModel.vehicleno}}
                    </div>
                    <div class="col-sm-4" *ngIf="gateEntryMModel.deliverymode=='In Person'">
                      <strong>Delivery Person Name: </strong> {{gateEntryMModel.deliveryperson}}
                    </div>
                  </div>
                  <div class="row" *ngIf="gateEntryMModel.deliverymode=='Courier'">
                    <div class="col-sm-4">
                      <strong>Courier Name: </strong> {{gateEntryMModel.courier_Name}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Docket No: </strong> {{gateEntryMModel.courier_Num}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Docket Date: </strong> {{gateEntryMModel.courier_Date | date:'dd/MM/yyyy'}}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-4">
                      <strong>Inward Date&Time: </strong>
                      {{gateEntryMModel.iN_TIME | date:'dd/MM/yyyy, HH:mm'}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Received By: </strong> {{gateEntryMModel.persoN_NAME}}
                    </div>
                    <div class="col-sm-4">
                      <strong>Gate No: </strong> {{gateEntryMModel.gI_GATENO}}
                    </div>
                  </div>
                  <div class="row mt-4">
                    <div class="col-sm-12">
                      <div class="table-responsive">
                        <table class="table table-bordered printtable" cellspacing="0">
                          <thead>
                            <tr>
                              <th>Sl.No</th>
                              <th>PO No.</th>
                              <th>PO Date</th>
                              <th>Material Code</th>
                              <th>Material Description</th>
                              <th>UOM</th>
                              <th>PO Qty</th>
                              <th>Qty Received</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let matrl of gateEntryMaterial; let rec=index">
                              <td>
                                {{rec+1}}
                              </td>
                              <td style="text-align: end;">
                                {{matrl.pO_NUMBER}}
                              </td>
                              <td style="text-align: end;">
                                {{matrl.pO_DATE | date:'dd/MM/yyyy'}}
                              </td>
                              <td>
                                {{matrl.puR_MAT}}
                              </td>
                              <td>
                                {{matrl.shorT_TEXT}}
                              </td>
                              <td>
                                {{matrl.unit}}
                              </td>
                              <td style="text-align: end;">
                                {{matrl.disP_QUAN}}
                              </td>
                              <td style="text-align: end;">
                                {{matrl.qtY_RCVD}}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="overlay" *ngIf="isLoadingPop">
          <i class="fa fa-spinner fa-pulse"></i>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="print()">Print</button>
        <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
          data-dismiss="modal" [disabled]="isLoadingPop">Close</button>
      </div>
    </div>
  </div>
</div>
