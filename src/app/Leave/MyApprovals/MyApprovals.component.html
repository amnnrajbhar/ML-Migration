<section class="content-header">
    <h1 class="display-1">
        My Approvals
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
        <li class="active">Approvals</li>
    </ol>
</section>
<section class="content">
    &nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;
    <div class="box">
        <div class="box-body">
            <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                <div class="col-xs-6">
                    <h3 class="box-title"><strong> My Approvals</strong></h3>
                </div>
            </div>
            &nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;
            <div class="col-sm-12">
                <div class="row">
                    <div class="col-sm-3">
                        <label for="calyear">CalenderYear</label>
                        <input type="number" [(ngModel)]="CalYear" class="form-control" id="year" placeholder="Year"
                            name="year" ngControl="CalYear" #calYear1Ent="ngModel" (change)="GetRequests()">
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="Request">Request Type <span style="color: red;">*</span> </label>
                            <select [(ngModel)]="filterRequest" class="form-control" id="Request" name="Request"
                                matTooltip="Request" #RequestEnt="ngModel" (change)="GetRequests()" required>
                                <option [ngValue]="null" disabled [selected]="true">-- Select Request type--
                                </option>
                                <option>Leave</option>
                                <option>Cancel Leave</option>
                                <option>OnDuty</option>
                                <option>Cancel OnDuty</option>
                                <option>Permission</option>
                                <option>Regularization</option>
                                <option>Payroll Regularization</option>
                                <option>OverTime</option>
                                <option>CompOff</option>
                                <option>Change Shift Request</option>
                                <option>HR Queries</option>
                                <option>Tour Plan</option>
                            </select>
                            <span class="help-block" *ngIf="!RequestEnt.valid && RequestEnt.touched">Please select
                                Request Type.</span>
                        </div>
                    </div>
                    <div class="col-sm-3" *ngIf="filterRequest != 'HR Queries'">
                        <div class="form-group">
                            <label for="status">Filter By<span style="color: red;">*</span> </label>
                            <select [(ngModel)]="filterStatus" class="form-control" id="status" name="status"
                                matTooltip="status" #statusEnt="ngModel" (change)="GetRequests()" required>
                                <option [ngValue]="null" disabled [selected]="true"> --Select Filter By--
                                </option>
                                <option>Pending</option>
                                <option>Approved</option>
                                <option>Rejected</option>
                            </select>
                            <span class="help-block" *ngIf="!statusEnt.valid && statusEnt.touched">Please select
                                status.</span>
                        </div>
                    </div>
                    <div class="col-sm-3" *ngIf="filterRequest == 'HR Queries'">
                        <div class="form-group">
                            <label for="status">Filter By<span style="color: red;">*</span> </label>
                            <select [(ngModel)]="filterStatus" class="form-control" id="status" name="status"
                                matTooltip="status" #statusEnt="ngModel" (change)="GetRequests()" required>
                                <option [ngValue]="null" disabled [selected]="true"> --Select Filter By--
                                </option>
                                <option>Open</option>
                                <option>Closed</option>
                            </select>
                            <span class="help-block" *ngIf="!statusEnt.valid && statusEnt.touched">Please select
                                status.</span>
                        </div>
                    </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;
                <div class="row" *ngIf="filterStatus == 'Pending'">
                    <div class="col-sm-3">
                        <button class="btn btn-success" (click)="MassApprove('Approved');"
                            *ngIf="filterRequest != 'HR Queries'"
                            [disabled]="isLoadingPop || (!checkedRequestList.length>0)" matTooltip="click to approve"><i
                                class="fas fa-thumbs-up"></i>&nbsp; Approve</button>
                        &nbsp;&nbsp;&nbsp;
                        <button class="btn btn-danger" (click)="MassApprove('Rejected');"
                            *ngIf="filterRequest != 'HR Queries'"
                            [disabled]="isLoadingPop || (!checkedRequestList.length>0)" matTooltip="click to reject"><i
                                class="fas fa-ban"></i>&nbsp; Reject</button>
                    </div>
                </div>
                &nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;

                <div class="box-body table-responsive " *ngIf="filterRequest=='Leave' || filterRequest=='Cancel Leave'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Requested By</th>
                                <th>Leave Type</th>
                                <th>Request Date</th>
                                <th>From Date</th>
                                <th>Duration #</th>
                                <th>To Date</th>
                                <th>Duration</th>
                                <th>No of Days</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td>
                                    <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.approvelStatus == 'Pending' && filterRequest=='Leave' ">
                                    <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.approvelStatus == 'Cancellation Applied' && filterRequest=='Cancel Leave'">
                                </td>

                                <td>{{i+1}}</td>
                                <td>{{categ.reqId}}</td>
                                <td>{{categ.empName}}</td>
                                <td>{{categ.leaveType}}</td>
                                <td>{{categ.submitDate}}</td>
                                <td>{{categ.startDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.startDuration}}</td>
                                <td>{{categ.endDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.endDuration}}</td>
                                <td>{{categ.noOfDays}}</td>
                                <td>{{categ.approvelStatus}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td
                                                *ngIf="categ.approvelStatus=='Pending' || categ.approvelStatus == 'Cancellation Applied'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="getEmpleaveRequests(categ.userId)"
                                                    matTooltip="Click to see Historical leave details">
                                                    <i class="fas fa-history"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive "
                    *ngIf="filterRequest=='OnDuty'  || filterRequest=='Cancel OnDuty'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Requester Name</th>
                                <th>OnDuty Type</th>
                                <th>Plant</th>
                                <th>Request Date</th>
                                <th>Start Date</th>
                                <th>Start Time</th>
                                <th>End Date</th>
                                <th>End Time</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td>
                                    <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="(categ.approverStatus == 'Pending' || categ.approverStatus == 'In Process' )
                                         && filterRequest=='OnDuty' ">
                                    <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.approverStatus == 'Cancellation Applied' && filterRequest=='Cancel OnDuty'">
                                </td>
                                <td>{{i+1}}</td>
                                <td>{{categ.requestNo}}</td>
                                <td>{{categ.empName}}</td>
                                <td>{{categ.onDutyType}}</td>
                                <td>{{categ.location}}</td>
                                <td>{{categ.submitDate | date:'dd/MM/yyyy hh:mm a'}}</td>
                                <td>{{categ.startDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{binddatetime1(categ.startTime) | date:'hh:mm a'}}</td>
                                <td>{{categ.endDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{binddatetime1(categ.endTime) | date:'hh:mm a'}}</td>
                                <td>{{categ.approverStatus}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td
                                                *ngIf="categ.approverStatus=='In Process' || categ.approverStatus == 'Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive " *ngIf="filterRequest=='Permission'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Requester Name</th>
                                <th>Applied On</th>
                                <th>Applied For</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Attendance Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.approverStatus == 'Pending' && categ.pendingApprover == currentUser.fullName">
                                </td>
                                <td>{{i+1}}</td>
                                <td>{{categ.requestNo}}</td>
                                <td>{{categ.empName}}</td>
                                <td>{{categ.submitDate | date:'dd/MM/yyyy hh:mm a'}}</td>
                                <td>{{categ.date | date:'dd/MM/yyyy'}}</td>
                                <td>{{binddatetime1(categ.startTime) | date:'hh:mm a'}}</td>
                                <td>{{binddatetime1(categ.endTime) | date:'hh:mm a'}}</td>
                                <td>{{categ.type}}</td>
                                <td>{{categ.approverStatus}}</td>
                                <td>{{categ.attendanceStatus==0?'Pending for Approval':'Considered'}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td
                                                *ngIf="categ.approverStatus=='Pending' && categ.pendingApprover == currentUser.fullName">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive" *ngIf="filterRequest == 'Regularization'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Request Date</th>
                                <th>Requested By</th>
                                <th>Regularization Date</th>
                                <th>Regularization Type</th>
                                <th>Reason</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.status == 'Pending'">
                                </td>
                                <td>{{i+1}}</td>
                                <td>{{categ.requestNo}}</td>
                                <td>{{categ.requestDate | date:'dd/MM/yyyy hh:mm a'}}</td>
                                <td>{{categ.empName}}</td>
                                <td>{{categ.date | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.swipeType}}</td>
                                <td>{{categ.reason}}</td>
                                <td>{{categ.status}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td *ngIf="categ.status=='Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive" *ngIf="filterRequest == 'Payroll Regularization'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Request Date</th>
                                <th>Regularization Date</th>
                                <th>Swipe Type</th>
                                <th>Reason</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th>Approved Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList; let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.status == 'Pending'">
                                </td>
                                <td>{{i+1}}</td>
                                <td>{{categ.requestNo}}</td>
                                <td>{{categ.requestDate | date:'dd/MM/yyyy hh:mm:ss a'}}</td>
                                <td>{{categ.date | date:'dd/MM/yyyy' }}</td>
                                <td>{{categ.swipeType}}</td>
                                <td>{{categ.reason}}</td>
                                <td>{{categ.status}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>{{categ.approvedDate | date:'dd/MM/yyyy hh:mm:ss a'}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td *ngIf="categ.status=='Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive " *ngIf="filterRequest=='CompOff'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Applied On</th>
                                <th>Applied For</th>
                                <th>From Date</th>
                                <th>Reason</th>
                                <th>Comp Off Type</th>
                                <th>No Of Hours</th>
                                <th>Applicable</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.apprvrStatus == 'Pending'">
                                </td>
                                <td>{{i+1}}</td>
                                <td>{{categ.reqNo}}</td>
                                <td>{{categ.requestedDate | date:'dd/MM/yyyy hh:mm a'}}</td>
                                <td>{{categ.pernr}}</td>
                                <td>{{categ.fromDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.reason}}</td>
                                <td>{{categ.compType}}</td>
                                <td>{{categ.noHrs}}</td>
                                <td>{{categ.applicabale=='BS'?'Before Shift Time':'After Shift Time'}}</td>
                                <td>{{categ.apprvrStatus}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td class="pr-2">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td *ngIf="categ.apprvrStatus=='Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive " *ngIf="filterRequest=='OverTime'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-sm-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Applied On</th>
                                <th>Applied For</th>
                                <th>From Date</th>
                                <th>Reason</th>
                                <th>No. of Hours</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.apprvrStatus == 'Pending'">
                                </td>
                                <td>{{i+1}}</td>
                                <td>{{categ.reqNo}}</td>
                                <td>{{categ.requestedDate | date:'dd/MM/yyyy hh:mm a'}}</td>
                                <td>{{categ.pernr}}</td>
                                <td>{{categ.fromDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.reason}}</td>
                                <td>{{categ.noHRS}}</td>
                                <td>{{categ.apprvrStatus}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td class="pr-2">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td *ngIf="categ.apprvrStatus=='Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive " *ngIf="filterRequest=='Change Shift Request'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th>Request No</th>
                                <th>Applied On</th>
                                <th>Applied By</th>
                                <th>From Date</th>
                                <th>To Date</th>
                                <th>Reason</th>
                                <th>Status</th>
                                <th>Pending With</th>
                                <th>Approved By</th>
                                <th class="col-sm-1">View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.approvalStatus == 'Pending'">
                                </td>
                                <td>{{categ.reqNo}}</td>
                                <td>{{categ.requestedDate | date:'dd/MM/yyyy hh:mm:ss'}}</td>
                                <td>{{categ.requestedBy}}</td>
                                <td>{{categ.fromDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.toDate | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.reason}}</td>
                                <td>{{categ.approvalStatus}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.approverId}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td class="pr-2">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                &nbsp;
                                            <td *ngIf="categ.approvalStatus=='Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>

                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive " *ngIf="filterRequest=='HR Queries'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>Request No.</th>
                                <th>Request Date</th>
                                <th>Requested By</th>
                                <th>Subject</th>
                                <th>Category</th>
                                <th>Description</th>
                                <th>Pending Approver</th>
                                <th>Last Approver</th>
                                <th>Status</th>
                                <th class="col-sm-1">View</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td><b>{{categ.id}}</b></td>
                                <td>{{categ.reqDate | date:'dd/MM/yyyy hh:mm'}}</td>
                                <td>{{categ.reqBy}}</td>
                                <td>{{categ.subject}}</td>
                                <td>{{categ.category}}</td>
                                <td>{{categ.description}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>{{categ.status}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td class="pr-2">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                &nbsp;
                                            <td *ngIf="categ.status=='Open'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>

                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="box-body table-responsive " *ngIf="filterRequest=='Tour Plan'">
                    <table id="userTable" class="table table-bordered  table-striped" cellspacing="0">
                        <thead style="background-color: #0099cc; color:white;">
                            <tr>
                                <th>
                                    <input type="checkbox" [(ngModel)]="isMasterSel" name="list_name"
                                        (change)="checkUncheckAll()">
                                    &nbsp;&nbsp;&nbsp;
                                    <label for="selectall">Select All</label>
                                </th>
                                <th class="col-xs-1">Sl.No</th>
                                <th>Request No</th>
                                <th>Requested By</th>
                                <th>Requested Date</th>
                                <th>Date</th>
                                <th>Duration</th>
                                <th>Type Of Work</th>
                                <th>Details</th>
                                <th>Approver Status</th>
                                <th>Pending Approver</th>
                                <th>Last Approver</th>
                                <th>Approved Date</th>
                                <th> </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let categ of MyApprovalsList;  let i = index">
                                <td> <input type="checkbox" [id]="'chkusage'+categ.id" [name]="'send'+categ.id"
                                        [(ngModel)]="categ.isSelected" (change)="isAllSelected()" #usageEnt="ngModel"
                                        *ngIf="categ.approverStatus == 'Pending'">
                                </td>
                                <td>{{i+1}}</td>
                                <td><b>{{categ.id}}</b></td>
                                <td>{{categ.reqBy}}</td>
                                <td>{{categ.reqOn | date:'dd/MM/yyyy hh:mm:ss'}}</td>
                                <td>{{categ.date | date:'dd/MM/yyyy'}}</td>
                                <td>{{categ.duration}}</td>
                                <td>{{categ.typeOfWork}}</td>
                                <td>{{categ.details}}</td>
                                <td>{{categ.approverStatus}}</td>
                                <td>{{categ.pendingApprover}}</td>
                                <td>{{categ.lastApprover}}</td>
                                <td>{{categ.approvedDate| date:'dd/MM/yyyy'}}</td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'View')"
                                                    matTooltip="Click to view details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                            </td>
                                            &nbsp;
                                            <td *ngIf="categ.approverStatus=='Pending'">
                                                <button type="button" class="btn btn-info btn-xs"
                                                    (click)="ApproveRequest(true,categ,'')"
                                                    matTooltip="Click to edit details">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row">
                    <label><strong> <span style="color: red;"> #</span> FD : Full Day, FH : First Half, SH : Second
                            Half</strong></label>
                </div>
            </div>
        </div>

    </div>

    <div class="overlay" *ngIf="isLoading">
        <i class="fa fa-spinner fa-pulse"></i>
    </div>

</section>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Approve OnDuty Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #onDutyForm="ngForm">
                    <div class="col-sm-12">
                        &nbsp; &nbsp; &nbsp;
                        <div class="row" *ngIf="filterRequest=='Cancel OnDuty'">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #15b5ff;">
                                    <td colspan="4" style="text-align: center; width: 100%;">
                                        <strong><b>Employee Punch Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: hsl(204, 100%, 70%);">
                                    <th><b>Worked Date</b></th>
                                    <th><b>In Timing</b></th>
                                    <th><b>Out Timing</b></th>
                                    <th><b>Status</b></th>
                                </tr>
                                <tr *ngFor="let ty of EmpPunchList; let i = index">
                                    <td>{{ty.Date | date:'dd/MM/yyyy'}}</td>
                                    <td>{{ty.numberOfDays}}</td>
                                    <td>{{ty.compOffBalance}}</td>
                                    <td>{{ty.lapsBydate | date:'dd/MM/yyyy'}}</td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong><b>Total</b></strong>
                                    </td>
                                    <td>{{totNoDays}}</td>
                                    <td>{{totCobal}}</td>
                                    <td> </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="OnDutyType">OnDuty Type <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="OnDutyType" class="form-control" id="OnDutyType"
                                        name="OnDutyType" matTooltip="OnDuty Type" #OnDutyTypeEnt="ngModel"
                                        [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select OnDuty Type
                                        </option>
                                        <option *ngFor="let pl of ReasonListOD" value={{pl.detailedReason}}>
                                            {{pl.detailedReason}}
                                        </option>
                                    </select>
                                    <span class="help-block"
                                        *ngIf="!OnDutyTypeEnt.valid && OnDutyTypeEnt.touched">Please select
                                        OnDuty
                                        Type .</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="location">Plant <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Plant" class="form-control" id="location" name="location"
                                        matTooltip="Plant" #locationEnt="ngModel" [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Plant
                                        </option>
                                        <option *ngFor="let pl of locationList" value={{pl.code}}>
                                            {{pl.code}}-{{pl.name}}</option>
                                    </select>
                                    <span class="help-block" *ngIf="!locationEnt.valid && locationEnt.touched">Please
                                        select
                                        plant.</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startDate">
                                        Start Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="startDate" name="startDate" class="form-control"
                                            [(ngModel)]="fromDate" [min]="min" [owlDateTime]="dtStart"
                                            [owlDateTimeTrigger]="dtStart" [matTooltipPosition]="'below'"
                                            matTooltip="Click to change startDate" #startDate1="ngModel"
                                            [disabled]="isEdit" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtStart">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtStart></owl-date-time>
                                    <span class="help-block" *ngIf="!startDate1.valid && startDate1.touched">Please
                                        enter valid Start
                                        Date.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startTime">
                                        In Time <span style="color:red">*</span>
                                    </label>
                                    <input #startTime1="ngModel" [matTooltipPosition]="'below'"
                                        matTooltip="Click to change Start Time" [owlDateTime]="dt2"
                                        [owlDateTimeTrigger]="dt2" id="startTime" name="startTime" class="form-control"
                                        onkeydown="return false;" [(ngModel)]="fromTime" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'timer'" hour12Timer="true" #dt2></owl-date-time>
                                    <span class="help-block" *ngIf="!startTime1.valid && startTime1.touched">Please
                                        enter valid Start
                                        Time.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="endDate">
                                        End Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="endDate" name="endDate" class="form-control" [(ngModel)]="toDate"
                                            [min]="min" [owlDateTime]="dtEnd" [owlDateTimeTrigger]="dtEnd"
                                            [matTooltipPosition]="'below'" matTooltip="Click to change End Date"
                                            #endDate1="ngModel" [disabled]="isEdit" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtEnd">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtEnd></owl-date-time>
                                    <span class="help-block" *ngIf="!endDate1.valid && endDate1.touched">Please enter
                                        valid End Date.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="endTime">
                                        Out Time <span style="color:red">*</span>
                                    </label>
                                    <input #endTime1="ngModel" [matTooltipPosition]="'below'"
                                        matTooltip="Click to change End Time" [owlDateTime]="dt4"
                                        [owlDateTimeTrigger]="dt4" id="endTime" name="endTime" class="form-control"
                                        onkeydown="return false;" [(ngModel)]="toTime" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'timer'" hour12Timer="true" #dt4></owl-date-time>
                                    <span class="help-block" *ngIf="!endTime1.valid && endTime1.touched ">Please
                                        enter valid End Time.</span>
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="lvaddress">Address during OnDuty</label>
                                    <textarea name="lvaddress" id="lvaddress" maxlength="150" matTooltip="Address"
                                        [(ngModel)]="OnDutyAddress" class="form-control" [disabled]="isEdit"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="lvcontact">Contact Number </label>
                                    <input type="text" name="lvcontact" id="lvcontact" [(ngModel)]="OnDutyContactNo"
                                        class="form-control" matTooltip="Contact Number" [disabled]="isEdit"
                                        #lvcontactEnt="ngModel">
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="person">Person responsible in my absence</label>
                                    <input type="text" name="personName" id="personName"
                                        (keyup)="getpersonResponsible($event)" [(ngModel)]="personName"
                                        class="form-control" matTooltip="Person Responsible" [disabled]="isEdit"
                                        #responsibleEnt="ngModel">
                                    <input type="hidden" id="person" class="form-control"
                                        (keyup)="getpersonResponsible($event)" [(ngModel)]="personResponsible"
                                        ngControl="personResponsible" name="person" />
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (max 300 char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="30" rows="5"
                                        maxlength="300" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments </label>
                                    <textarea name="comments" id="comments" cols="30" rows="3" maxlength="300"
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"
                                        [disabled]="view"></textarea>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <div class="box">
                                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                                    <div class="col-xs-6">
                                        <h3 class="box-title">Attachments</h3>
                                    </div>
                                </div>
                                <br>
                                <div class="box-body">
                                    <div class="row" *ngFor="let attach of fileslist1">
                                        <div class="col-sm-12">
                                            <label for="attachments"></label><a
                                                (click)="downloadFileOnDuty(reqNo,attach);"
                                                style="cursor: pointer;text-decoration: underline; color: #68a7d2;"
                                                [matTooltipPosition]="'below'"
                                                matTooltip="Click to download the file">{{attach}}</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 30%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of ApproversList; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>

                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!onDutyForm.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!onDutyForm.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>

    </div>

</div>

<div class="modal fade" id="perModal" tabindex="-1" role="dialog" aria-labelledby="perModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Permission Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm1="ngForm">
                    <div class="col-sm-12">
                        <div class="row" *ngIf="showAttendance">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="7" style="width: 100%; text-align: center;">
                                        <strong><b>Attendance Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 15%;">Date</th>
                                    <th style="width: 10%;">Day</th>
                                    <th style="width: 15%;">In Time</th>
                                    <th style="width: 15%;">Out Time</th>
                                    <th style="width: 15%;">In Status</th>
                                    <th style="width: 15%;">Out Status</th>
                                    <th style="width: 15%;">Note</th>
                                </tr>
                                <tr *ngFor="let ty of attendanceDetails; let i = index">
                                    <td>{{ty.date1}}</td>
                                    <td>{{ty.day}}</td>
                                    <td>{{ty.inTime}}</td>
                                    <td>{{ty.outTime}}</td>
                                    <td>{{ty.inStatus}}</td>
                                    <td>{{ty.outStatus}}</td>
                                    <td>{{ty.remarks}}</td>
                                </tr>
                            </table>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startDate">
                                        Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="startDate" name="startDate" class="form-control"
                                            [(ngModel)]="fromDate" [min]="min" [owlDateTime]="dtStart1"
                                            [owlDateTimeTrigger]="dtStart1" [matTooltipPosition]="'below'"
                                            matTooltip="Click to change startDate" #startDate1="ngModel"
                                            [disabled]="isEdit" (change)="getAttendanceDetails()" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtStart">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtStart1></owl-date-time>
                                    <span class="help-block" *ngIf="!startDate1.valid && startDate1.touched">Please
                                        enter Date.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="lvType">Swipe Type <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="SwipeType" class="form-control" id="lvType" name="lvType"
                                        matTooltip="Leave Type" #lvTypeEnt="ngModel" (change)="getAttendanceDetails()"
                                        [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Leave Type
                                        </option>
                                        <option>In</option>
                                        <option>Out</option>
                                    </select>
                                    <span class="help-block" *ngIf="!lvTypeEnt.valid && lvTypeEnt.touched">Please select
                                        Swipe
                                        Type .</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startTime">
                                        In Time <span style="color:red">*</span>
                                    </label>
                                    <input #startTime1="ngModel" [matTooltipPosition]="'below'"
                                        matTooltip="Click to change Start Time" [owlDateTime]="dt21"
                                        [owlDateTimeTrigger]="dt21" id="startTime" name="startTime" class="form-control"
                                        onkeydown="return false;" [(ngModel)]="fromTime" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'timer'" hour12Timer="true" #dt21></owl-date-time>
                                    <span class="help-block" *ngIf="!startTime1.valid && startTime1.touched">Please
                                        enter valid Start
                                        Time.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="endTime">
                                        Out Time <span style="color:red">*</span>
                                    </label>
                                    <input #endTime1="ngModel" [matTooltipPosition]="'below'"
                                        matTooltip="Click to change End Time" [owlDateTime]="dt41"
                                        [owlDateTimeTrigger]="dt41" id="endTime" name="endTime" class="form-control"
                                        onkeydown="return false;" [(ngModel)]="toTime" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'timer'" hour12Timer="true" #dt41></owl-date-time>
                                    <span class="help-block" *ngIf="!endTime1.valid && endTime1.touched ">Please
                                        enter valid End Time.</span>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (max 300 char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="30" rows="5"
                                        maxlength="300" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments</label>
                                    <textarea name="comments" id="comments" cols="30" rows="3" maxlength="300"
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"
                                        [disabled]="view"></textarea>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;

                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 20%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of ApproversListForPM; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <!-- <button *ngIf="!view" type="button" class="btn btn-primary" (click)="InsertPermission('Draft')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Save Draft</button> -->
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm1.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm1.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>

    </div>

</div>

<div class="modal fade" id="CoModal" tabindex="-1" role="dialog" aria-labelledby="CoModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Comp Off Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="startDate">
                                        Worked Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="startDate" name="startDate" class="form-control"
                                            [(ngModel)]="fromDate" [min]="min" [owlDateTime]="dtStart6"
                                            [owlDateTimeTrigger]="dtStart6" [matTooltipPosition]="'below'"
                                            matTooltip="Click to change startDate" #startDate1="ngModel"
                                            [disabled]="isEdit" (change)="getAttendanceDetails()" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtStart">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtStart6></owl-date-time>
                                    <span class="help-block" *ngIf="!startDate1.valid && startDate1.touched">Please
                                        enter Date.</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="compoff"> Comp Off Type <span style="color: red;"> *</span> </label>
                                    <select [(ngModel)]="compofftype" class="form-control" id="compoff" name="compoff"
                                        matTooltip="Comp Off Type" #compoff1Ent="ngModel" disabled required>
                                        <option [ngValue]="undefined" disabled [selected]="true"> --Select --
                                        </option>
                                        <option>Absence of reliever</option>
                                        <option>Additional Work</option>
                                        <option>Urgency of work</option>
                                        <option>Other</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label for="shift"> Shift</label>
                                    <select [(ngModel)]="AssignedShift" class="form-control" id="shift" name="shift"
                                        matTooltip="shift" #shiftEnt="ngModel" [disabled]="isEdit">
                                        <option [ngValue]="undefined" disabled [selected]="true"> Select shift </option>
                                        <option *ngFor="let pl of ShiftList" [ngValue]="pl.shiftCode">
                                            {{pl.shiftCode}}-{{pl.shiftName}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (max 300 char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="40" rows="3"
                                        maxlength="300" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-3">
                                        <label for="inTiming">In Time: </label>
                                        <input type="text" [(ngModel)]="inTime" class="form-control" id="inTiming"
                                            placeholder="In Punch" name="inTiming" [disabled]="isEdit"
                                            ngControl="inTime" #inTimeEnt="ngModel">
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="outTiming">Out Time: </label>
                                        <input type="text" [(ngModel)]="outTime" class="form-control" id="outTiming"
                                            placeholder="Out Punch" name="outTiming" [disabled]="isEdit"
                                            ngControl="outTime" #outTimeEnt="ngModel">
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="statusTo">Status: </label>
                                        <input type="text" [(ngModel)]="status" class="form-control" id="statusTo"
                                            placeholder="Status" name="statusTo" [disabled]="isEdit" ngControl="outTime"
                                            #statusToEnt="ngModel">
                                    </div>
                                    <div class="col-sm-3">
                                        <label for="totalHours">Total: </label>
                                        <input type="text" [(ngModel)]="totHours" class="form-control" id="totalHours"
                                            placeholder="Total Hours" name="totalHours" [disabled]="isEdit"
                                            ngControl="totHours" #totHoursEnt="ngModel">
                                    </div>
                                </div>
                            </div>
                            <br>
                            <br>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="table-responsive">
                                        <button title="Add Rows" [matTooltipPosition]="'below'"
                                            matTooltip="Click to Add more Rows" (click)="addRows(rec);"
                                            class="btn btn-info btn-xs pull-right" *ngIf="!isEdit">
                                            <i class="fa fa-plus"></i></button>
                                        <table id="personTable" class="table table-bordered" cellspacing="0"
                                            style="margin-bottom: 0px;">
                                            <thead>
                                                <tr>
                                                    <th>Sl. No</th>
                                                    <th>Employee No</th>
                                                    <th>Name</th>
                                                    <th>Department</th>
                                                    <th>Designation</th>
                                                    <th>Role</th>
                                                    <th>DOJ</th>
                                                    <th>No. of Hours</th>
                                                    <th>Applicable</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let per of dynamicArray; let rec=index">
                                                    <td>
                                                        <label>{{rec+1}}.</label>
                                                    </td>
                                                    <td style="width:12%">
                                                        <input class="form-control suggestion" type="text"
                                                            [name]="'empNo'+per.id" [(ngModel)]="per.empNo"
                                                            placeholder="Employee No" [value]="per.empNo" maxlength="18"
                                                            [id]="'empNo'+per.id" (input)="GetEmpDetails(per)"
                                                            [disabled]="isEdit" required />
                                                    </td>
                                                    <td>
                                                        <input class="form-control suggestion" type="text"
                                                            [name]="'Name'+per.id" [(ngModel)]="per.Name"
                                                            placeholder="Name" [value]="per.Name" [id]="'Name'+per.id"
                                                            readonly required />
                                                    </td>
                                                    <td style="width:20%">
                                                        <input class="form-control" type="text" [name]="'Dept'+per.id"
                                                            [(ngModel)]="per.Dept" [readonly]="per.material_Type==null"
                                                            placeholder="Department" [value]="per.Dept"
                                                            [id]="'Dept'+per.id" readonly />
                                                    </td>
                                                    <td style="width:20%">
                                                        <input class="form-control" type="text" [name]="'Desig'+per.id"
                                                            [(ngModel)]="per.Desig" [readonly]="per.material_Type==null"
                                                            placeholder="Designation" [value]="per.Desig"
                                                            [id]="'Desig'+per.id" readonly />
                                                    </td>
                                                    <td>
                                                        <input class="form-control" type="text" [name]="'Role'+per.id"
                                                            [(ngModel)]="per.Role" [readonly]="per.material_Type==null"
                                                            placeholder="Role" [value]="per.Role" [id]="'Role'+per.id"
                                                            readonly />
                                                    </td>
                                                    <td>
                                                        <input class="form-control" type="text" [name]="'DOJ'+per.id"
                                                            value="{{per.DOJ | date:'dd/MM/yyyy'}}" placeholder="DOJ"
                                                            disabled />
                                                    </td>
                                                    <td style="width:10%">
                                                        <select [(ngModel)]="per.NoHrs" class="form-control"
                                                            [name]="'NoHrs'+per.id" matTooltip="Select NoHrs"
                                                            #NoHrsEnt="ngModel" [disabled]="isEdit" required>
                                                            <option value=null>-Select-</option>
                                                            <option value="4">4 Hours</option>
                                                            <option value="8">8 Hours</option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <select [(ngModel)]="per.applicable" class="form-control"
                                                            [name]="'applicable'+per.id" matTooltip="Select applicable"
                                                            #applicableEnt="ngModel" [disabled]="isEdit" required>
                                                            <option value=null>-Select-</option>
                                                            <option value="BS">Before Shift Start Time</option>
                                                            <option value="AS">After Shift End Time</option>
                                                        </select>
                                                    </td>
                                                    <td style="width:2%">
                                                        <button title="Remove Details" (click)="removeRows(per);"
                                                            class="btn btn-secondary" matTooltip="click to remove"
                                                            [disabled]="isEdit">
                                                            <i class="fa fa-trash"></i></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <br>
                            <div class="row">
                                <h3><b><u>Update Comp-Off Details: </u></b></h3>
                                <div class="col-sm-12">
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label for="updNoofhours">No. Of Hours</label>
                                            <select name="updNoofhours" id="updNoofhours" matTooltip="updNoofhours"
                                                [(ngModel)]="updatedNoofHours" [disabled]="view" class="form-control">
                                                <option [ngValue]="undefined" disabled [selected]="true">--Select--
                                                </option>
                                                <option value="4">4 Hours</option>
                                                <option value="8">8 Hours</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                            <label for="updatedApplicable">Applicable</label>
                                            <select name="updatedApplicable" id="updatedApplicable"
                                                matTooltip="updatedApplicable" [(ngModel)]="updatedApplicable"
                                                [disabled]="view" class="form-control">
                                                <option [ngValue]="undefined" disabled [selected]="true">--Select--
                                                </option>
                                                <option value="BS">Before Shift Start Time</option>
                                                <option value="AS">After Shift End Time</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group">
                                        </div>
                                        <label for="updateNew"> Update Hours / Applicable: </label>
                                        &nbsp;
                                        <button type="button" class="btn btn-success" [disabled]="view"
                                            (click)="updateNew();">
                                            Update</button>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <br>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label for="comments">Comments</label>
                                        <textarea name="comments" id="comments" [disabled]="view" maxlength="300"
                                            matTooltip="Comments" [(ngModel)]="Comments"
                                            class="form-control"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;

                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 20%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of COApproversList; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>

    </div>

</div>

<div class="modal fade" id="OTModal" tabindex="-1" role="dialog" aria-labelledby="OTModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Over Time Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for="startDate">
                                        Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="startDate" name="startDate" class="form-control"
                                            [(ngModel)]="fromDate" [min]="min" [owlDateTime]="dtStart5"
                                            [owlDateTimeTrigger]="dtStart5" [matTooltipPosition]="'below'"
                                            matTooltip="Click to change startDate" #startDate1="ngModel"
                                            [disabled]="isEdit" (change)="getAttendanceDetails()" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtStart">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtStart5></owl-date-time>
                                    <span class="help-block" *ngIf="!startDate1.valid && startDate1.touched">Please
                                        enter Date.</span>
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (max 300 char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="30" rows="5"
                                        maxlength="300" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="table-responsive">
                                    <button title="Add Rows" [matTooltipPosition]="'below'"
                                        matTooltip="Click to Add more Rows" (click)="addRows(rec);"
                                        class="btn btn-info btn-xs pull-right" *ngIf="!isEdit">
                                        <i class="fa fa-plus"></i></button>
                                    <table id="personTable" class="table table-bordered" cellspacing="0"
                                        style="margin-bottom: 0px;">
                                        <thead>
                                            <tr>
                                                <th>Sl. No</th>
                                                <th>Employee No</th>
                                                <th>Name</th>
                                                <th>Department</th>
                                                <th>Designation</th>
                                                <th>Role</th>
                                                <th>DOJ</th>
                                                <th>No. of Hours</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let per of dynamicArray; let rec=index">
                                                <td>
                                                    <label>{{rec+1}}.</label>
                                                </td>
                                                <td>
                                                    <input class="form-control suggestion" type="text"
                                                        [name]="'empNo'+per.id" [(ngModel)]="per.empNo"
                                                        placeholder="Employee No" [value]="per.empNo" maxlength="18"
                                                        [id]="'empNo'+per.id" (input)="GetEmpDetails(per)"
                                                        [disabled]="isEdit" required />
                                                </td>
                                                <td>
                                                    <input class="form-control suggestion" type="text"
                                                        [name]="'Name'+per.id" [(ngModel)]="per.Name" placeholder="Name"
                                                        [value]="per.Name" [id]="'Name'+per.id" readonly required />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="text" [name]="'Dept'+per.id"
                                                        [(ngModel)]="per.Dept" [readonly]="per.material_Type==null"
                                                        placeholder="Department" [value]="per.Dept" [id]="'Dept'+per.id"
                                                        readonly />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="text" [name]="'Desig'+per.id"
                                                        [(ngModel)]="per.Desig" [readonly]="per.material_Type==null"
                                                        placeholder="Designation" [value]="per.Desig"
                                                        [id]="'Desig'+per.id" readonly />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="text" [name]="'Role'+per.id"
                                                        [(ngModel)]="per.Role" [readonly]="per.material_Type==null"
                                                        placeholder="Role" [value]="per.Role" [id]="'Role'+per.id"
                                                        readonly />
                                                </td>
                                                <td>
                                                    <input class="form-control" type="text" [name]="'DOJ'+per.id"
                                                        value="{{per.DOJ | date:'dd/MM/yyyy'}}" placeholder="DOJ"
                                                        disabled />
                                                </td>
                                                <td>
                                                    <select [(ngModel)]="per.NoHrs" class="form-control"
                                                        [name]="'NoHrs'+per.id" matTooltip="Select NoHrs"
                                                        #NoHrsEnt="ngModel" [disabled]="isEdit" required>
                                                        <option value=null>-Select-</option>
                                                        <option value="1">1 Hour</option>
                                                        <option value="2">2 Hours</option>
                                                        <option value="3">3 Hours</option>
                                                        <option value="4">4 Hours</option>
                                                        <option value="5">5 Hours</option>
                                                        <option value="6">6 Hours</option>
                                                        <option value="7">7 Hours</option>
                                                        <option value="8">8 Hours</option>
                                                        <option value="9">9 Hours</option>
                                                        <option value="10">10 Hours</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <button title="Remove Details" (click)="removeRows(per);"
                                                        class="btn btn-danger" matTooltip="click to remove"
                                                        [disabled]="isEdit">
                                                        <i class="fa fa-trash"></i></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            &nbsp; &nbsp; &nbsp;
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments</label>
                                    <textarea name="comments" id="comments" [disabled]="view" maxlength="300"
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>


                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 20%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of COApproversList; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <!-- <button *ngIf="!view" type="button" class="btn btn-primary" (click)="InsertPermission('Draft')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Save Draft</button> -->
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm1.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm1.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>

    </div>

</div>

<div class="modal fade" id="lvModal" tabindex="-1" role="dialog" aria-labelledby="lvModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Leave Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        &nbsp; &nbsp; &nbsp;
                        <div class="row" *ngIf="filterRequest=='Cancel Leave'">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #15b5ff;">
                                    <td colspan="4" style="text-align: center; width: 100%;">
                                        <strong><b>Employee Punch Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: hsl(204, 100%, 70%);">
                                    <th><b>Worked Date</b></th>
                                    <th><b>In Timing</b></th>
                                    <th><b>Out Timing</b></th>
                                    <th><b>Status</b></th>
                                </tr>
                                <tr *ngFor="let ty of EmpPunchList; let i = index">
                                    <td>{{ty.Date | date:'dd/MM/yyyy'}}</td>
                                    <td>{{ty.numberOfDays}}</td>
                                    <td>{{ty.compOffBalance}}</td>
                                    <td>{{ty.lapsBydate | date:'dd/MM/yyyy'}}</td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong><b>Total</b></strong>
                                    </td>
                                    <td>{{totNoDays}}</td>
                                    <td>{{totCobal}}</td>
                                    <td> </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="calyear">Calendar Year <span style="color: red;">*</span> </label>
                                    <input type="number" [(ngModel)]="CalenderYear" class="form-control" id="year"
                                        placeholder="Year" name="year" ngControl="CalenderYear" #calYearEnt="ngModel"
                                        [disabled]="isEdit">
                                    <span class="help-block" *ngIf="!calYearEnt.valid && calYearEnt.touched">Please
                                        select calendar year.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="lvType">Leave Type <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="lvType" class="form-control" id="lvType" name="lvType"
                                        matTooltip="Leave Type" #lvTypeEnt="ngModel" (change)="getLvReasonList(lvType)"
                                        [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Leave Type
                                        </option>
                                        <option *ngFor="let pl of lvTypeList" value={{pl.lvTypeid}}>{{pl.lvType}}
                                        </option>
                                    </select>
                                    <span class="help-block" *ngIf="!lvTypeEnt.valid && lvTypeEnt.touched">Please select
                                        Leave Type .</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="FromDate">Start Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" matTooltip="Click to change date"
                                        [owlDateTime]="dt12" [owlDateTimeTrigger]="dt12" name="FromDate"
                                        class="form-control" [(ngModel)]="StartDate" [disabled]="isEdit"
                                        #FromDate="ngModel" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="dur1">Start Date Duration <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Duration1" class="form-control" id="dur1" name="dur1"
                                        matTooltip="Duration" #dur1Ent="ngModel" [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Duration
                                        </option>
                                        <option value="FD">Full Day</option>
                                        <option value="FH">First Half</option>
                                        <option value="SH">Second Half</option>
                                    </select>
                                    <span class="help-block" *ngIf="!dur1Ent.valid && dur1Ent.touched">Please select
                                        duration.</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="todate">End Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" [min]="StartDate"
                                        matTooltip="Click to change date" [owlDateTime]="dt14"
                                        [owlDateTimeTrigger]="dt14" name="todate" class="form-control"
                                        [(ngModel)]="EndDate" #todate="ngModel" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt14 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="dur2">End Date Duration <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Duration2" class="form-control" id="dur2" name="dur2"
                                        matTooltip="Duration" #dur2Ent="ngModel" [disabled]="isEdit"
                                        (change)="CalculateDays()" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Duration
                                        </option>
                                        <option value="FD">Full Day</option>
                                        <option value="FH">First Half</option>
                                        <option value="SH">Second Half</option>
                                    </select>
                                    <span class="help-block" *ngIf="!dur2Ent.valid && dur2Ent.touched">Please select
                                        duration.</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="days">No. of Days<span style="color: red;">*</span> </label>
                                    <input type="text" name="days" id="days" [(ngModel)]="NoOfDays" class="form-control"
                                        matTooltip="No. of Days" #daysEnt="ngModel" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reason">Reason <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="LvReason" class="form-control" id="reason" name="reason"
                                        matTooltip="Leave Reason" #reasonEnt="ngModel" [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Reason
                                        </option>
                                        <option *ngFor="let res of ReasonList" value={{res.reason}}>
                                            {{res.detailedReason}}</option>
                                    </select>
                                    <span class="help-block" *ngIf="!reasonEnt.valid && reasonEnt.touched">Please select
                                        reason.</span>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (max 150 char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="30" rows="5"
                                        maxlength="150" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="lvaddress">Address during leave</label>
                                    <textarea name="lvaddress" id="lvaddress" maxlength="150" matTooltip="Address"
                                        placeholder="ADDRES DURING LEAVE" [(ngModel)]="LeaveAddress"
                                        class="form-control" [disabled]="isEdit"></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="lvcontact">Contact Number </label>
                                    <input type="text" name="lvcontact" id="lvcontact" [(ngModel)]="LeaveContactNo"
                                        placeholder="CONTACT NUMBER" class="form-control" matTooltip="Contact Number"
                                        [disabled]="isEdit" #lvcontactEnt="ngModel">
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="person">Person responsible in my absence</label>
                                    <input type="text" name="personName" id="personName"
                                        (keyup)="getpersonResponsible($event)" [(ngModel)]="personResponsible"
                                        class="form-control" matTooltip="Person Responsible" [disabled]="isEdit"
                                        #responsibleEnt="ngModel">
                                    <input type="hidden" id="person" class="form-control"
                                        (keyup)="getpersonResponsible($event)" [(ngModel)]="personResponsible"
                                        ngControl="personResponsible" name="person" />
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments</label>
                                    <textarea name="comments" id="comments" [disabled]="view" maxlength="300" required
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <div class="box">
                                <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                                    <div class="col-xs-6">
                                        <h3 class="box-title">Attachments</h3>
                                    </div>
                                </div>
                                <br>
                                <div class="box-body">
                                    <div class="row" *ngFor="let attach of fileslist1">
                                        <div class="col-sm-12">
                                            <label for="attachments"></label><a
                                                (click)="downloadFileLeave(reqNo,attach);"
                                                style="cursor: pointer;text-decoration: underline; color: #68a7d2;"
                                                [matTooltipPosition]="'below'"
                                                matTooltip="Click to download the file">{{attach}}</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 20%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of ApproversList; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <!-- <button *ngIf="!view" type="button" class="btn btn-primary" (click)="InsertPermission('Draft')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Save Draft</button> -->
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>

    </div>

</div>

<div class="modal fade" id="regModal" tabindex="-1" role="dialog" aria-labelledby="regModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Regularization Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startDate">
                                        Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="startDate" name="startDate" class="form-control" [(ngModel)]="Date"
                                            [max]="today" [owlDateTime]="dtStartq" [owlDateTimeTrigger]="dtStartq"
                                            [matTooltipPosition]="'below'" matTooltip="Click to change startDate"
                                            #startDate1="ngModel" [disabled]="isEdit"
                                            (ngModelChange)="getAttendanceDetails()" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtStartq">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtStartq></owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="reasontype">Reason Type</label>
                                    <select [(ngModel)]="ReasonType" class="form-control" id="reasontype"
                                        name="reasontype" matTooltip="Reason Type" #ReasonTypeEnt="ngModel"
                                        [disabled]="isEdit" required>
                                        <option> Missing </option>
                                        <option> Forgot </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="swipeType">Swipe Type <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="SwipeType" class="form-control" id="swipeType"
                                        name="lvswipeTypeType" matTooltip="Swipe Type" #swipeTypeEnt="ngModel"
                                        [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Swipe Type
                                        </option>
                                        <option>In</option>
                                        <option>Out</option>
                                    </select>
                                    <span class="help-block" *ngIf="!lvTypeEnt.valid && lvTypeEnt.touched">Please Select
                                        Swipe
                                        Type .</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startTime">
                                        Time <span style="color:red">*</span>
                                    </label>
                                    <input type="time" #startTime="ngModel" placeholder="Click to set Time"
                                        id="startTime" name="startTime" class="form-control" [(ngModel)]="Time"
                                        [disabled]="isEdit" required>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (Max 100 Char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="20" rows="3"
                                        maxlength="100" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments</label>
                                    <textarea name="comments" id="comments" cols="30" rows="3" maxlength="300"
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"
                                        [disabled]="view"></textarea>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 30%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of ApproversListForPM; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm7.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm7.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="payregModal" tabindex="-1" role="dialog" aria-labelledby="payregModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Payroll Regularization Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="startDate">
                                        Date <span style="color:red">*</span>
                                    </label>
                                    <div class='input-group date'>
                                        <input id="startDateps" name="startDateps" class="form-control" [(ngModel)]="Date"
                                            [max]="today" [owlDateTime]="dtStartps" [owlDateTimeTrigger]="dtStartps"
                                            [matTooltipPosition]="'below'" matTooltip="Click to change startDate"
                                            #startDate1="ngModel" [disabled]="isEdit"
                                            (ngModelChange)="getAttendanceDetails()" required>
                                        <span class="input-group-addon trigger" [owlDateTimeTrigger]="dtStartps">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                    </div>
                                    <owl-date-time [pickerType]="'calendar'" #dtStartps></owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="swipeType">Swipe Type <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="SwipeType" class="form-control" id="swipeType"
                                        name="lvswipeTypeType" matTooltip="Swipe Type" #swipeTypeEnt="ngModel"
                                        [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Swipe Type
                                        </option>
                                        <option>In</option>
                                        <option>Out</option>
                                    </select>
                                    <span class="help-block" *ngIf="!lvTypeEnt.valid && lvTypeEnt.touched">Please Select
                                        Swipe
                                        Type .</span>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="detailedReason">Detailed Reason (Max 100 Char) <span
                                            style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="20" rows="3"
                                        maxlength="100" matTooltip="Detailed Reason" [(ngModel)]="DetailedReason"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments</label>
                                    <textarea name="comments" id="comments" cols="30" rows="3" maxlength="300"
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"
                                        [disabled]="view"></textarea>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 30%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of ApproversListForPM; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm7.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm7.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="esicModal" tabindex="-1" role="dialog" aria-labelledby="esicModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Leave Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="calyear">Calendar Year <span style="color: red;">*</span> </label>
                                    <input type="number" [(ngModel)]="CalenderYear" class="form-control" id="year"
                                        placeholder="Year" name="year" ngControl="CalenderYear" #calYearEnt="ngModel"
                                        [disabled]="isEdit">
                                    <span class="help-block" *ngIf="!calYearEnt.valid && calYearEnt.touched">Please
                                        select
                                        calendar
                                        year.</span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="lvType">Leave Type <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="lvType" class="form-control" id="lvType" name="lvType"
                                        matTooltip="Leave Type" #lvTypeEnt="ngModel" (change)="getLvReasonList(lvType)"
                                        [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Leave Type
                                        </option>
                                        <option *ngFor="let pl of lvTypeList1" value={{pl.id}}>{{pl.name}}
                                        </option>
                                    </select>
                                    <span class="help-block" *ngIf="!lvTypeEnt.valid && lvTypeEnt.touched">Please select
                                        Leave
                                        Type .</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="FromDate">Start Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" matTooltip="Click to change date"
                                        [owlDateTime]="dt100" [owlDateTimeTrigger]="dt100" name="FromDate"
                                        class="form-control" [(ngModel)]="StartDate" [disabled]="isEdit"
                                        #FromDate="ngModel" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt100 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="dur1">Start Date Duration <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Duration1" class="form-control" id="dur1" name="dur1"
                                        matTooltip="Duration" #dur1Ent="ngModel" [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Duration
                                        </option>
                                        <option value="FD">Full Day</option>
                                        <option value="FH">First Half</option>
                                        <option value="SH">Second Half</option>
                                    </select>
                                    <span class="help-block" *ngIf="!dur1Ent.valid && dur1Ent.touched">Please select
                                        duration
                                        .</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="todate">End Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" [min]="StartDate"
                                        matTooltip="Click to change date" [owlDateTime]="dt101"
                                        [owlDateTimeTrigger]="dt101" name="todate" class="form-control"
                                        [(ngModel)]="EndDate" #todate="ngModel" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt101 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="dur2">End Date Duration <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Duration2" class="form-control" id="dur2" name="dur2"
                                        matTooltip="Duration" #dur2Ent="ngModel" [disabled]="isEdit"
                                        (change)="CalculateDays()" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Duration
                                        </option>
                                        <option value="FD">Full Day</option>
                                        <option value="FH">First Half</option>
                                        <option value="SH">Second Half</option>
                                    </select>
                                    <span class="help-block" *ngIf="!dur2Ent.valid && dur2Ent.touched">Please select
                                        duration
                                        .</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="days">No. of Days<span style="color: red;">*</span> </label>
                                    <input type="text" name="days" id="days" [(ngModel)]="NoOfDays" class="form-control"
                                        matTooltip="No. of Days" #daysEnt="ngModel" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="lvaddress">Address during leave</label>
                                <textarea name="lvaddress" id="lvaddress" maxlength="150" matTooltip="Address"
                                    [(ngModel)]="LeaveAddress" class="form-control" [disabled]="isEdit"></textarea>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="lvcontact">Contact Number </label>
                                <input type="text" name="lvcontact" id="lvcontact" [(ngModel)]="LeaveContactNo"
                                    class="form-control" matTooltip="Contact Number" [disabled]="isEdit"
                                    #lvcontactEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="person">Person responsible in my absence</label>
                                <input type="text" name="personName" id="personName"
                                    (keyup)="getpersonResponsible($event)" [(ngModel)]="personName" class="form-control"
                                    matTooltip="Person Responsible" [disabled]="isEdit" #responsibleEnt="ngModel">
                                <input type="hidden" id="person" class="form-control"
                                    (keyup)="getpersonResponsible($event)" [(ngModel)]="personResponsible"
                                    ngControl="personResponsible" name="person" />
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="detailedReason">Detailed Reason (max 150 char) <span
                                        style="color: red;">*</span></label>
                                <textarea name="detailedReason" id="detailedReason" cols="30" rows="5" maxlength="150"
                                    matTooltip="Detailed Reason" [(ngModel)]="DetailedReason" class="form-control"
                                    [disabled]="isEdit" required></textarea>
                            </div>
                        </div>
                        <div class="col-sm-12" *ngIf="isEdit">
                            <div class="form-group">
                                <label for="comments">Comments</label>
                                <textarea name="comments" id="comments" [disabled]="view" maxlength="300"
                                    matTooltip="Comments" [(ngModel)]="Comments" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    &nbsp; &nbsp; &nbsp;
                    <div class="row">
                        <div class="box">
                            <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                                <div class="col-xs-6">
                                    <h3 class="box-title">Attachments</h3>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="row">
                                    <label style="color: red;">NOTE:Attachments should be of type PDF and JPEG
                                        only and maximum size of 5 mb allowed. </label>
                                </div>
                                <div class="row" *ngIf="!isEdit">
                                    <div class="col-sm-4" *ngIf="!isEdit">
                                        <input #myInput type="file" accept=".jpeg,.pdf,.docx" id="file"
                                            (change)="handleFileInput($event.target.files)" multiple>
                                    </div>
                                </div>
                                <div class="row" *ngFor="let attach of fileslist">
                                    <div class="col-sm-4">
                                        <label for="attachments"></label><a (click)="downloadFile(reqId,attach);"
                                            style="cursor: pointer;text-decoration: underline; color: #68a7d2;"
                                            [matTooltipPosition]="'below'"
                                            matTooltip="Click to download the file">{{attach}}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    &nbsp; &nbsp; &nbsp;
                    <div class="row">
                        <table class="table table-striped table-bordered">
                            <tr style="background-color: #b2d1e5;">
                                <td colspan="5" style="width: 100%;">
                                    <strong><b>Approver Details</b></strong>
                                </td>
                            </tr>
                            <tr style="background-color: #b2d1e5;">
                                <th style="width: 10%;"><b>Type</b></th>
                                <th style="width: 10%;"><b>Employee Code</b></th>
                                <th style="width: 30%;"><b>Name</b></th>
                                <th style="width: 30%;"><b>Designation</b></th>
                                <th style="width: 20%;"><b>Role</b></th>
                            </tr>
                            <tr *ngFor="let ty of ApproversList; let i = index">
                                <td>{{ty.type}}</td>
                                <td>{{ty.employeeId}}</td>
                                <td>{{ty.name}}</td>
                                <td>{{ty.designation}}</td>
                                <td>{{ty.role}}</td>
                            </tr>
                        </table>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <!-- <button *ngIf="!view" type="button" class="btn btn-primary" (click)="InsertPermission('Draft')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Save Draft</button> -->
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm1.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm1.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="CSRModal" tabindex="-1" role="dialog" aria-labelledby="CSRModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Change Shift Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="fromDate">From Date <span style="color: red;">*</span>
                                    </label>
                                    <input [matTooltipPosition]="'below'" matTooltip="Click to change date"
                                        [owlDateTime]="dt99" [owlDateTimeTrigger]="dt99" name="fromDate"
                                        class="form-control" [(ngModel)]="fromDate" id="fromDate" [disabled]="isEdit"
                                        #FromDateEnt="ngModel" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt99 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="todate">To Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" [min]="StartDate"
                                        matTooltip="Click to change date" [owlDateTime]="dt97"
                                        [owlDateTimeTrigger]="dt97" name="todate" class="form-control" id="todate"
                                        [(ngModel)]="toDate" #todateEnt="ngModel" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt97 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="preShift">Current Shift <span style="color: red;">*</span>
                                    </label>
                                    <select type="text" name="preShift" id="preShift" [(ngModel)]="previousShift"
                                        class="form-control" matTooltip="Previous Shift" [disabled]="isEdit"
                                        #preShiftEnt="ngModel" readonly>
                                        <option [ngValue]="undefined" disabled [selected]="true"> Select
                                            Shift </option>
                                        <option *ngFor="let pl of ShiftList" [ngValue]="pl.shiftCode">
                                            {{pl.shiftCode}}-{{pl.shiftName}}-{{pl.shiftStartTime}}-{{pl.shiftEndTime}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="updShift">Updated Shift <span style="color: red;">*</span>
                                    </label>
                                    <select [(ngModel)]="updatedShift" class="form-control" id="updShift"
                                        name="updShift" matTooltip="Updated Shift" #updShiftEnt="ngModel"
                                        [disabled]="isEdit">
                                        <option [ngValue]="undefined" disabled [selected]="true"> Select
                                            Shift </option>
                                        <option *ngFor="let pl of ShiftList" [ngValue]="pl.shiftCode">
                                            {{pl.shiftCode}}-{{pl.shiftName}}-{{pl.shiftStartTime}}-{{pl.shiftEndTime}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="reason">Reason (max 150 char) <span style="color: red;">*</span></label>
                                    <textarea name="reason" id="reason" cols="30" rows="3" maxlength="150"
                                        matTooltip="Reason" [(ngModel)]="reason" class="form-control"
                                        [disabled]="isEdit" required></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="comments">Comments</label>
                                <textarea name="comments" id="comments" [disabled]="view" maxlength="300"
                                    matTooltip="Comments" [(ngModel)]="Comments" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    &nbsp; &nbsp; &nbsp;
                    <div class="row">
                        <table class="table table-striped table-bordered">
                            <tr style="background-color: #b2d1e5;">
                                <td colspan="5" style="width: 100%;">
                                    <strong><b>Approver Details</b></strong>
                                </td>
                            </tr>
                            <tr style="background-color: #b2d1e5;">
                                <th style="width: 10%;"><b>Type</b></th>
                                <th style="width: 10%;"><b>Employee Code</b></th>
                                <th style="width: 30%;"><b>Name</b></th>
                                <th style="width: 30%;"><b>Designation</b></th>
                                <th style="width: 20%;"><b>Role</b></th>
                            </tr>
                            <tr *ngFor="let ty of ApproversListForPM; let i = index">
                                <td>{{ty.type}}</td>
                                <td>{{ty.employeeId}}</td>
                                <td>{{ty.name}}</td>
                                <td>{{ty.designation}}</td>
                                <td>{{ty.role}}</td>
                            </tr>
                        </table>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <!-- <button *ngIf="!view" type="button" class="btn btn-primary" (click)="InsertPermission('Draft')"
                            [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Save Draft</button> -->
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="HRQModal" tabindex="-1" role="dialog" aria-labelledby="HRQModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">HR Queries Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm="ngForm">
                    <div class="col-sm-12">
                        <div class="row">
                            <h2 style="text-align: center; color: #000000;">
                                <b>User Details</b>
                            </h2>
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="plant">Plant</label>
                                    <input name="plant" id="plant" placeholder="Plant" class="form-control"
                                        value="{{userIdRequest.plant}}" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="requesterId">Employee Id</label>
                                    <input name="requesterId" id="requesterId" placeholder="Employee Id"
                                        class="form-control" value="{{userIdRequest.employeeId}}" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="firstName">First Name</label>
                                    <input name="firstName" id="firstName" placeholder="Employee Name"
                                        class="form-control" value="{{userIdRequest.firstName}}" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="lastName">Last Name</label>
                                    <input name="lastName" id="lastName" placeholder="Employee Name"
                                        class="form-control" value="{{userIdRequest.lastName}}" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="department">Department</label>
                                    <input name="department" id="department" placeholder="Department"
                                        class="form-control" value="{{userIdRequest.department}}" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="designation">Designation</label>
                                    <input name="designation" id="designation" placeholder="Designation"
                                        class="form-control" value="{{userIdRequest.designation}}" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="role">Role</label>
                                    <input name="role" id="role" placeholder="Role" class="form-control"
                                        value="{{getRole(userIdRequest.role)}}" readonly>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <h2 style="text-align: center; color: #000000;">
                                <b>Other Details</b>
                            </h2>
                            <br>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">
                                <label for="filterHR"> To HR: <span style="color: red;">*</span> </label>
                                <select [(ngModel)]="filterHR" class="form-control" id="filterYear" name="filterHR"
                                    ngControl="filterHR" #filterHREnt="ngModel" matTooltip="Select HR"
                                    (change)="getApproverDetails()" disabled>
                                    <option [ngValue]="null" disabled [selected]="true">--Select an Option--
                                    </option>
                                    <option *ngFor="let hr of HrList" value={{hr.name}}>{{hr.name}}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-6">
                                <label for="filtercategory"> Category: <span style="color: red;">*</span> </label>
                                <select [(ngModel)]="filtercategory" class="form-control" id="category" name="category"
                                    ngControl="filtercategory" #filtercategoryEnt="ngModel" [disabled]="isEdit"
                                    matTooltip="Select category" (change)="getApproverDetails()">
                                    <option [ngValue]="undefined" disabled>--Select an Option--
                                    </option>
                                    <option *ngFor="let cat of catList" value={{cat.type}}>
                                        {{cat.type}}</option>
                                </select>
                            </div>
                            &nbsp;
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="subject">Subject <span style="color: red;">*</span></label>
                                    <textarea name="subject" id="subject" placeholder="Enter Subject"
                                        class="form-control" [(ngModel)]="filtersubject" ngControl="filtersubject"
                                        cols="30" rows="3" disabled required></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="description">Description <span style="color: red;">*</span></label>
                                    <textarea name="description" id="description" placeholder="Enter Description"
                                        class="form-control" [(ngModel)]="filterdescription" cols="30" rows="5"
                                        ngControl="filterdescription" disabled required></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="comments">Comments</label>
                                <textarea name="comments" id="comments" [disabled]="view" maxlength="300"
                                    matTooltip="Comments" [(ngModel)]="Comments" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    &nbsp; &nbsp; &nbsp;
                    <div class="row">
                        <table class="table table-striped table-bordered">
                            <tr style="background-color: #b2d1e5;">
                                <td colspan="5" style="width: 100%;">
                                    <strong><b>Approver Details</b></strong>
                                </td>
                            </tr>
                            <tr style="background-color: #b2d1e5;">
                                <th style="width: 10%;"><b>HR ID</b></th>
                                <th style="width: 10%;"><b>Approver Name</b></th>
                                <th style="width: 30%;"><b>Department</b></th>
                                <th style="width: 30%;"><b>Designation</b></th>
                                <th style="width: 20%;"><b>Role</b></th>
                            </tr>
                            <tr *ngFor="let ty of ApproversList; let i = index">
                                <td>{{ty.hrId}}</td>
                                <td>{{ty.approverName}}</td>
                                <td>{{ty.department}}</td>
                                <td>{{ty.designation}}</td>
                                <td>{{ty.role}}</td>
                            </tr>
                        </table>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction1('Closed')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Close Request</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="TPModal" tabindex="-1" role="dialog" aria-labelledby="TPModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Tour Plan Request</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm7="ngForm">
                    <div class="col-sm-12">
                        <div class="row">

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="FromDate">Start Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" matTooltip="Click to change date"
                                        [owlDateTime]="dt1001" [owlDateTimeTrigger]="dt1001" name="FromDate"
                                        class="form-control" [(ngModel)]="StartDate" [disabled]="isEdit"
                                        #FromDate="ngModel" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt1001 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="dur1">Start Date Duration <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Duration1" class="form-control" id="dur1" name="dur1"
                                        matTooltip="Duration" #dur1Ent="ngModel" [disabled]="isEdit" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Duration
                                        </option>
                                        <option value="FD">Full Day</option>
                                        <option value="FH">First Half</option>
                                        <option value="SH">Second Half</option>
                                    </select>
                                    <span class="help-block" *ngIf="!dur1Ent.valid && dur1Ent.touched">Please select
                                        duration.</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="todate">End Date <span style="color: red;">*</span> </label>
                                    <input [matTooltipPosition]="'below'" [min]="StartDate"
                                        matTooltip="Click to change date" [owlDateTime]="dt1004"
                                        [owlDateTimeTrigger]="dt1004" name="todate" class="form-control"
                                        [(ngModel)]="EndDate" #todate="ngModel" [disabled]="isEdit" required>
                                    <owl-date-time [pickerType]="'calendar'" #dt1004 style="width: 250px;">
                                    </owl-date-time>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="dur2">End Date Duration <span style="color: red;">*</span> </label>
                                    <select [(ngModel)]="Duration2" class="form-control" id="dur2" name="dur2"
                                        matTooltip="Duration" #dur2Ent="ngModel" [disabled]="isEdit"
                                        (change)="CalculateDays()" required>
                                        <option [ngValue]="null" disabled [selected]="true"> Select Duration
                                        </option>
                                        <option value="FD">Full Day</option>
                                        <option value="FH">First Half</option>
                                        <option value="SH">Second Half</option>
                                    </select>
                                    <span class="help-block" *ngIf="!dur2Ent.valid && dur2Ent.touched">Please select
                                        duration.</span>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="days">Type Of Work<span style="color: red;">*</span> </label>
                                    <input type="text" name="typeOfWork" id="typeOfWork" [(ngModel)]="typeOfWork"
                                        class="form-control" matTooltip="Type Of Work" #typeOfWorkEnt="ngModel"
                                        readonly>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="detailedReason">Details <span style="color: red;">*</span></label>
                                    <textarea name="detailedReason" id="detailedReason" cols="30" rows="5"
                                        maxlength="150" matTooltip="Detailed Reason" [(ngModel)]="details"
                                        class="form-control" [disabled]="isEdit" required></textarea>
                                </div>
                            </div>

                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="comments">Comments</label>
                                    <textarea name="comments" id="comments" [disabled]="view" maxlength="300" required
                                        matTooltip="Comments" [(ngModel)]="Comments" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #b2d1e5;">
                                    <td colspan="5" style="width: 100%;">
                                        <strong><b>Approver Details</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: #b2d1e5;">
                                    <th style="width: 10%;"><b>Type</b></th>
                                    <th style="width: 10%;"><b>Employee Code</b></th>
                                    <th style="width: 30%;"><b>Name</b></th>
                                    <th style="width: 30%;"><b>Designation</b></th>
                                    <th style="width: 20%;"><b>Role</b></th>
                                </tr>
                                <tr *ngFor="let ty of ApproversList; let i = index">
                                    <td>{{ty.type}}</td>
                                    <td>{{ty.employeeId}}</td>
                                    <td>{{ty.name}}</td>
                                    <td>{{ty.designation}}</td>
                                    <td>{{ty.role}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <!-- <button *ngIf="!view" type="button" class="btn btn-primary" (click)="InsertPermission('Draft')"
                    [disabled]="isLoadingPop || (!desigForm.valid) || isLoadPop">Save Draft</button> -->
                <button *ngIf="!view" type="button" class="btn btn-success" (click)="RequestAction('Approved')"
                    [disabled]="isLoadingPop || (!desigForm7.valid) || isLoadPop"><i class="fas fa-thumbs-up"></i>&nbsp;
                    Approve</button>
                <button *ngIf="!view" type="button" class="btn btn-danger" (click)="RequestAction('Rejected')"
                    [disabled]="isLoadingPop || (!desigForm7.valid) || isLoadPop"><i class="fas fa-ban"></i>&nbsp;
                    Reject</button>
                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    data-dismiss="modal" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="PreviousLeavesModal" tabindex="-1" role="dialog" aria-labelledby="PreviousLeavesModalLabel"
    aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Historical Leaves List</h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;color:gray;background-size:cover;">
                <form #desigForm7="ngForm">
                    <div class="col-sm-12">
                        &nbsp; &nbsp; &nbsp;
                        <div class="row">
                            <table class="table table-striped table-bordered">
                                <tr style="background-color: #0eabff;">
                                    <td colspan="5" style="text-align: center; width: 100%;">
                                        <strong><b>Historical Leaves List</b></strong>
                                    </td>
                                </tr>
                                <tr style="background-color: hsl(204, 100%, 67%);">
                                    <th rowspan="2" style="text-align: center; vertical-align: bottom; ">Leave
                                        Type</th>
                                    <th colspan="2" style="text-align: center; vertical-align: bottom; ">Leave
                                        Applied</th>
                                    <th rowspan="2" style="text-align: center; vertical-align: bottom; ">No. of
                                        Days</th>
                                    <th rowspan="2" style="text-align: center; vertical-align: bottom; ">Reason
                                    </th>
                                </tr>
                                <tr style="background-color: hsl(204, 100%, 67%);">
                                    <th>From</th>
                                    <th>To</th>
                                </tr>
                                <tr *ngFor="let ty of upcomingLeaves; let i = index">
                                    <td>{{ty.leaveType}}</td>
                                    <td>{{ty.startDate | date:'dd/MM/yyyy'}}</td>
                                    <td>{{ty.endDate | date:'dd/MM/yyyy'}}</td>
                                    <td>{{ty.noOfDays}}</td>
                                    <td>{{ty.reason}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </form>
                <div class="overlay" *ngIf="isLoadingPop">
                    <i class="fa fa-spinner fa-pulse"></i>
                </div>
            </div>
            &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp;
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>

                <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                    (click)="closesavemodel()" [disabled]="isLoadingPop">Close</button>

            </div>
        </div>
    </div>
</div>