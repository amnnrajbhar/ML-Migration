<section class="content-header">
    <h1 class="display-1">
        MLLDLS
        <small>DOC Create</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
        <li class="active">DOC Create</li>
    </ol>
</section>
<!-- Main content -->
<section class="content">
    <div class="box">
        <div class="box-header">
            <div class="col-xs-6">
                <h3 class="box-title">DOC Create</h3>
                <span class="label label-danger" *ngIf="errMsg.length>0">{{errMsg}}</span>
            </div>
            <div class="col-xs-6">
                <button type="button" class="btn btn-primary pull-right"
                    (click)="onUserActions(false,DocCreatemodel,false,'')"><i class="fa fa-plus" aria-hidden="true"></i>
                    New Request</button>
            </div>
        </div>
        <div id="dateFilterPanel">
            <div class="col-sm-12">
                <div class="card-body" style="border: black; box-shadow: gray;">
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="requestno">Initial Doc No</label>
                                <input [(ngModel)]="filterdocno" class="form-control" id="requestno"
                                    placeholder="Doc No" name="requestno" ngControl="filterdocno"
                                    #requestnoEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="place"> Barcode</label>
                                <input [(ngModel)]="filterbarcode" class="form-control" id="place" placeholder="Barcode"
                                    name="place" ngControl="filterbarcode" #placeEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="Product"> Product Name</label>
                                <input [(ngModel)]="filterProduct" class="form-control" id="Product" placeholder="Product Name"
                                    name="Product" ngControl="filterProduct" #ProductEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="ARN">AR Number</label>
                                <input [(ngModel)]="filterArNumber" class="form-control" id="ARN" placeholder="AR No"
                                    name="ARN" ngControl="filterArNumber" #ARNEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="fltrstatus">Request Type</label>
                                <select [(ngModel)]="filterstatus" class="form-control" id="fltrstatus"
                                    name="fltrstatus" ngControl="filterstatus" #fltrstatusEnt="ngModel"
                                    matTooltip="Select type">
                                    <option [ngValue]="null" disabled>--Select an Option--</option>
                                    <option *ngFor="let status of statuslist" value={{status.name}}>{{status.name}}
                                    </option>
                                </select>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-sm-4">
                            <label>From Date</label>
                            <!-- <input type="date" class="form-control" placeholder="From Date"  [(ngModel)]="ItemCodeExtensionModel.from_date"/> -->
                            <div class="form-group form-group-sm"
                                [ngClass]="(fromDate.touched && !fromDate.valid)?'has-error':''">
                                <input [matTooltipPosition]="'below'" matTooltip="Click to change from date"
                                    [owlDateTime]="dt11" [owlDateTimeTrigger]="dt11" name="fromDate"
                                    class="form-control" [(ngModel)]="from_date" #fromDate="ngModel">
                                <owl-date-time [pickerType]="'calendar'" #dt11 style="width: 250px;"></owl-date-time>
                                <span class="help-block" *ngIf="!fromDate.valid && fromDate.touched">Please enter valid
                                    From
                                    Date.</span>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <label>To Date</label>
                            <div class="form-group form-group-sm"
                                [ngClass]="(toDate.touched && !toDate.valid)?'has-error':''">
                                <!-- <input type="date" [disabled]="from_date==null||from_date==''" class="form-control" placeholder="To Date"  [(ngModel)]="ItemCodeExtensionModel.to_date"> -->
                                <input [min]="from_date" [max]="today" [matTooltipPosition]="'below'"
                                    matTooltip="Click to change to date" [owlDateTime]="dt12"
                                    [owlDateTimeTrigger]="dt12" name="endDate" class="form-control"
                                    [(ngModel)]="to_date" #toDate="ngModel">
                                <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;"></owl-date-time>
                                <span class="help-block" *ngIf="!toDate.valid && toDate.touched">Please enter valid To
                                    Date.</span>
                            </div>
                        </div>
                        <div class="col-sm-2">
                            <label>&nbsp;</label>
                            <div class="form-group form-group-sm">
                                <button class="btn btn-primary btn-sm" (click)="getAllEntries();"
                                    [disabled]="(!toDate.valid && toDate.touched) || (!fromDate.valid && fromDate.touched)"
                                    matTooltip="click to go">Go</button>
                                &nbsp;&nbsp;
                                <button class="btn btn-primary btn-sm" (click)="clearFilter();"
                                    matTooltip="click to reset">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;


        <div class="box-body table-responsive">
            <table id="userTable" class="table table-bordered table-striped">
                <thead style="background-color: #68a7d2;color:white;">
                    <tr>
                        <th>Sl No</th>
                        <th>Type</th>
                        <th>Initial Doc No</th>
                        <th>Doc No</th>
                        <th>Doc Title</th>
                        <th>Barcode</th>
                        <th>Batch No</th>
                        <th>AR No</th>
                        <th>Product Name</th>
                        <th>Requester</th>
                        <th>Department</th>
                        <th>Borrow Status</th>
                        <th>Pending with</th>
                        <th>Status</th>
                        <th>Borrow</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of DocCreateFilter; let i = index">
                        <td> {{i+1}}
                        </td>
                        <td>{{item.docType}}</td>
                        <td>{{item.initialDocNo}}</td>
                        <td>{{item.docNo }}</td>
                        <td>{{item.docShtDesc}}</td>
                        <td>{{item.barcode}}</td>
                        <td>{{item.batchNo}}</td>
                        <td>{{item.arNo}}</td>
                        <td>{{item.productName}}</td>
                        <td>{{item.empCode}}</td>
                        <td>{{item.fromDept}}</td>
                        <td>{{item.borrowStatus}}</td>
                        <td>{{item.pendingApprover}}</td>                        
                        <td>{{item.reqStatus}}</td>
                        <td>
                            <table>
                                <tr>
                                    <td>
                                        <button *ngIf="item.borrowStatus=='Available'" type="button"
                                            [matTooltipPosition]="'after'" matTooltip="Click to edit details"
                                            class="btn btn-primary btn-xs" (click)="onUserBorrowActions(false,item,false,'')">
                                            <i class="fas fa-edit"></i>
                                            Borrow
                                        </button>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td>
                            <table>
                                <tr>

                                    &nbsp;
                                    <td>
                                        <button
                                            *ngIf="item.apprvrStatus =='Saved' && item.requestedBy==this.currentUser.employeeId"
                                            type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                                            (click)="onUserActions(false,item,false,'')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                    &nbsp;


                                    <td *ngIf="item.pendingApprover==currentUser.employeeId 
                                            || item.parallelApprover1==currentUser.employeeId
                                            || item.parallelApprover2==currentUser.employeeId
                                            || item.subApproverId==currentUser.employeeId
                                            || item.subparallelApprover1==currentUser.employeeId
                                            || item.subparallelApprover2==currentUser.employeeId">
                                        <button *ngIf="item.reqStatus !='Completed' && item.reqStatus !='Rejected'" type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                                            (click)="onUserActions(true,item,false,'')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                    &nbsp;
                                    <td>
                                        <button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to view details" class="btn btn-primary btn-xs"
                                            (click)="onUserActions(true,item,false,'View')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </td>
                                    &nbsp;
                                    <!-- <td>
                                        <button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to View History" class="btn btn-primary btn-xs"
                                            (click)="ShowHistory(item)">
                                            <i class="fa fa-history"></i>
                                        </button>
                                    </td> -->
                                    &nbsp;
                                    <!--  <td>
                        <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to print"
                          class="btn btn-primary btn-xs" (click)="onUserActions(true,item,true,'View')">
                          <i class="fas fa-print"></i>
                        </button>
                      </td>  -->
                                </tr>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- /.box-body -->
        <div class="overlay" *ngIf="isLoading">
            <i class="fa fa-spinner fa-pulse"></i>
        </div>
    </div>
</section>

<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md  modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title" style="color: #0FB381; text-align: center;"><span class="text pull-center"
                        *ngIf="errMsgPop1.length>0"><i class="fa fa-check"></i>{{errMsgPop1}}</span></h3>
            </div>
        </div>
    </div>
    <div class="overlay" *ngIf="isLoading">
        <i class="fa fa-spinner fa-pulse"></i>
    </div>
</div>

<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">

    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title"> MLLDLS Doc Create
                </h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;">
                <div class="row">
                    <div class="col-sm-12">
                        <form #dataForm="ngForm" (keydown.enter)="$event.preventDefault()">
                            <ul class="nav nav-tabs" style="border: 2px;;border-color: black;" id="myTab">
                                <li class="active"><a data-toggle="tab" href="#tab-MD">DOCUMENT</a></li>
                                <li><a data-toggle="tab" href="#tab-HOD"><b>LIBRARIAN</b></a></li>
                                <li><a data-toggle="tab" href="#tab-History"><b>HISTORY</b></a></li>
                            </ul>
                            &nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;
                            <div class="tab-content">
                                <div id="tab-MD" class="tab-pane active">
                                    <div class="box">
                                        <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                                            <div class="col-xs-6">
                                                <h3 class="box-title">Requester Details</h3>
                                            </div>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="requesterId">Employee Id</label>
                                                    <input name="requesterId" id="requesterId" placeholder="Employee Id"
                                                        class="form-control" value="{{DocCreatemodel.empCode}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="plant">Plant</label>
                                                    <input name="plant" id="plant" placeholder="Location"
                                                        class="form-control" value="{{DocCreatemodel.location}}"
                                                        readonly>
                                                </div>
                                            </div>


                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="department">Department</label>
                                                    <input name="department" id="department" placeholder="Department"
                                                        class="form-control" value="{{DocCreatemodel.fromDept}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="date">Request Date</label>
                                                    <input name="date" id="date" placeholder="date" class="form-control"
                                                        value="{{DocCreatemodel.initialDocDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                        </div>


                                    </div>

                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;
                                    <div class="box">
                                        <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                                            <div class="col-xs-6">
                                                <h3 class="box-title">Document Information</h3>
                                            </div>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docNo">Doc No <span style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.docNo" class="form-control"
                                                        id="docNo" placeholder="DOC NO" name="docNo"
                                                        ngControl="DocCreatemodel.docNo" #docNoEnt="ngModel"
                                                        [disabled]="isEdit" required>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docShtDesc">DOC Title <span style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.docShtDesc" class="form-control"
                                                        id="docShtDesc" placeholder="Short Description"
                                                        name="docShtDesc" ngControl="DocCreatemodel.docShtDesc"
                                                        #docShtDescEnt="ngModel" [disabled]="isEdit" required>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docDesc">DOC Long Desc <span
                                                            style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.docDesc" class="form-control"
                                                        id="docDesc" placeholder="Long Description" name="docDesc"
                                                        ngControl="DocCreatemodel.docDesc" #docDescEnt="ngModel"
                                                        [disabled]="isEdit" required>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docType">Document Type<span
                                                            style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.docType" class="form-control"
                                                        id="docType" name="docType" ngControl="DocCreatemodel.docType"
                                                        #docTypeEnt="ngModel"
                                                        (change)="GetCategory(DocCreatemodel.docType)"
                                                        [disabled]="isEdit" matTooltip="Select docType" required>
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of CategoryList" value={{mat.type}}>
                                                            {{mat.type}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="category">Category<span
                                                            style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.category" class="form-control"
                                                        id="category" name="category"
                                                        ngControl="DocCreatemodel.category" #categoryEnt="ngModel"
                                                        [disabled]="isEdit" matTooltip="Select category"
                                                        (change)="getLibrarianDetails(DocCreatemodel)" required>
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of CategoryList1"
                                                            value={{mat.category}}>
                                                            {{mat.category}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="retentionPeriod">Retention Period <span
                                                            style="color: red;">*</span> </label>
                                                    <input name="retentionPeriod" id="retentionPeriod"
                                                        placeholder="Retention Period" class="form-control"
                                                        value="{{DocCreatemodel.retentionPeriod}}" readonly>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="effectiveDate">Effective Date</label>
                                                    <input [matTooltipPosition]="'below'"
                                                        matTooltip="Click to change to date" [owlDateTime]="dt16"
                                                        [owlDateTimeTrigger]="dt16" name="endDate" class="form-control"
                                                        [(ngModel)]="DocCreatemodel.effectiveDate" [disabled]="isEdit"
                                                        #effectiveDateEnt="ngModel">
                                                    <owl-date-time [pickerType]="'calendar'" #dt16
                                                        style="width: 250px;"></owl-date-time>

                                                </div>
                                            </div>

                                            <div class="col-sm-2" *ngIf="!isEdit">
                                                <label>&nbsp;&nbsp;&nbsp;</label><br>
                                                <button class="btn-primary" [disabled]="DocCreatemodel.retentionPeriod=='NA'"
                                                    (click)="displayRetentionPeriod(DocCreatemodel)">
                                                    DISPLAY RETENTION DATE
                                                </button>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="expiryDate">Retention Date </label>
                                                    <input name="expiryDate" id="expiryDate"
                                                        placeholder="Retention Date" class="form-control"
                                                        value="{{DocCreatemodel.expiryDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="barcode">Barcode <span style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.barcode" class="form-control"
                                                        id="barcode" placeholder="Barcode" name="barcode"
                                                        ngControl="DocCreatemodel.barcode" #barcodeEnt="ngModel"
                                                        [disabled]="isEdit" required>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="productName">Product Name
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.productName" class="form-control"
                                                        id="productName" placeholder="Product Name" name="productName"
                                                        ngControl="DocCreatemodel.productName" #productNameEnt="ngModel"
                                                        [disabled]="isEdit">
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="batchNo">Batch No
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.batchNo" class="form-control"
                                                        id="batchNo" placeholder="Batch No" name="batchNo"
                                                        ngControl="DocCreatemodel.batchNo" #batchNooEnt="ngModel"
                                                        [disabled]="isEdit">
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="arNo">AR No
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.arNo" class="form-control"
                                                        id="arNo" placeholder="AR No" name="arNo"
                                                        ngControl="DocCreatemodel.arNo" #arNoEnt="ngModel"
                                                        [disabled]="isEdit">
                                                </div>
                                            </div>

                                        </div>

                                    </div>


                                </div>

                                <div id="tab-HOD" class="tab-pane">
                                    <div class="box">
                                        <!-- <div class="box-header" style="background-color: #b6cedf; height: 35px;">
                                            <div class="col-xs-6">
                                                <h3 class="box-title">Final Recommendation: By NPD Initiator HOD</h3>
                                            </div>
                                        </div> -->
                                        &nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="requesterId">Employee Id</label>
                                                    <input name="requesterId" id="requesterId" placeholder="Employee Id"
                                                        class="form-control" value="{{DocCreatemodel.empCode}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="plant">Plant</label>
                                                    <input name="plant" id="plant" placeholder="Location"
                                                        class="form-control" value="{{DocCreatemodel.location}}"
                                                        readonly>
                                                </div>
                                            </div>


                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="department">Department</label>
                                                    <input name="department" id="department" placeholder="Department"
                                                        class="form-control" value="{{DocCreatemodel.fromDept}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="date">Request Date</label>
                                                    <input name="date" id="date" placeholder="date" class="form-control"
                                                        value="{{DocCreatemodel.initialDocDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;
                                    <div class="box">
                                        &nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docRoom">Room<span style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.docRoom" class="form-control"
                                                        id="docRoom" name="docRoom" ngControl="DocCreatemodel.docRoom"
                                                        #docRoomEnt="ngModel"
                                                        (change)="GetRacMasterkList(DocCreatemodel.docRoom)"
                                                        matTooltip="Select Room" 
                                                        [disabled]="DocCreatemodel.agrregation=='Yes' || !Librarian || !isEdit" required>
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of RoomList" value={{mat.room}}>
                                                            {{mat.room}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docRack">Rack<span style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.docRack" class="form-control"
                                                        id="docRack" name="docRack" ngControl="DocCreatemodel.docRack"
                                                        #docRackEnt="ngModel" (change)="GetBins(DocCreatemodel)"
                                                        [disabled]="DocCreatemodel.agrregation=='Yes' || !Librarian || !isEdit" matTooltip="Select Rack" required>
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of RackList" value={{mat.rack}}>
                                                            {{mat.rack}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-12">
                                                <span style="color: green ;">{{success}}</span>
                                            </div>
                                            <div class="col-sm-12">
                                                <ol start="6" style="width: 85em; margin: 0 auto; display: block;">
                                                    <li id="thismonth" style="list-style: none;">
                                                        <ol>

                                                            <!-- <% while (rs3.next()) { l++; %> -->
                                                            <div *ngFor="let item of BinsList; let i = index">
                                                                <li title="{{item.prefix}}" style="width: 7em; height: 7em; float: left; margin: .2em; border: 2px solid #444;
                                                                    padding: .2em; overflow: auto;">

                                                                    <a [routerLink]=""
                                                                        (click)="det(item.bin)">{{item.bin}}</a>
                                                                    <!-- <% String k="" ; String currentkey=location + "$" + category + "$" + room + "$"
                                                                                + rackrange + "$" + binname; String
                                                                                a=" select case when (box_no = '' or box_no is null) then doc_no else 'b$'+box_no end d "
                                                                                + " from Doc_Create where location= '" + location + "' and Doc_Room='" +
                                                                                room + "'and Doc_Rack='" + rackrange + "' and doc_bin='" + binname + "'  "
                                                                                + " group by case when (box_no = '' or box_no is null) then doc_no else 'b$'+box_no end "
                                                                                ; ResultSet rsb=ad.selectQuery(a); while (rsb.next()) { if
                                                                                (rsb.getString("d").contains("b$")) { %> -->
                                                                    <ul>
                                                                        <li style="font-size: 12px; color: red">
                                                                            <a style="font-size: 9px; color: red">
                                                                                {{item.docNo}}
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                    <!-- <sub>
                                                                                        {{DocCreatemodel.docNo}}
                                                                                    </sub> -->
                                                                </li>
                                                            </div>

                                                            <!-- <% } %> -->
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docRoom">Room No</label>
                                                    <input name="docRoom" id="docRoom" placeholder="Doc Room"
                                                        class="form-control" value="{{DocCreatemodel.docRoom}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docRack">Rack</label>
                                                    <input name="docRack" id="docRack" placeholder="Doc Rack"
                                                        class="form-control" value="{{DocCreatemodel.docRack}}"
                                                        readonly>
                                                </div>
                                            </div>


                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docBin">Bin</label>
                                                    <input name="docBin" id="docBin" placeholder="Doc Bin"
                                                        class="form-control" value="{{DocCreatemodel.docBin}}" readonly>
                                                </div>
                                            </div>
                                        </div>


                                        &nbsp;&nbsp;&nbsp;
                                        &nbsp;&nbsp;&nbsp;
                                    </div>
                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;
                                    <div class="box">
                                        <div class="box-header">
                                            <div class="box-header" style="background-color: #68a7d2;color:white">
                                                <h4 class="box-title">Aggregation Information
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="agrregation">Aggregation (Yes/No)<span
                                                            style="color: red;">*</span>
                                                    </label>
                                                    <select [(ngModel)]="DocCreatemodel.agrregation"
                                                        class="form-control" id="agrregation" placeholder="yes/no"
                                                        name="agrregation" ngControl="DocCreatemodel.agrregation"
                                                        #agrregationEnt="ngModel" [disabled]="!isEdit || !Librarian"
                                                        matTooltip="Select Option">
                                                        <option >No</option>
                                                        <option >Yes</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="boxNo">Box No <span style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.boxNo" class="form-control"
                                                        id="boxNo" placeholder="box no" name="boxNo" (change)="getBoxDetails(DocCreatemodel.boxNo)"
                                                        ngControl="DocCreatemodel.boxNo" #boxNoEnt="ngModel"
                                                        [disabled]="DocCreatemodel.agrregation=='No' || !isEdit ">
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="boxDescription">Box Description <span
                                                            style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.boxDescription"
                                                        class="form-control" id="boxDescription" placeholder="box desc"
                                                        name="boxDescription" ngControl="DocCreatemodel.boxDescription"
                                                        #boxDescriptionEnt="ngModel"
                                                        [disabled]="DocCreatemodel.agrregation=='No'|| !isEdit">
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="agrregationComp">Aggregation Completion (Yes/No)<span
                                                            style="color: red;">*</span>
                                                    </label>
                                                    <select [(ngModel)]="DocCreatemodel.agrregationComp"
                                                        class="form-control" id="agrregationComp" placeholder="yes/no"
                                                        name="agrregationComp"
                                                        ngControl="DocCreatemodel.agrregationComp" #agrregationCompEnt="ngModel"
                                                        [disabled]="DocCreatemodel.agrregation=='No'|| !isEdit"
                                                        matTooltip="Select Option">
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option >Yes</option>
                                                        <option >No</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-12" *ngIf="isEdit">
                                                <label for="Reason">Comments<span style="color: red;">*</span> </label>
                                                <textarea [(ngModel)]="Comments" class="form-control" id="Reason"
                                                    placeholder="comments" name="comments" ngControl="Comments"
                                                    #commentsEnt="ngModel" required></textarea>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div id="tab-History" class="tab-pane">
                                    <table class="table table-bordered1 table-striped" style="align-self: auto;; ">
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>DOC Create History
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Initiator
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered1 table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Name</b></th>
                                                                <th><b>Employee ID</b> </th>
                                                                <th><b>Location</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>{{DocCreatemodel.fullName}}</td>
                                                                <td>{{DocCreatemodel.empCode}}</td>
                                                                <td>{{DocCreatemodel.location}}</td>
                                                                <td>{{DocCreatemodel.fromDept}}</td>
                                                                <td>{{DocCreatemodel.designation}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>WorkFlow
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="table-responsive table-bordered table-striped">
                                                    <table id="approversTable" class="table table-bordered1 table-striped">
                                                <!-- <div class="box-body table-bordered table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped"> -->
                                                        <thead>
                                                            <tr>
                                                                <th><b>Employee ID</b></th>
                                                                <th><b>Name</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                                <th><b>Date & Time</b></th>
                                                                <th><b>Reason</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let user of transactionslist; let i = index">
                                                                <td>{{user.approverId}}</td>
                                                                <td>{{user.employeeName}}</td>
                                                                <td>{{user.department}}</td>
                                                                <td>{{user.designation}}</td>
                                                                <td>{{user.approvedDate |date:'dd/MM/yyyy h:mm a'}}</td>
                                                                <td>{{user.comments}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div class="overlay" *ngIf="isLoadingPop">
                        <!--<i class="fa fa-refresh fa-spin"></i>--> <i class="fa fa-spinner fa-pulse"></i>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                <div *ngIf="!view" class="row pull-right">

                    <button type="button" class="btn btn-primary" (click)="onreview('Approved')"
                        matTooltip="Click to Submit" [disabled]="!dataForm.valid"
                        *ngIf="isEdit && DocCreatemodel.pendingApprover==currentUser.employeeId && Librarian">Accept</button>

                    <button type="button" class="btn btn-primary" (click)="onreview('Rejected')"
                        matTooltip="Click to Reject" [disabled]="Comments==null || Comments ==''"
                        *ngIf="isEdit && DocCreatemodel.pendingApprover==currentUser.employeeId && Librarian">Reject</button>
                  
                    <!-- <button type="button" class="btn btn-primary" (click)="onSaveEntry('SAVE')"
                        matTooltip="Click to Save" *ngIf="!isEdit && DocCreatemodel.apprvrStatus==null">Save</button> -->
                    <button type="button" class="btn btn-primary" (click)="onSaveEntry('SUBMIT')"
                        matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid"
                        *ngIf="!isEdit">Save & Submit</button>
                    <button type="button" class="btn btn-primary" (click)="onSubmitEntry(DocCreatemodel)"
                        matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid" *ngIf="!isEdit && DocCreatemodel.apprvrStatus=='Saved'
                    ">Submit</button>
                    <!-- <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
              [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button> -->
                    <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
                        matTooltip="Click to Clear">Clear</button>
                    <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                        data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                </div>
                <div *ngIf="view" class="row pull-right">
                    <button type="button" class="btn btn-default" style="background-color:darkgray;color:white;"
                        data-dismiss="modal" [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>

<div class="modal fade" id="borrowModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">

    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title"> MLLDLS Doc Borrow
                </h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;">
                <div class="row">
                    <div class="col-sm-12">
                        <form #borrowForm="ngForm" (keydown.enter)="$event.preventDefault()">
                            <ul class="nav nav-tabs" style="border: 2px;;border-color: black;" id="myTab">
                                <li class="active"><a data-toggle="tab" href="#tab-MD">SUBMISSION</a></li>
                                <!-- <li><a data-toggle="tab" href="#tab-History"><b>HISTORY</b></a></li> -->
                            </ul>
                            &nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;
                            <div class="tab-content">
                                <div id="tab-MD" class="tab-pane active">
                                    <div class="box">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="fromDept">Department</label>
                                                    <input name="fromDept" id="fromDept" placeholder="department"
                                                        class="form-control" value="{{DocBorrowmodel.fromDept}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="finalDocNo">Document No.</label>
                                                    <input name="finalDocNo" id="finalDocNo" placeholder="document no."
                                                        class="form-control" value="{{DocBorrowmodel.initialDocNo}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="initialDocDate">Date</label>
                                                    <input name="initialDocDate" id="initialDocDate" placeholder="date"
                                                        class="form-control"
                                                        value="{{DocBorrowmodel.initialDocDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docNo">Doc No <span style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.docNo" class="form-control"
                                                        id="docNo" placeholder="doc no" name="docNo"
                                                        ngControl="DocCreatemodel.docNo" #docNoEnt="ngModel"
                                                        [disabled]="isEdit" required>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docType">Document Type<span
                                                            style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.docType" class="form-control"
                                                        id="docType" name="docType" ngControl="DocCreatemodel.docType"
                                                        #docTypeEnt="ngModel"
                                                        (change)="GetCategory(DocCreatemodel.docType)"
                                                        [disabled]="isEdit" matTooltip="Select docType" required>
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of CategoryList" value={{mat.type}}>
                                                            {{mat.type}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="category">Category<span
                                                            style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.category" class="form-control"
                                                        id="category" name="category"
                                                        ngControl="DocCreatemodel.category" #categoryEnt="ngModel"
                                                        [disabled]="isEdit" matTooltip="Select category" required>
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of CategoryList" value={{mat.category}}>
                                                            {{mat.category}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docSubCategory">Sub Category<span
                                                            style="color:red">*</span></label>
                                                    <select [(ngModel)]="DocCreatemodel.docSubCategory"
                                                        class="form-control" id="docSubCategory" name="docSubCategory"
                                                        ngControl="DocCreatemodel.docSubCategory" #categoryEnt="ngModel"
                                                        [disabled]="isEdit" matTooltip="Select sub category">
                                                        <option [ngValue]="undefined" disabled>--Select an Option--
                                                        </option>
                                                        <option *ngFor="let mat of CategoryList"
                                                            value={{mat.Subcategory}}>
                                                            {{mat.Subcategory}}</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docShtDesc">Doc Short Desc <span
                                                            style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.docShtDesc" class="form-control"
                                                        id="docShtDesc" placeholder="doc short desc" name="docShtDesc"
                                                        ngControl="DocCreatemodel.docShtDesc" #docDescEnt="ngModel"
                                                        [disabled]="isEdit" required>
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="docDesc">DOC Long Desc <span
                                                            style="color: red;">*</span>
                                                    </label>
                                                    <input [(ngModel)]="DocCreatemodel.docDesc" class="form-control"
                                                        id="docDesc" placeholder="doc long desc" name="docDesc"
                                                        ngControl="DocCreatemodel.docDesc" #docDescEnt="ngModel"
                                                        [disabled]="isEdit" required>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="barcode">Barcode</label>
                                                    <span style="color:red">*</span>
                                                    <input [(ngModel)]="DocCreatemodel.barcode" class="form-control"
                                                        id="barcode" placeholder="Barcode" name="barcode"
                                                        ngControl="DocCreatemodel.barcode" #barcodeEnt="ngModel"
                                                        [disabled]="isEdit">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="initialDocDate">Manufacturer Date</label>
                                                    <input name="initialDocDate" id="initialDocDate" placeholder="date"
                                                        class="form-control"
                                                        value="{{DocCreatemodel.initialDocDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="effectiveDate">Effective Date</label>
                                                    <input name="effectiveDate" id="effectiveDate"
                                                        placeholder="effective date" class="form-control"
                                                        value="{{DocCreatemodel.effectiveDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="arNo">AR No
                                                    </label><span style="color:red">*</span>
                                                    <input [(ngModel)]="DocCreatemodel.arNo" class="form-control"
                                                        id="arNo" placeholder="AR No" name="arNo"
                                                        ngControl="DocCreatemodel.arNo" #arNoEnt="ngModel"
                                                        [disabled]="isEdit">
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="expiryDate">Retention Date </label>
                                                    <input name="expiryDate" id="expiryDate"
                                                        placeholder="retention Date" class="form-control"
                                                        value="{{DocCreatemodel.expiryDate | date:'dd/MM/yyyy'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;

                                    <div class="box-header">
                                        <div class="box-header" style="background-color: #68a7d2;color:white">
                                            <h4 class="box-title">Aggregation Information
                                            </h4>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-3">
                                            <div class="form-group form-group-sm">
                                                <label for="agrregation">Aggregation (Yes/No)<span
                                                        style="color: red;">*</span>
                                                </label>
                                                <select [(ngModel)]="DocCreatemodel.agrregation" class="form-control"
                                                    id="agrregation" placeholder="yes/no" name="agrregation"
                                                    ngControl="DocCreatemodel.agrregation" #docDescEnt="ngModel"
                                                    [disabled]="isEdit" matTooltip="Select Option">
                                                    <option [ngValue]="undefined" disabled>--Select an Option--
                                                    </option>
                                                    <option >No</option>
                                                    <option >Yes</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-sm-3">
                                            <div class="form-group form-group-sm">
                                                <label for="boxNo">Box No <span style="color: red;">*</span>
                                                </label>
                                                <input [(ngModel)]="DocCreatemodel.boxNo" class="form-control"
                                                    id="boxNo" placeholder="box no" name="boxNo"
                                                    ngControl="DocCreatemodel.boxNo" #docNoEnt="ngModel"
                                                    [disabled]="isEdit">
                                            </div>
                                        </div>

                                        <div class="col-sm-3">
                                            <div class="form-group form-group-sm">
                                                <label for="boxDescription">Box Description <span
                                                        style="color: red;">*</span>
                                                </label>
                                                <input [(ngModel)]="DocCreatemodel.boxDescription" class="form-control"
                                                    id="boxDescription" placeholder="box desc" name="boxDescription"
                                                    ngControl="DocCreatemodel.boxDescription" #docNoEnt="ngModel"
                                                    [disabled]="isEdit">
                                            </div>
                                        </div>

                                        <div class="col-sm-3">
                                            <div class="form-group form-group-sm">
                                                <label for="agrregationComp">Aggregation Completion (Yes/No)<span
                                                        style="color: red;">*</span>
                                                </label>
                                                <select [(ngModel)]="DocCreatemodel.agrregationComp"
                                                    class="form-control" id="agrregationComp" placeholder="yes/no"
                                                    name="agrregationComp" ngControl="DocCreatemodel.agrregationComp"
                                                    #docDescEnt="ngModel" [disabled]="isEdit"
                                                    matTooltip="Select Option">
                                                    <option [ngValue]="undefined" disabled>--Select an Option--
                                                    </option>
                                                    <option >No</option>
                                                    <option >Yes</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-sm-12">
                                            <label for="Reason">Reason<span style="color: red;">*</span> </label>
                                            <textarea [(ngModel)]="DocBorrowmodel.reason" class="form-control"
                                                id="Reason" placeholder="reason" name="reason" [disabled]="isEdit"
                                                ngControl="DocBorrowmodel.reason" #reasonEnt="ngModel"
                                                required></textarea>
                                        </div>
                                        <div class="col-sm-12" *ngIf="isEdit">
                                            <label for="Reason">Comments<span style="color: red;">*</span> </label>
                                            <textarea [(ngModel)]="Comments" class="form-control" id="Reason"
                                                placeholder="comments" name="comments" ngControl="Comments"
                                                #commentsEnt="ngModel" required></textarea>
                                        </div>
                                    </div>

                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;
                                </div>

                                <div id="tab-History" class="tab-pane">
                                    <table class="table table-bordered1 table-striped" style="align-self: auto;; ">
                                        <tr style="align-items: center;">
                                            <td colspan="2" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Doc Borrow History
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Initiator
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered1 table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Name</b></th>
                                                                <th><b>Employee ID</b> </th>
                                                                <th><b>Location</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>{{DocBorrowmodel.fullName}}</td>
                                                                <td>{{DocBorrowmodel.empCode}}</td>
                                                                <td>{{DocBorrowmodel.location}}</td>
                                                                <td>{{DocBorrowmodel.fromDept}}</td>
                                                                <td>{{DocBorrowmodel.designation}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>WorkFlow
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Request Type</b></th>
                                                                <th><b>Employee ID</b></th>
                                                                <th><b>Name</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                                <th><b>Date & Time</b></th>
                                                                <th><b>Reason</b></th>
                                                                <th><b>Comments</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let user of transactionslist; let i = index">
                                                                <td>{{user.reqType}}</td>
                                                                <td>{{user.approverId}}</td>
                                                                <td>{{user.employeeName}}</td>
                                                                <td>{{user.department}}</td>
                                                                <td>{{user.designation}}</td>
                                                                <td>{{user.approvedDate |date:'dd/MM/yyyy h:mm a'}}</td>
                                                                <td>{{user.reason}}</td>
                                                                <td>{{user.comments}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                                <div *ngIf="!view" class="row pull-right">

                                    <button type="button" class="btn btn-primary" (click)="onreview('Approved')"
                                        matTooltip="Click to Submit" [disabled]="!borrowForm.valid"
                                        *ngIf="isEdit && DocBorrowmodel.pendingApprover==currentUser.employeeId ">Approve</button>

                                    <button type="button" class="btn btn-primary" (click)="onreview('Rejected')"
                                        matTooltip="Click to Reject" [disabled]="Comments==null || Comments ==''"
                                        *ngIf="isEdit && DocBorrowmodel.pendingApprover==currentUser.employeeId ">Reject</button>
                                    &nbsp;
                                    <div *ngIf="isEdit && Approver=='Approving Manager'" class="dropdown "> <a
                                            data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
                                                <button type="button" class="btn btn-primary"
                                                    [disabled]="Comments==null"
                                                    matTooltip="Click to Revert">Revert</button>
                                            </span>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a (click)="onRevertRequest('Initiator')">Initiator</a></li>

                                        </ul>
                                    </div>
                                    &nbsp;
                                    <!-- <button type="button" class="btn btn-primary" (click)="onSaveEntry('SAVE')"
                                        matTooltip="Click to Save" *ngIf="!isEdit">Save</button> -->
                                    <button type="button" class="btn btn-primary" (click)="onSaveBorrowEntry('SUBMIT')"
                                        matTooltip="Click to Save & Submit" [disabled]="!borrowForm.valid"
                                        *ngIf="!isEdit">Save & Submit</button>
                                    <button type="button" class="btn btn-primary"
                                        (click)="onSubmitBorrowEntry(DocBorrowmodel)" matTooltip="Click to Save & Submit"
                                        [disabled]="!borrowForm.valid" *ngIf="!isEdit && DocBorrowmodel.apprvrStatus=='Saved'
                                                    ">Submit</button>
                                    <!-- <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
                                            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button> -->
                                    <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
                                        matTooltip="Click to Clear">Clear</button>
                                    <button type="button" class="btn btn-default"
                                        style="background-color:darkgray;color:white;" data-dismiss="modal"
                                        [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                                </div>
                                <div *ngIf="view" class="row pull-right">
                                    <button type="button" class="btn btn-default"
                                        style="background-color:darkgray;color:white;" data-dismiss="modal"
                                        [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>