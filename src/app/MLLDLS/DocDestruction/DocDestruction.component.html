<section class="content-header">
    <h1 class="display-1">
        MLLDLS
        <small> Destruction Form </small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-database" aria-hidden="true"></i> Home</a></li>
        <li class="active">DOC Destruction</li>
    </ol>
</section>
<!--Main Contect-->
<section class="content">
    <div class="box">
        <div class="box-header">
            <div class="col-xs-6">
                <h3 class="box-title"> DOC Destruction </h3>
                <span class="label label-danger" *ngIf="errMsg.length>0">{{errMsg}}</span>
            </div>
            <div class="col-xs-6">
                <button type="button" class="btn btn-primary pull-right"
                    (click)="onUserActions(false,DocCreatemodel,false,'')"><i class="fa fa-plus" aria-hidden="true"></i>
                    New Request</button>
            </div>
        </div>
        <div id="dateFilterPanel">
            <div class="col-sm-12">
                <div class="card-body" style="border: black; box-shadow: grey;">
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="requestno"> Doc No</label>
                                <input [(ngModel)]="filterdocno" class="form-control" id="requestno"
                                    placeholder="Request No" name="requestno" ngControl="filterdocno"
                                    #requestnoEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="requestno"> Barcode</label>
                                <input [(ngModel)]="filterbarcode" class="form-control" id="place" placeholder="Product"
                                    name="barcode" ngControl="filterbarcode" #requestnoEnt="ngModel">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group form-group-sm">
                                <label for="fltrstatus">Request Type</label>
                                <select [(ngModel)]="filterstatus" class="form-control" id="fltrstatus"
                                    name="fltrstatus" ngControl="filterstatus" #fltrstatusEnt="ngModel"
                                    matTooltip="Select Status">
                                    <option [ngValue]="null" disabled>--Select an Option--</option>
                                    <option *ngFor="let status of statuslist" value={{status.name}}>{{status.name}}
                                    </option>
                                </select>
                                <!-- <ng-multiselect-dropdown style="width:100%" id="fltrstatus" name="fltrstatus"
                                    ngControl="filterstatus" #fltrstatusEnt="ngModel" matTooltip="Select Status"
                                    [settings]="dropdownSettings" [(ngModel)]="filterstatus" [data]="statuslist"
                                    (onSelect)="onItemSelect($event)" (onDeSelect)="onItemDeSelect($event)"
                                    (onSelectAll)="onSelectAll($event)" 
                                    (onDeSelectAll)="onDeSelectAll($event)">
                                </ng-multiselect-dropdown> -->
                                <!-- -->
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-sm-4">
                            <label for="fromdate">From Date</label>
                            <div class="form-group form-group-sm"
                                [ngClass]="(fromDate.touched && !fromDate.valid)?'has-error':''">
                                <input [matTooltipPosition]="'below'" matTooltip="Click to change from date"
                                    [owlDateTime]="dt11" [owlDateTimeTrigger]="dt11" name="fromDate"
                                    class="form-control" [(ngModel)]="from_date" #fromDate="ngModel">
                                <owl-date-time [pickerType]="'calendar'" #dt11 style="width: 250px;"></owl-date-time>
                                <span class="help-block" *ngIf="!fromDate.valid && fromDate.touched">Please enter valid
                                    From Date.</span>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <label for="todate">To Date</label>
                            <div class="form-group form-group-sm"
                                [ngClass]="(toDate.touched && !toDate.valid)?'has-error':''">
                                <input [min]="from_date" [max]="today" [matTooltipPosition]="'below'"
                                    matTooltip="Click to change to date" [owlDateTime]="dt12"
                                    [owlDateTimeTrigger]="dt12" name="toDate" class="form-control" [(ngModel)]="to_date"
                                    #toDate="ngModel">
                                <owl-date-time [pickerType]="'calendar'" #dt12 style="width: 250px;"></owl-date-time>
                                <span class="help-block" *ngIf="!toDate.valid && toDate.touched">Please enter valid
                                    To Date.</span>
                            </div>
                        </div>

                        <div class="col-sm-2">
                            <label>&nbsp;</label>
                            <div class="form-group form-group-sm">
                                <button class="btn btn-primary btn-sm" (click)="getAllEntries1();"
                                    [disabled]="(!toDate.valid && toDate.touched) || (!fromDate.valid && fromDate.touched)"
                                    matTooltip="click to go">Go</button>
                                &nbsp;&nbsp;
                                <button class="btn btn-primary btn-sm" (click)="clearFilter();"
                                    matTooltip="click to reset">Clear</button>
                                    &nbsp;&nbsp;
                                 <button class="btn btn-primary btn-sm" (click)="downloadPdf();"
                                    [disabled]="!DocCreateFilter1.length>0" matTooltip="click to print">Print Report</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;

        <div class="box-body table-representative">
            <table id="userTable" class="table table-bordered table-striped">
                <thead style="background-color: #68a7d2;color: white;">
                    <tr>
                        <th>Sl No</th>
                        <th>Type</th>
                        <th>Doc No</th>
                        <th>Doc Title</th>
                        <!-- <th>Batch No</th> -->
                        <th>Requester</th>
                        <th>Department</th>
                        <th>Document Status</th>
                        <th>Person Responsible</th>
                        <th>Request Status</th>
                        <th>Pending with</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of DocCreateFilter1; let i = index">
                        <td> {{i+1}}</td>
                        <td>{{item.docType}}</td>
                        <td>{{item.docNo }}</td>
                        <td>{{item.docShtDesc}}</td>
                        <!-- <td>{{item.batchNo}}</td> -->
                        <td>{{item.empCode}}</td>
                        <td>{{item.fromDept}}</td>
                        <td>{{item.borrowStatus}}</td>
                        <td>{{item.personResponsible}}</td>
                        <td>{{item.reqStatus}}</td>
                        <td>{{item.pendingApprover}}</td>
                        
                        <td>
                            <table>
                                <tr>

                                    &nbsp;
                                    <td>
                                        <button
                                            *ngIf="item.reqStatus =='Saved' && item.empCode==this.currentUser.employeeId"
                                            type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                                            (click)="onUserActions(false,item,false,'Saved')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                    &nbsp;

                                    <!-- *ngIf="Apprvr" -->
                                    
                                    <td
                                        *ngIf="item.pendingApprover==currentUser.employeeId ">
                                        <button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                                            (click)="onApproverActions(true,item,false,'')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                    <!-- <td *ngIf="item.npdHodInitialstageSubmitFlag==0">
                                        <button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to edit details" class="btn btn-primary btn-xs"
                                            (click)="onUserActions(true,item,false,'')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td> -->
                                    &nbsp;
                                    <td>
                                        <button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to view details" class="btn btn-primary btn-xs"
                                            (click)="onUserActions(true,item,false,'View')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </td>
                                    &nbsp;
                                    <!-- <td>
                                        <button type="button" [matTooltipPosition]="'after'"
                                            matTooltip="Click to View History" class="btn btn-primary btn-xs"
                                            (click)="ShowHistory(item)">
                                            <i class="fa fa-history"></i>
                                        </button>
                                    </td> -->
                                    &nbsp;
                                    <!--  <td>
                        <button type="button" [matTooltipPosition]="'after'" matTooltip="Click to print"
                          class="btn btn-primary btn-xs" (click)="onUserActions(true,item,true,'View')">
                          <i class="fas fa-print"></i>
                        </button>
                      </td>  -->
                                </tr>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="overlay" *ngIf="isLoading">
            <i class="fa fa-spinner fa-pulse"></i>
        </div>
    </div>
</section>

<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-md  modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title" style="color: #0FB381; text-align: center;"><span class="text pull-center"
                        *ngIf="errMsgPop1.length>0"><i class="fa fa-check"></i>{{errMsgPop1}}</span></h3>
            </div>
        </div>
    </div>
    <div class="overlay" *ngIf="isLoading">
        <i class="fa fa-spinner fa-pulse"></i>
    </div>
</div>

<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">

    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title"> MLLDLS Doc Destruction
                </h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;">
                <div class="row">
                    <div class="col-sm-12">
                        <form #dataForm="ngForm" (keydown.enter)="$event.preventDefault()">
                            <ul class="nav nav-tabs" style="border: 2px;;border-color: black;" id="myTab">
                                <li class="active"><a data-toggle="tab" href="#tab-MD">SUBMISSION</a></li>
                                <li><a data-toggle="tab" href="#tab-History"><b>HISTORY</b></a></li>
                            </ul>
                            &nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;
                            <div class="tab-content">
                                <div id="tab-MD" class="tab-pane active">
                                    <div class="box">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="fromDept">Department</label>
                                                    <input name="fromDept" id="fromDept" placeholder="department"
                                                        class="form-control" value="{{DocCreatemodel.fromDept}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group form-group-sm">
                                                    <label for="finalDocNo">Document No.</label>
                                                    <input name="finalDocNo" id="finalDocNo" placeholder="document no."
                                                        class="form-control" value="{{DocCreatemodel.initialDocNo}}"
                                                        >
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <label>&nbsp;</label>
                                                <div class="form-group form-group-sm">
                                                    <button class="btn btn-primary btn-sm" (click)="getAllEntries();"                                                       
                                                        matTooltip="click to go">Search</button>
                                                  
                                                </div>
                                            </div>
                                           
                                        </div>                                        
                                    </div>
                                    <div class="box">
                                        <div class="box-body table-responsive" *ngIf="!isEdit && status !='Saved'">
                                            <table id="userTable1" class="table table-bordered table-striped">
                                                <thead style="background-color: #68a7d2;color:white;">
                                                    <tr>
                                                        <th></th>
                                                        <th>Sl No</th>
                                                        <th>Box No</th>
                                                        <th>Doc No</th>
                                                        <th>Doc Title</th>
                                                        <th>Initial Doc Date</th>
                                                        <th>Room</th>
                                                        <th>Rack</th>
                                                        <th>Bin</th>
                                                        <th>Approval Status</th>
                                                        <th>Document Status</th>
                                                        <th>Retention Date</th>
                                                        <th>Person Responsible</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of DocCreateFilter; let i = index">
                                                        <td> <input  type="checkbox" [id]="'chkusage'+item.id"
                                                            [name]="'send'+item.id" [(ngModel)]="item.isSelected" (change)="isAllSelected()" #usageEnt="ngModel">
                                                        </td>
                                                        <td> {{i+1}}</td>
                                                        <td>{{item.boxNo}}</td>
                                                        <td>{{item.docNo }}</td>
                                                        <td>{{item.docShtDesc}}</td>
                                                        <td>{{item.initialDocDate | date:'dd/MM/yyyy HH:mm'}}</td>
                                                        <td>{{item.docRoom}}</td>
                                                        <td>{{item.docRack}}</td>
                                                        <td>{{item.docBin}}</td>
                                                        <td>{{item.reqStatus}}</td> 
                                                        <td>{{item.borrowStatus}}</td> 
                                                        <td>{{item.retentionPeriod}}</td>                                                    
                                                        <td>{{item.personResponsible}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="table-responsive table-bordered table-striped" *ngIf="isEdit || status=='Saved'" >
                                            <table id="Producttable" class="table table-bordered1 table-striped">
                                              <thead style="background-color: #68a7d2; color:white;">
                                                    <tr>
                                                        <th>Sl No</th>
                                                        <th>Doc No</th>
                                                        <th>Doc Desc</th>
                                                        <th>Doc Type</th>
                                                        <th>Retention period</th>
                                                        <th>Retention Date</th>
                                                        <th>Category</th>
                                                        <th>Room</th>
                                                        <th>Rack</th>
                                                        <th>Bin</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of docDestRequest; let i = index">                                                       
                                                        <td> {{i+1}}</td>
                                                        <td>{{item.docNo }}</td>
                                                        <td>{{item.docShtDesc}}</td>
                                                        <td>{{item.docType }}</td>                                                        
                                                        <td>{{item.retentionPeriod}}</td> 
                                                        <td>{{item.expiryDate | date:'dd/MM/yyyy HH:mm' }}</td> 
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.docRoom}}</td>
                                                        <td>{{item.docRack}}</td>
                                                        <td>{{item.docBin}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                   
                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;

                                    

                                    <div class="row">
                                       
                                        <div class="col-sm-12" *ngIf="!isEdit">
                                            <label for="Reason">Reason<span style="color: red;">*</span> </label>
                                            <textarea [(ngModel)]="DocCreatemodel.comments" class="form-control" id="Reason"
                                                placeholder="reason" name="reason" ngControl="DocCreatemodel.comments"
                                                #reasonEnt="ngModel" required></textarea>   
                                        </div>
                                        <div class="col-sm-12" *ngIf="isEdit">
                                            <label for="Reason">Comments<span style="color: red;">*</span> </label>
                                            <textarea [(ngModel)]="Comments" class="form-control" id="Reason"
                                                placeholder="comments" name="comments" ngControl="Comments"
                                                #commentsEnt="ngModel" required></textarea>   
                                        </div>
                                    </div>

                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;
                                </div>
                            
                                <div id="tab-History" class="tab-pane">
                                    <table class="table table-bordered1 table-striped" style="align-self: auto;; ">
                                        <tr style="align-items: center;">
                                            <td colspan="2" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Doc Destruction History
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Initiator
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered1 table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Name</b></th>
                                                                <th><b>Employee ID</b> </th>
                                                                <th><b>Location</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>{{DocCreatemodel.fullName}}</td>
                                                                <td>{{DocCreatemodel.empCode}}</td>
                                                                <td>{{DocCreatemodel.location}}</td>
                                                                <td>{{DocCreatemodel.fromDept}}</td>
                                                                <td>{{DocCreatemodel.designation}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>WorkFlow
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered1 table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Type</b></th>
                                                                <th><b>Employee ID</b></th>
                                                                <th><b>Name</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                                <th><b>Status</b></th>
                                                                <th><b>Date & Time</b></th>
                                                                <th><b>Comments</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let user of transactionslist; let i = index">
                                                                <td>{{user.reqType}}</td>
                                                                <td>{{user.approverId}}</td>
                                                                <td>{{user.employeeName}}</td>
                                                                <td>{{user.department}}</td>
                                                                <td>{{user.designation}}</td>
                                                                <td>{{user.status}}</td>
                                                                <td>{{user.approvedDate |date:'dd/MM/yyyy h:mm a'}}</td>
                                                                <td>{{user.comments}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <span class="text-red pull-left" *ngIf="errMsgPop.length>0"><i
                                        class="fa fa-warning"></i>{{errMsgPop}}</span>
                                <div *ngIf="!view" class="row pull-right">
                                    
                                    <button type="button" class="btn btn-primary" (click)="onreview('Approved')"
                                        matTooltip="Click to Submit" [disabled]="!dataForm.valid"
                                        *ngIf="isEdit && DocCreatemodel.pendingApprover==currentUser.employeeId ">Approve</button>

                                    <button type="button" class="btn btn-primary" (click)="onreview('Rejected')"
                                        matTooltip="Click to Reject"
                                        *ngIf="isEdit && DocCreatemodel.pendingApprover==currentUser.employeeId ">Reject</button>
                                    &nbsp;
                                    <div *ngIf="isEdit && Approver=='Approving Manager'" class="dropdown "> <a
                                            data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
                                                <button type="button" class="btn btn-primary"
                                                    [disabled]="Comments==null"
                                                    matTooltip="Click to Revert">Revert</button>
                                            </span>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a (click)="onRevertRequest('Initiator')">Initiator</a></li>
                                            
                                        </ul>
                                    </div>
                                    &nbsp;
                                    <button type="button" class="btn btn-primary" (click)="onSaveEntry('Save')"
                                        matTooltip="Click to Save" *ngIf="!isEdit && DocCreatemodel.reqStatus !='Saved'"
                                        >Save</button>
                                    <button type="button" class="btn btn-primary" (click)="onSaveEntry('Save&Submit')"
                                        matTooltip="Click to Save & Submit" [disabled]="!dataForm.valid" *ngIf="!isEdit && DocCreatemodel.reqStatus !='Saved'"
                                       >Save & Submit</button>
                                    <button type="button" class="btn btn-primary"
                                        (click)="onSubmitEntry(DocCreatemodel)" matTooltip="Click to Save & Submit"
                                        [disabled]="!dataForm.valid" *ngIf="!isEdit && DocCreatemodel.reqStatus=='Saved'
                                                    ">Submit</button>
                                    <!-- <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
                                            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button> -->
                                    <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
                                        matTooltip="Click to Clear">Clear</button>
                                    <button type="button" class="btn btn-default"
                                        style="background-color:darkgray;color:white;" data-dismiss="modal"
                                        [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                                </div>
                                <div *ngIf="view" class="row pull-right">
                                    <button type="button" class="btn btn-default"
                                        style="background-color:darkgray;color:white;" data-dismiss="modal"
                                        [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="approverModal" role="dialog" aria-labelledby="approverModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">

    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #68a7d2;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title"> MLLDLS Doc Destruction
                </h3>
            </div>
            <div class="modal-body box-primary" style="box-shadow: none;">
                <div class="row">
                    <div class="col-sm-12">
                        <form #data1Form="ngForm" (keydown.enter)="$event.preventDefault()">
                            <ul class="nav nav-tabs" style="border: 2px;;border-color: black;" id="myTab">
                                <li class="active"><a data-toggle="tab" href="#tab-MD1">SUBMISSION</a></li>
                                <li><a data-toggle="tab" href="#tab-History1"><b>HISTORY</b></a></li>
                            </ul>
                            &nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;
                            <div class="tab-content">
                                <div id="tab-MD1" class="tab-pane active">
                                    <div class="box">
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="fromDept">Department</label>
                                                    <input name="fromDept" id="fromDept" placeholder="department"
                                                        class="form-control" value="{{docdestructionModel.fromDept}}"
                                                        readonly>
                                                </div>
                                            </div>

                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="finalDocNo">Request No.</label>
                                                    <input name="finalDocNo" id="finalDocNo" placeholder="document no."
                                                        class="form-control" value="{{docdestructionModel.destructionNo}}"
                                                        readonly>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="finalDocNo">Date</label>
                                                    <input name="finalDocNo" id="finalDocNo" placeholder="document no."
                                                        class="form-control" value="{{docdestructionModel.submittedDate | date:'dd/MM/yyyy HH:mm a'}}"
                                                        readonly>
                                                </div>
                                            </div>
                                            <div class="col-sm-3">
                                                <div class="form-group form-group-sm">
                                                    <label for="finalDocNo">Location</label>
                                                    <input name="finalDocNo" id="finalDocNo" placeholder="document no."
                                                        class="form-control" value="{{docdestructionModel.location}}"
                                                        readonly>
                                                </div>
                                            </div>
                                           
                                        </div>                                        
                                    </div>
                                    <div class="table-responsive table-bordered table-striped">
                                        <table id="Producttable" class="table table-bordered1 table-striped">
                                          <thead style="background-color: #68a7d2; color:white;">
                                                <tr>
                                                    <th>Sl No</th>
                                                    <th>Doc No</th>
                                                    <th>Doc Desc</th>
                                                    <th>Doc Type</th>
                                                    <th>Retention period</th>
                                                    <th>Retention Date</th>
                                                    <th>Category</th>
                                                    <th>Room</th>
                                                    <th>Rack</th>
                                                    <th>Bin</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of docDestRequest; let i = index">                                                       
                                                    <td> {{i+1}}</td>
                                                    <td>{{item.docNo }}</td>
                                                    <td>{{item.docShtDesc}}</td>
                                                    <td>{{item.docType }}</td>                                                        
                                                    <td>{{item.retentionPeriod}}</td> 
                                                    <td>{{item.expiryDate | date:'dd/MM/yyyy HH:mm' }}</td> 
                                                    <td>{{item.category}}</td>
                                                    <td>{{item.docRoom}}</td>
                                                    <td>{{item.docRack}}</td>
                                                    <td>{{item.docBin}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;

                                    

                                    <div class="row">
                                       
                                       
                                        <div class="col-sm-12" *ngIf="isEdit">
                                            <label for="Reason">Comments<span style="color: red;">*</span> </label>
                                            <textarea [(ngModel)]="Comments" class="form-control" id="Reason"
                                                placeholder="comments" name="comments" ngControl="Comments"
                                                #commentsEnt="ngModel" required></textarea>   
                                        </div>
                                    </div>

                                    &nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;
                                </div>
                            
                                <div id="tab-History1" class="tab-pane">
                                    <table class="table table-bordered1 table-striped" style="align-self: auto;; ">
                                        <tr style="align-items: center;">
                                            <td colspan="2" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Doc Destruction History
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>Initiator
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered1 table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Name</b></th>
                                                                <th><b>Employee ID</b> </th>
                                                                <th><b>Location</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>{{DocCreatemodel.fullName}}</td>
                                                                <td>{{DocCreatemodel.empCode}}</td>
                                                                <td>{{DocCreatemodel.location}}</td>
                                                                <td>{{DocCreatemodel.fromDept}}</td>
                                                                <td>{{DocCreatemodel.designation}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr style="align-items: center;">
                                            <td colspan="3" style="align-items: center;">
                                                <label style="align-items: center;"><strong>WorkFlow
                                                        Details</strong></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="box-body table-bordered1 table-striped">
                                                    <table id="approversTable"
                                                        class="table table-bordered1 table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><b>Type</b></th>
                                                                <th><b>Employee ID</b></th>
                                                                <th><b>Name</b></th>
                                                                <th><b>Department</b></th>
                                                                <th><b>Designation</b></th>
                                                                <th><b>Status</b></th>
                                                                <th><b>Date & Time</b></th>
                                                                <th><b>Comments</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let user of transactionslist; let i = index">
                                                                <td>{{user.reqType}}</td>
                                                                <td>{{user.approverId}}</td>
                                                                <td>{{user.employeeName}}</td>
                                                                <td>{{user.department}}</td>
                                                                <td>{{user.designation}}</td>
                                                                <td>{{user.status}}</td>
                                                                <td>{{user.approvedDate |date:'dd/MM/yyyy h:mm a'}}</td>
                                                                <td>{{user.comments}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <div class="modal-footer">
                               
                                <div *ngIf="!view" class="row pull-right">
                                    
                                    <button type="button" class="btn btn-primary" (click)="onreview('Approve')"
                                        matTooltip="Click to Submit" [disabled]="!data1Form.valid"
                                        *ngIf="isEdit && docdestructionModel.pendingApprover==currentUser.employeeId ">Approve</button>

                                    <button type="button" class="btn btn-primary" (click)="onreview('Rejected')"
                                        matTooltip="Click to Reject"
                                        *ngIf="isEdit && docdestructionModel.pendingApprover==currentUser.employeeId ">Reject</button>
                                    &nbsp;
                                    <div *ngIf="isEdit && Approver=='Approving Manager'" class="dropdown "> <a
                                            data-toggle="dropdown" class="dropdown-toggle" href="#"><span>
                                                <button type="button" class="btn btn-primary"
                                                    [disabled]="Comments==null"
                                                    matTooltip="Click to Revert">Revert</button>
                                            </span>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a (click)="onRevertRequest('Initiator')">Initiator</a></li>
                                            
                                        </ul>
                                    </div>
                                    &nbsp;
                                    <button type="button" class="btn btn-primary" (click)="onSaveEntry('SAVE')"
                                        matTooltip="Click to Save" *ngIf="!isEdit"
                                        >Save</button>
                                    <button type="button" class="btn btn-primary" (click)="onSaveEntry('SUBMIT')"
                                        matTooltip="Click to Save & Submit" [disabled]="!data1Form.valid" *ngIf="!isEdit"
                                       >Save & Submit</button>
                                    <button type="button" class="btn btn-primary"
                                        (click)="onSubmitEntry(DocCreatemodel)" matTooltip="Click to Save & Submit"
                                        [disabled]="!data1Form.valid" *ngIf="!isEdit && DocCreatemodel.apprvrStatus=='Saved'
                                                    ">Submit</button>
                                    <!-- <button type="button" class="btn btn-primary" (click)="OnClickback()" data-dismiss="modal" *ngIf="!isEdit"
                                            [disabled]="isLoadingPop" matTooltip="Click to Go Back">Back</button> -->
                                    <button type="button" class="btn btn-primary" (click)="resetForm()" *ngIf="!isEdit"
                                        matTooltip="Click to Clear">Clear</button>
                                    <button type="button" class="btn btn-default"
                                        style="background-color:darkgray;color:white;" data-dismiss="modal"
                                        [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                                </div>
                                <div *ngIf="view" class="row pull-right">
                                    <button type="button" class="btn btn-default"
                                        style="background-color:darkgray;color:white;" data-dismiss="modal"
                                        [disabled]="isLoadingPop" matTooltip="Click to close modal">Close</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div hidden id="pdf">
    <table >
        <thead >
            <tr>
                <th>Sl No</th>
                <th>Type</th>
                <th>Doc No</th>
                <th>Doc Title</th>
                <!-- <th>Batch No</th> -->
                <th>Requester</th>
                <th>Department</th>
                <th>Status</th>
                <th>Person Responsible</th>
                <th>Pending with</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of DocCreateFilter1; let i = index">
                <td> {{i+1}}</td>
                <td>{{item.docType}}</td>
                <td>{{item.docNo }}</td>
                <td>{{item.docShtDesc}}</td>
                <!-- <td>{{item.batchNo}}</td> -->
                <td>{{item.empCode}}</td>
                <td>{{item.fromDept}}</td>
                <td>{{item.borrowStatus}}</td>
                <td>{{item.personResponsible}}</td>
                <td>{{item.pendingApprover}}</td>
                
                
            </tr>
        </tbody>
    </table>
</div>