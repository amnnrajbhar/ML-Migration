<!-- For Login page -->
<div *ngIf="!authService.isAuthenticated()">
  <link rel="stylesheet" href="/assets/dist/css/style.css">
  <script src="/assets/dist/js/inspinia.js"></script>

  <!-- Content Area -->
  <div class="login-page">
    <router-outlet></router-outlet>
  </div>
</div>

<div id="scrollsetid" class="wrapper" *ngIf="authService.isAuthenticated()">

  <!-- Main Header -->
  <header class="main-header" *ngIf="authService.isAuthenticated()">

    <a routerLink="/vms-homepage" class="logo hidden-xs">

      <span class="logo-mini"><span><img [src]="cmpimg" /></span></span>

      <span class="logo-lg">
        <span style="align-content: center;">
          <img [src]="cmpimg" />

        </span>
      </span>
    </a>

    <nav class="navbar navbar-static-top" role="navigation">

      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
        <i class="fa fa-bars"></i>
        <span class="sr-only">Toggle navigation</span>
      </a>

      <svg class="hidden-xs hidden-sm" width="150" height="80" style="margin: 5px 10px" viewBox="0 0 154 56" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path
          d="M36.4748 44V22.616H39.4668L39.7748 26.268H39.9508C41.0655 25.0653 42.2681 24.068 43.5588 23.276C44.8495 22.484 46.3308 22.088 48.0028 22.088C50.5548 22.088 52.4175 22.8213 53.5908 24.288C54.7935 25.7253 55.3948 27.8667 55.3948 30.712V44H51.7868V31.196C51.7868 29.172 51.4055 27.676 50.6428 26.708C49.8801 25.7107 48.6188 25.212 46.8588 25.212C46.2135 25.212 45.6121 25.3 45.0548 25.476C44.5268 25.6227 43.9988 25.8573 43.4708 26.18C42.9428 26.5027 42.4001 26.9133 41.8428 27.412C41.2855 27.8813 40.6988 28.4387 40.0828 29.084V44H36.4748ZM62.8576 44V22.616H65.8496L66.1576 26.268H66.3336C67.4483 25.0653 68.651 24.068 69.9416 23.276C71.2323 22.484 72.7136 22.088 74.3856 22.088C76.9376 22.088 78.8003 22.8213 79.9736 24.288C81.1763 25.7253 81.7776 27.8667 81.7776 30.712V44H78.1696V31.196C78.1696 29.172 77.7883 27.676 77.0256 26.708C76.263 25.7107 75.0016 25.212 73.2416 25.212C72.5963 25.212 71.995 25.3 71.4376 25.476C70.9096 25.6227 70.3816 25.8573 69.8536 26.18C69.3256 26.5027 68.783 26.9133 68.2256 27.412C67.6683 27.8813 67.0816 28.4387 66.4656 29.084V44H62.8576ZM95.9724 44.528C94.9751 44.528 94.0364 44.3813 93.1564 44.088C92.2764 43.824 91.4991 43.4427 90.8244 42.944C90.1791 42.416 89.6658 41.7853 89.2844 41.052C88.9031 40.2893 88.7124 39.424 88.7124 38.456C88.7124 37.2533 88.9911 36.212 89.5484 35.332C90.1351 34.4227 91.0444 33.6453 92.2764 33C93.5378 32.3547 95.1511 31.8267 97.1164 31.416C99.0818 31.0053 101.443 30.6827 104.2 30.448C104.171 29.7147 104.054 29.0253 103.848 28.38C103.643 27.7347 103.32 27.1773 102.88 26.708C102.44 26.2093 101.854 25.8133 101.12 25.52C100.416 25.2267 99.5511 25.08 98.5244 25.08C97.1164 25.08 95.7671 25.3587 94.4764 25.916C93.1858 26.444 92.0418 27.016 91.0444 27.632L89.6364 25.168C90.1644 24.816 90.7804 24.464 91.4844 24.112C92.2178 23.7307 92.9804 23.3933 93.7724 23.1C94.5938 22.8067 95.4591 22.572 96.3684 22.396C97.2778 22.1907 98.2018 22.088 99.1404 22.088C102.074 22.088 104.244 22.8947 105.652 24.508C107.09 26.092 107.808 28.2187 107.808 30.888V44H104.86L104.552 41.096H104.42C103.218 42.0347 101.883 42.8413 100.416 43.516C98.9791 44.1907 97.4978 44.528 95.9724 44.528ZM96.9404 41.624C98.1724 41.624 99.3751 41.36 100.548 40.832C101.751 40.2747 102.968 39.4827 104.2 38.456V32.824C101.912 33 99.9911 33.2493 98.4364 33.572C96.9111 33.8947 95.6791 34.2907 94.7404 34.76C93.8311 35.2 93.1858 35.7133 92.8044 36.3C92.4231 36.8573 92.2324 37.488 92.2324 38.192C92.2324 38.808 92.3644 39.336 92.6284 39.776C92.8924 40.1867 93.2298 40.5387 93.6404 40.832C94.0804 41.096 94.5791 41.3013 95.1364 41.448C95.7231 41.5653 96.3244 41.624 96.9404 41.624ZM128.867 44.528C127.313 44.528 126.007 44.3227 124.951 43.912C123.895 43.472 123.045 42.8707 122.399 42.108C121.754 41.316 121.285 40.3773 120.991 39.292C120.727 38.2067 120.595 37.004 120.595 35.684V25.564H114.567V22.836L120.727 22.616L121.211 15.752H124.203V22.616H134.719V25.564H124.203V35.728C124.203 36.696 124.291 37.5467 124.467 38.28C124.643 38.984 124.937 39.5853 125.347 40.084C125.758 40.5827 126.315 40.964 127.019 41.228C127.723 41.4627 128.589 41.58 129.615 41.58C130.642 41.58 131.566 41.492 132.387 41.316C133.209 41.14 134.001 40.9053 134.763 40.612L135.555 43.252C134.587 43.604 133.561 43.8973 132.475 44.132C131.419 44.396 130.217 44.528 128.867 44.528Z"
          fill="#ffffff" />
        <path
          d="M0.366848 0.409763C1.19381 1.34772 1.64607 2.76312 1.91884 5.29599C2.21718 7.99061 2.43919 8.98841 3.02722 10.148C4.16986 12.4419 6.89007 14.173 10.0196 14.6079C10.7191 14.7103 14.7098 14.8893 14.7779 14.8295C14.8291 14.7697 13.9679 13.1496 13.1917 11.8535C11.4775 8.98841 9.00491 6.11469 6.59131 4.17027C6.13079 3.80342 5.75568 3.48816 5.75568 3.47082C5.75568 3.35157 7.59777 4.55363 8.69749 5.38099C9.89129 6.29337 12.2702 8.69831 13.2598 10.0027C16.3213 14.0446 18.2653 18.8541 18.7683 23.6467C18.845 24.3717 18.9218 25.0196 18.9387 25.0794C19.0068 25.3183 19.5783 25.4545 20.397 25.4207C21.0536 25.4037 21.2157 25.3695 21.3606 25.2247L21.531 25.0542L21.1897 23.775C21.0028 23.0669 20.7214 22.0778 20.5596 21.5743L20.2695 20.645L20.4573 20.0822C21.6424 16.62 25.6505 12.0664 30.1443 9.099C32.0376 7.84536 34.1776 6.83064 35.8831 6.37879C36.6419 6.17411 37.017 6.15719 36.4459 6.3532C35.7382 6.59213 33.7426 7.67493 32.5744 8.45072C29.7944 10.2841 27.3985 12.4415 25.1128 15.1617L24.3965 16.0142L25.5816 16.0654C29.8113 16.2614 31.7215 16.0567 33.495 15.2211C34.9534 14.539 36.1641 13.4814 37.0765 12.1171C37.8865 10.9064 38.1085 10.3518 38.8756 7.58043C39.2169 6.37796 39.6943 5.26958 40.1718 4.61305C40.3339 4.37412 40.4619 4.16945 40.4363 4.15253C40.4194 4.13561 40.2147 4.15253 39.9844 4.19503C38.9866 4.38279 37.6562 4.46779 34.5783 4.54455C31.2015 4.6213 29.9136 4.7323 28.6773 5.04757C25.9827 5.73835 24.1237 7.29034 23.4585 9.40519C23.1771 10.2833 23.0322 11.6393 23.1003 12.6796L23.1515 13.5152L22.5804 14.1301C21.472 15.2983 20.227 16.9869 19.6811 18.0441C19.5701 18.2743 19.4595 18.4448 19.4508 18.4278C19.4339 18.4192 19.2631 18.0272 19.067 17.558C18.871 17.0975 18.4274 16.1508 18.0866 15.4687L17.4556 14.2237L17.6603 13.7719C18.8628 11.0517 18.999 7.93078 18.0098 5.79901C17.5324 4.7843 16.8416 3.97426 15.8607 3.29173C15.349 2.94221 13.7116 2.17468 12.8079 1.86767C11.1024 1.29614 9.21784 0.997795 5.7986 0.750616C3.07839 0.554605 1.38156 0.349928 0.255845 0.0598335L0 -1.90735e-06L0.366848 0.409763Z"
          fill="#ffffff" />
        <path
          d="M30.3297 35.1319C30.3297 41.1342 25.4638 46 19.4615 46C13.4592 46 8.59341 41.1342 8.59341 35.1319L8.59341 22.7473L30.3297 22.7473L30.3297 35.1319Z"
          fill="#ffffff" />
        <rect x="140" y="23" width="13" height="3" fill="#ffffff" />
        <rect x="150" y="44" width="20" height="3" transform="rotate(-90 150 44)" fill="#ffffff" />
        <circle cx="148" cy="15" r="6" fill="#ffffff" />
        <line x1="143.823" y1="19.3085" x2="152.309" y2="10.8232" stroke="white" stroke-width="0.5" />
      </svg>
      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <li class="hidden-xs hidden-sm">
            <div class="user-panel">
              <div class="pull-left info">
                <label>
                  {{greetMessage}}
                  {{this.authService.authData.fullName}}
                </label><br />
                <small>
                  Location - {{plant}}<br />
                  Last Login: {{this.lastlogin|date:'dd/MM/yyyy HH:mm'}}<br />
                  Password expires: {{this.tokenExp|date:'dd/MM/yyyy'}}
                </small>
              </div>
            </div>
          </li>
          <li class="hidden-md hidden-lg">
            <div class="user-panel user-panel-sm">
              <div class="pull-left info">
                <label>
                  Hi {{this.authService.authData.fullName}}
                </label>
              </div>
            </div>
          </li>

          <li class="dropdown notifications-menu hidden">

            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="far fa-bell"></i>
              <!-- <span class="label label-warning">10</span> -->
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have no notifications</li>
              <!-- <li>

                <ul class="menu">
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-aqua"></i> 5 new members joined today
                    </a>
                  </li>

                </ul>
              </li>
              <li class="footer"><a href="#">View all</a></li> -->
            </ul>
          </li>

          <li class="dropdown tasks-menu">

            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="far fa-flag"></i>
              <span class="label label-danger" *ngIf="tasksList.length > 0">{{totalPendingTasks}}</span>
            </a>
            <ul class="dropdown-menu">
              <!-- <li class="header">You have {{totalPendingTasks}} tasks</li> -->
              <li>
                <ul class="menu">
                  <li *ngFor="let item of tasksList; let i = index">
                    <a href="#/{{item.link}}">
                      <h3>
                        {{item.type}}
                        <small class="label label-warning pull-right" *ngIf="item.count > 0">{{item.count}}</small>
                      </h3>

                      <!-- <div class="progress xs">

                        <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar"
                          aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                          <span class="sr-only">20% Complete</span>
                        </div>
                      </div> -->
                    </a>
                  </li>
                </ul>
              </li>
              <!-- <li class="footer">
                <a href="#">View all tasks</a>
              </li> -->
            </ul>
          </li>

          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <img [src]="uimgList" class="user-image" alt="User Image">
              <!-- <span class="hidden-xs">{{this.authService.authData.fullName}}</span> -->
            </a>
            <!-- Menu Toggle Button -->

            <ul class="dropdown-menu animated fadeInRight m-t-xs">
              <li><a routerLink="/changepassword">Change Password</a></li>
              <li *ngIf="authdata.fkProfileId!=1002"><a routerLink="/profile-page">Profile</a></li>
              <li class="divider"></li>
              <li><a href="#" (click)="onLogout()">Logout</a></li>
            </ul>
          </li>
          <!-- Control Sidebar Toggle Button -->
          <li *ngIf="authdata.fkProfileId==1 || authdata.fkProfileId==1020">
            <a href="#" data-toggle="control-sidebar"><i class="fa fa-cog"></i></a>
          </li>
        </ul>
      </div>
    </nav>
  </header>


  <!-- Side bar -->
  <aside class="main-sidebar" *ngIf="authService.isAuthenticated()">

    <section class="sidebar">


      <ul class="sidebar-menu" data-widget="tree" *ngIf="!expired">
        <li class="sideMenuItem active" [id]="'sideMenuItem_0_0'">
          <a (click)="goToMenuItem('/vms-homepage', 0, 0)"><i class="fa fa-home"></i> <span>Home</span></a>
        </li>
        <li *ngFor="let parentNode of menuListData; let i = index" [ngClass]="'treeview'">
          <a>
            <i class="{{parentNode.Parent.temp1}}"></i><span>{{parentNode.Parent.moduleName}} 
            <small class="label label-warning" *ngIf="parentNode.Parent.totalCount > 0">{{parentNode.Parent.totalCount}}</small> </span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="sideMenuItem" [id]="'sideMenuItem_'+i+'_'+j"
              *ngFor="let child of parentNode.Children[0];let j = index">
              <a (click)="goToMenuItem(child.url, i, j)"><i class="{{child.temp1}}" aria-hidden="true"></i>
                {{child.name}} <small class="label label-warning pull-right" *ngIf="child.count > 0">{{child.count}}</small>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </section>

  </aside>

  <!-- Content Area -->
  <div class="content-wrapper">
    <router-outlet></router-outlet>
  </div>


  <!-- Footer -->
  <footer class="main-footer desktop" *ngIf="authService.isAuthenticated()">
    <img src="../assets/dist/img/MicroLabsFooter2021.png" width="100%;">
  </footer>

  <!-- Right Side bar -->
  <aside class="control-sidebar control-sidebar-dark" *ngIf="authService.isAuthenticated()">
    <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
      <li>
        <a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-cogs fa-spin"
            style=" animation: fa-spin 5s infinite linear;"></i> SETTINGS</a>
      </li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
      <!-- Settings tab content -->
      <div class="tab-pane active" id="control-sidebar-settings-tab" style=" color:lightslategrey;">
        <ul class="control-sidebar-menu" style="padding-left:10px;">
          <li *ngFor="let parentNode of settingsMenuList; let i = index">
            <ul class="control-sidebar-menu" style="padding-left:10px;">
              <li *ngFor="let child of parentNode.Children[0];let j = index" routerLinkActive="active"
                style="color:white">
                <a [routerLink]="child.url" data-toggle="offcanvas" style="color:lightslategrey"><i class="{{child.temp1}}"></i>
                  {{child.name}}</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <!-- /.tab-pane -->
    </div>
  </aside>

  <!-- Right Side bar bg -->
  <div class="control-sidebar-bg" *ngIf="authService.isAuthenticated()"></div>

</div>
<div class="modal fade" id="printModal" role="dialog">
  <div class="modal-dialog modal-xl  modal-dialog-centered" style="background-color: transparent;">
    <div class="modal-content" style="background-color: transparent;">
     
      <div class="modal-body">
        <button type="button" #closebutton class="close" style="color: white" data-dismiss="modal">&times;</button>
      <img
      [src]="image"
      style="max-width:100%;cursor:pointer"
      class="modal-hover-opacity"
    /> 
      </div>
    </div>
  </div>
  </div>

  <div id="announcementModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h3 class="modal-title">
            <span>{{announcement.title}}</span></h3>
        </div>
        <div class="modal-body" style="max-height: 500px; overflow: auto">
          <i>{{announcement.shortDescription}}</i>
          <hr />
          <div>
            <div [innerHTML]="announcement.description | safeHtml"></div>
          </div>
        </div>
        <div class="modal-footer text-left">
          <label>Published on: </label> {{announcement.effectiveFromDate | date: "dd/MM/yyyy"}}
        </div>
      </div>
    </div>
  </div>